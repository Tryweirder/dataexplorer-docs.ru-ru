---
author: orspod
ms.service: data-explorer
ms.topic: include
ms.date: 01/07/2020
ms.author: orspodek
ms.openlocfilehash: c00ea9998b1ec6f05c36d0e0b926bd3b6f8d3509
ms.sourcegitcommit: 79d923d7b7e8370726974e67a984183905f323ff
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2020
ms.locfileid: "96933942"
---
Azure обозреватель данных шифрует все данные в неактивных учетных записях хранения. По умолчанию данные шифруются с помощью ключей, управляемых корпорацией Майкрософт. Для дополнительного управления ключами шифрования можно предоставить ключи, управляемые клиентом, для шифрования данных. 

Ключи, управляемые клиентом, должны храниться в [Azure Key Vault](/azure/key-vault/key-vault-overview). Вы можете создавать собственные ключи и сохранять их в хранилище ключей, а также использовать Azure Key Vault API для создания ключей. Кластер Azure обозреватель данных и хранилище ключей должны находиться в одном регионе, но могут находиться в разных подписках. Подробное описание ключей, управляемых клиентом, см. в разделе [управляемые клиентом ключи с помощью Azure Key Vault](/azure/storage/common/storage-service-encryption). 

В этой статье показано, как настроить ключи, управляемые клиентом.

## <a name="configure-azure-key-vault"></a>Настройка Azure Key Vault

Чтобы настроить ключи, управляемые клиентом, с помощью Azure обозреватель данных, необходимо [задать два свойства в хранилище ключей](/azure/key-vault/key-vault-ovw-soft-delete): **обратимое удаление** и **не очищать**. Эти свойства не включены по умолчанию. Чтобы включить эти свойства, выполните **обратимое удаление** и включите **защиту от** удаления в [PowerShell](/azure/key-vault/key-vault-soft-delete-powershell) или [Azure CLI](/azure/key-vault/key-vault-soft-delete-cli) в новом или существующем хранилище ключей. Поддерживаются только ключи RSA размером 2048. Дополнительные сведения о ключах см. в разделе [Key Vault Keys](/azure/key-vault/about-keys-secrets-and-certificates#key-vault-keys).

> [!NOTE]
> Шифрование данных с помощью управляемых пользователем ключей не поддерживается в [кластерах "руководитель" и "следующий](../follower.md) "

## <a name="assign-an-identity-to-the-cluster"></a>Назначение удостоверения кластеру

Чтобы включить управляемые клиентом ключи для кластера, сначала назначьте кластеру назначенное системой или назначенное пользователю управляемое удостоверение. Вы будете использовать это управляемое удостоверение, чтобы предоставить кластеру разрешения на доступ к хранилищу ключей. Сведения о настройке управляемых удостоверений см. в разделе [управляемые удостоверения](../managed-identities.md).
