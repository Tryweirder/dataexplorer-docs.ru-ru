---
title: Кросс-кластерные запросы и изменения схемы - Azure Data Explorer Документы Майкрософт
description: В этой статье описаны запросы кросс-кластера и изменения схем в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: a9473add657fe8a888818f83c72f12d47138c00e
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81523296"
---
# <a name="cross-cluster-queries-and-schema-changes"></a>Запросы между кластерами и изменения схемы 

При выполнении межкластерного запроса кластер, выполняющий начальную интерпретацию запроса, должен иметь схему сущностей, на которые ссылаются в удаленном кластере (s).
Поэтому, когда следующий запрос отправлен *в Cluster1*

```kusto
Table1 | join ( cluster("Cluster2").database("SomeDB").Table2 ) on KeyColumn
``` 

*Cluster1* должен знать, какие столбцы *таблицы 2* на *Cluster2* имеют и каковы типы данных этих столбцов. Для того, чтобы выполнить, что специальная команда отправляется из *кластера1* в *cluster2*.
Эта отправка этой команды может быть довольно дорогостоящей, поэтому после получения, схемы для удаленных сущностей кэшируются, и следующий запрос, ссылающийся на те же сущности, должен будет выполнять меньше сетевых операций.

Это может привести к нежелательным последствиям при изменении схемы удаленной сущности (добавленные столбцы не распознаются или удалены столбцы, вызывая "Неоднократную ошибку запроса" вместо семантической ошибки).

Для облегчения этой проблемы кэшированные схемы истекают через 1 час после поиска, поэтому любой запрос, выполняемый более чем через 1 час после изменения, будет работать с актуальной схемой.