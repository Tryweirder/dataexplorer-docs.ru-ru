---
title: Kusto запросы между кластерами & изменения схемы — Azure обозреватель данных
description: В этой статье описаны запросы и изменения схемы между кластерами в обозреватель данных Azure.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: 9ed8ba6ac5e66326e6aa1d9e7a7f474506b57e26
ms.sourcegitcommit: f7101c6b41ec250d05f4cb6092e2939958b37b40
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2020
ms.locfileid: "84328982"
---
# <a name="cross-cluster-queries-and-schema-changes"></a>Запросы между кластерами и изменения схемы

При выполнении запроса между кластерами кластер, выполняющий интерпретацию первоначального запроса, должен иметь схему сущностей, на которые имеются ссылки в удаленных кластерах.
При отправке следующего запроса в *Cluster1*

```kusto
Table1 | join ( cluster("Cluster2").database("SomeDB").Table2 ) on KeyColumn
``` 

*Cluster1* должен иметь представление о том, какие столбцы *Таблица2* в *Cluster2* , и типы данных этих столбцов. Для получения этой информации специальная команда отправляется из *Cluster1* в *Cluster2*.
Отправка команды может быть дорогостоящей. После извлечения схемы для удаленных сущностей кэшируются, и следующий запрос, ссылающийся на одни и те же сущности, будет выполнять меньше сетевых операций.

Изменения в схеме удаленной сущности могут привести к нежелательным последствиям. Например, добавленные столбцы не распознаются, или удаленные столбцы вызывают ошибку частичного запроса, а не семантическую ошибку.

Чтобы решить эту проблему, срок действия кэшированных схем истекает через один час после получения, так что любой запрос, выполненный более часа после изменения, будет работать с обновленной схемой.
