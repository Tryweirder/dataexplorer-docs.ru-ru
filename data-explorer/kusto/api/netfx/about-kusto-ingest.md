---
title: Клиентская библиотека приема Kusto в Azure обозреватель данных | Документация Майкрософт
description: В этой статье описывается Kusto приема клиентской библиотеки в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.custom: has-adal-ref
ms.date: 03/24/2020
ms.openlocfilehash: c43c6c09ad6da90685c56dc47ebe257a55eaede6
ms.sourcegitcommit: f6cf88be736aa1e23ca046304a02dee204546b6e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2020
ms.locfileid: "82862145"
---
# <a name="kusto-ingest-client-library"></a>Клиентская библиотека приема Kusto

## <a name="overview"></a>Обзор
Kusto. Принимающая библиотека — это библиотека .NET 4.6.2, которая позволяет отправлять данные в службу Kusto.
Kusto. прием принимает зависимости от следующих библиотек и пакетов SDK:

* ADAL для проверки подлинности AAD
* Клиент службы хранилища Azure

Методы приема Kusto определяются интерфейсом [икустоинжестклиент](kusto-ingest-client-reference.md#interface-ikustoingestclient) и позволяют принимать данные из потоков, IDataReader, локальных файлов и больших двоичных объектов Azure в синхронных и асинхронных режимах.

## <a name="ingest-client-flavors"></a>Флаги приема клиента
По сути, существует две основные разновидности принимающего клиента: в очереди и прямо.

### <a name="queued-ingestion"></a>Прием в очереди
Этот режим, определяемый [икустокуеуединжестклиент](kusto-ingest-client-reference.md#interface-ikustoqueuedingestclient), ограничивает зависимость клиентского кода от службы Kusto. Прием выполняется путем отправки сообщения приема Kusto в очередь Azure, которая затем получается из службы Управление данными Kusto (приема). Принимающий клиент будет создавать любые промежуточные артефакты хранилища, используя ресурсы, выделенные службой Kusto Управление данными.

**Преимущества режима очереди** включают (но не ограничиваются ими):

* Отделение процесса приема данных от службы ядра Kusto
* Разрешает сохранение запросов приема, если служба Kusto Engine (или приема) недоступна
* Обеспечивает эффективную и управляемую статистическую обработку входящих данных службой приема, повышая производительность
* Позволяет службе приема Kusto управлять нагрузкой приема в службе подсистемы Kusto
* Служба приема Kusto повторит попытку, если это необходимо для временных сбоев приема (например, регулирования XStore).
* Предоставляет удобный механизм отслеживания хода выполнения и результатов каждого запроса приема.

На следующей схеме показано взаимодействие клиента приема в очереди с Kusto.

![Замещающий текст](../images/queued-ingest.jpg "приема в очереди")

### <a name="direct-ingestion"></a>Прямой прием
Этот режим, определяемый Икустодиректинжестклиент, обеспечивает прямое взаимодействие со службой подсистемы Kusto. В этом режиме служба приема Kusto не является умеренным и не управляет данными. Каждый запрос приема в прямом режиме в конечном итоге преобразуется в `.ingest` команду, выполняемую непосредственно в службе Kusto Engine.
На следующей схеме показано взаимодействие клиента прямого приема с Kusto.

![Замещающий текст](../images/direct-ingest.jpg "прямой прием")

> [!NOTE]
> Режим Direct не рекомендуется использовать для решений приема производственного уровня.

**К преимуществам прямого режима** относятся:

* Низкая задержка (агрегирование отсутствует). Однако низкая задержка также может быть достигнута посредством очередного приема
* При использовании синхронных методов завершение метода указывает на окончание операции приема.

**Недостатки прямого режима** :

* Клиентский код должен реализовать любую логику обработки повторов или ошибок
* Приемы невозможны, если служба ядра Kusto недоступна
* Клиентский код может перегрузить службу Kusto Engine с запросами приема, так как она не знает о производительности службы ядра.

## <a name="ingestion-best-practices"></a>Рекомендации по приему

### <a name="general"></a>Общие сведения
Рекомендации по [приему](kusto-ingest-best-practices.md) обеспечивают пропускную способность и переработку для приема.

### <a name="thread-safety"></a>Потокобезопасность
Реализации клиентов, принимающие Kusto, являются потокобезопасными и предназначены для повторного использования. Нет необходимости создавать экземпляр `KustoQueuedIngestClient` класса для каждой или даже нескольких операций приема. Для каждого пользовательского процесса `KustoQueuedIngestClient` в целевом кластере Kusto требуется один экземпляр. Работа с несколькими экземплярами работает с помощью счетчиков и может поработать с Управление данными кластером.

### <a name="supported-data-formats"></a>Поддерживаемые форматы данных
Если вы используете прием машинного кода, если это еще не сделано, отправьте данные в один или несколько больших двоичных объектов службы хранилища Azure. Поддерживаемые в настоящее время форматы больших двоичных объектов описаны в разделе [Поддерживаемые форматы данных](https://docs.microsoft.com/azure/data-explorer/ingestion-supported-formats) .

### <a name="schema-mapping"></a>Сопоставление схем
[Сопоставления схем](../../management/mappings.md) помогают с детерминированной привязкой полей исходных данных к столбцам целевой таблицы.

## <a name="usage-and-further-reading"></a>Использование и дополнительные материалы

* Как описано выше, для устойчивых и крупномасштабных решений приема для Kusto рекомендуется использовать **кустокуеуединжестклиент**.
* Чтобы уменьшить ненужную нагрузку на службу Kusto, рекомендуется использовать один экземпляр Kusto принимающего клиента (в очереди или прямой) для каждого процесса в кластере Kusto. Реализация клиента, принимающего Kusto, является потокобезопасным и полностью передается.

### <a name="ingestion-permissions"></a>Разрешения на прием
* [Разрешения](kusto-ingest-client-permissions.md) на прием Kusto. описывает настройку разрешений, необходимую для успешного приема с помощью Kusto. принимающий пакет

### <a name="kustoingest-library-reference"></a>Ссылка на библиотеку Kusto. приема
* [Kusto. Принимающая ссылка на клиент](kusto-ingest-client-reference.md) содержит полную ссылку на Kusto приема клиентских интерфейсов и реализаций.<BR>Здесь вы найдете сведения о том, как создавать клиенты приема, расширять запросы приема, управлять ходом приема и многое другое.
* [Kusto. принимающее состояние операции](kusto-ingest-client-status.md) описывает средства **кустокуеуединжестклиент** для отслеживания состояния приема
* [Kusto. прием сообщений об ошибках](kusto-ingest-client-errors.md) Kusto получение ошибок и исключений клиента
* [Примеры Kusto. приема](kusto-ingest-client-examples.md) представляют фрагменты кода, демонстрирующие различные методы приема данных в Kusto

### <a name="data-ingestion-rest-apis"></a>Интерфейсы API-интерфейсов для приема данных
Прием [данных без Kusto. получение библиотеки](kusto-ingest-client-rest.md) объясняет, как реализовать постановку в очередь Kusto с помощью API-интерфейсов RESTful Kusto и без зависимости от Kusto. Принимающая библиотека.
