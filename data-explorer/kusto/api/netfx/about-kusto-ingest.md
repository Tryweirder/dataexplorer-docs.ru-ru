---
title: Библиотека клиентов Kusto Ingest - Azure Data Explorer Документы Майкрософт
description: В этой статье описывается библиотека клиентов Kusto Ingest в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 03/24/2020
ms.openlocfilehash: 0fd86579f4ca6471903305ca9249b78bc03b8cdf
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81503134"
---
# <a name="kusto-ingest-client-library"></a>Библиотека клиентов Kusto Ingest

## <a name="overview"></a>Обзор
Библиотека Kusto.Ingest — это библиотека .NET 4.6.2, которая позволяет отправлять данные в службу Kusto.
Kusto.Ingest использует зависимости от следующих библиотек и SDK:

* ADAL для аутентификации AAD
* Клиент хранения azure
* «TBD: полный список внешних зависимостей»

Методы приема Кусто определяются интерфейсом [IKustoIngestClient](kusto-ingest-client-reference.md#interface-ikustoingestclient) и позволяют глотать данные из Stream, IDataReader, локального файла (ы) и Azure blob (ы) как в синхронном, так и в асинхронном режимах.

## <a name="ingest-client-flavors"></a>Глотать клиентские ароматизаторы
Концептуально, Есть два основных вкуса Ingest клиента: Очередь и прямой.

### <a name="queued-ingestion"></a>В очереди заглам
Этот режим, определяемый [IKusto'u'uingingestClient,](kusto-ingest-client-reference.md#interface-ikustoqueuedingestclient)ограничивает зависимость клиентского кода от службы Kusto. Загласка выполняется путем размещения сообщения о проглатывании Кусто в очередь Azure, которая затем приобретается в службе управления данными Kusto (Ingestion). Любые промежуточные артефакты хранения будут создаваться клиентом, использующим ресурсы, выделенные службой управления данными Kusto.

**Преимущества режима «Очередь»** включают в себя (но не ограничиваются):

* Разъединение процесса приема данных от службы Kusto Engine
* Позволяет сохранять запросы на проглатку, когда услуга Kusto Engine (или Ingestion) недоступна
* Позволяет эффективно и контролируемое скопление входящих данных службой ingestion, повышая производительность
* Позволяет сервису Kusto Ingestion управлять загрузкой на обслуживание Kusto Engine
* Служба защищищищивания Kusto будет повторно при необходимости при сбоях переходного приема (например, регулирование XStore)
* Обеспечивает удобный механизм для отслеживания хода и результата каждого запроса на проглатывание

На следующей диаграмме описывается взаимодействие клиента в очереди с Kusto:

![альт текст](../images/queued-ingest.jpg "в очереди-ingest")

### <a name="direct-ingestion"></a>Прямая проглатка
Этот режим, разработанный IKustoDirectIngestClient, определяется прямым взаимодействием с сервисом Kusto Engine. В этом режиме служба Kusto Ingestion не модерирует и не управляет данными. Каждый запрос на проглатывание в `.ingest` режиме Direct в конечном итоге переводится в команду, выполняемую непосредственно на службе Kusto Engine.
На следующей диаграмме излагается взаимодействие клиента прямого приема с Kusto:

![альт текст](../images/direct-ingest.jpg "прямой ingest")

> [!NOTE]
> Режим Direct не рекомендуется для решений по проглатке производственного класса.

**Преимущества режима Direct** включают в себя:

* Низкая задержка (агрегации нет). Тем не менее, низкая задержка также может быть достигнута с очередью
* При использовании синхронных методов завершение метода указывает на окончание операции по приему

**Недостатки режима Direct** включают:

* Клиентский код должен реализовать любую логику повтора или обработки ошибок
* Проем невозможно, когда услуга Kusto Engine недоступна
* Код клиента может перегрузить службу Kusto Engine с запросами на проглатывание, так как он не знает о емкости обслуживания двигателя

## <a name="ingestion-best-practices"></a>Проглатывание передовой практики

### <a name="general"></a>Общее
[Проглатывание передовой практики](kusto-ingest-best-practices.md) обеспечивает COGs и пропускную пропускную информацию POV при проглатывании.

### <a name="thread-safety"></a>Потокобезопасность
Реализации Kusto Ingest Client безопасны для потоков и предназначены для повторного использования. Нет необходимости `KustoQueuedIngestClient` создавать экземпляр класса для каждой или даже нескольких операций по проглочению. Один экземпляр `KustoQueuedIngestClient` требуется для целевого кластера Kusto в процессе пользователя. Запуск нескольких экземпляров контрпродуктивен и может doS кластера управления данными.

### <a name="supported-data-formats"></a>Поддерживаемые форматы данных
При использовании native ingestion, если его еще нет, загрузите данные в одну или несколько капли хранения Azure. В настоящее время поддерживаемые форматы blob задокументированы в теме [Поддерживаемых форматов данных.](https://docs.microsoft.com/azure/data-explorer/ingestion-supported-formats)

### <a name="schema-mapping"></a>Сопоставление схем
[Отображение схемы](../../management/mappings.md) помогает с детерминатично связывающими полями исходных данных с столбиками таблицы назначения.

## <a name="usage-and-further-reading"></a>Использование и дальнейшее чтение

* Как описано выше, рекомендуемой основой для устойчивого и высокого масштаба решения для приема в Кусто должен быть **Kusto'UтерикингестКлиент**.
* Чтобы свести к минимуму ненужную нагрузку на службу Kusto, рекомендуется использовать один экземпляр клиента Kusto Ingest (очередь или Прямая) в каждом процессе на кластер Kusto. Реализация клиента Kusto Ingest является безопасной и полностью реантентирующей.

### <a name="ingestion-permissions"></a>Разрешения на проглатывание
* [Kusto Ingestion Permissions](kusto-ingest-client-permissions.md) объясняет настройки разрешений, необходимые для успешного приема с помощью пакета Kusto.Ingest

### <a name="kustoingest-library-reference"></a>Ссылка на библиотеку Кусто.Ингест
* [Ссылка на клиентов Kusto.Ingest](kusto-ingest-client-reference.md) содержит полную ссылку на клиентские интерфейсы и реализации Kusto.<BR>Там вы найдете информацию о том, как создать глотание клиентов, увеличить запросы на проглатывание, управлять прогрессом приема и многое другое
* [Kusto.Ingest Операция Статус](kusto-ingest-client-status.md) объясняет **Kusto'UudIngEstКлиент** объектов для отслеживания статуса приема
* [Ошибки Kusto.Ingest](kusto-ingest-client-errors.md) документируют ошибки и исключения клиентов Kusto Ingest
* [Kusto.Ingest Примеры](kusto-ingest-client-examples.md) представляет фрагменты кода, демонстрирующие различные методы глотания данных в Kusto

### <a name="data-ingestion-rest-apis"></a>Проглатывание данных REST AIS
[Заглаживание данных без библиотеки Kusto.Ingest](kusto-ingest-client-rest.md) объясняет, как реализовать в очередь Кюсто ingestion с помощью ApIs Kusto REST и не принимая зависимость от библиотеки Kusto.Ingest.

