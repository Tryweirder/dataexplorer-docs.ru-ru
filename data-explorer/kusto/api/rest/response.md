---
title: HTTP-ответ для запросов и управления — Azure обозреватель данных | Документация Майкрософт
description: В этой статье описывается HTTP-ответ для запросов и управления в обозреватель данных Azure.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 11/05/2018
ms.openlocfilehash: 5a9166066ee664f15b07dff2b0a535044ebb929c
ms.sourcegitcommit: 061eac135a123174c85fe1afca4d4208c044c678
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/05/2020
ms.locfileid: "82799651"
---
# <a name="querymanagement-http-response"></a>HTTP-ответ для запроса или управления

## <a name="response-status"></a>Состояние ответа

Строка состояния ответа HTTP соответствует стандартным кодам ответов HTTP.
Например, код 200 указывает на успешное выполнение. 

В настоящее время используются следующие коды состояний, хотя может возвращаться любой допустимый код HTTP.

|Код|Дополнительным кодом        |Описание                                    |
|----|---------------|-----------------------------------------------|
|100 |Continue       |Клиент может продолжать отправку запроса.       |
|200 |OK             |Запрос успешно начал обработку.       |
|400 |BadRequest     |Запрос имеет неправильный формат и не выполнен (без возможности восстановления).|
|401 |Не авторизовано   |Сначала необходимо пройти проверку подлинности клиента.            |
|403 |Запрещено      |Запрос клиента запрещен.                      |
|404 |NotFound       |Запрос ссылается на несуществующую сущность.      |
|413 |пайлоадтуларже|Объем полезных данных запроса превысил пределы.               |
|429 |TooManyRequests|Запрос был отклонен из-за регулирования. |
|504 |Время ожидания        |Время ожидания запроса истекло.                         |
|520 |ServiceError   |Служба обнаружила ошибку при обработке запроса.|

> [!NOTE]
> Код состояния 200 показывает, что обработка запроса успешно началась, а не успешно завершено.
> Ошибки, обнаруженные во время обработки запроса после возврата кода состояния 200, называются "частичными сбоями запросов", и при их обнаружении специальные индикаторы вставляются в поток ответа для оповещения клиента о том, что они были выполнены.

## <a name="response-headers"></a>Заголовки ответов

Будут возвращены следующие пользовательские заголовки.

|Пользовательский заголовок           |Описание                                                                                               |
|------------------------|----------------------------------------------------------------------------------------------------------|
|`x-ms-client-request-id`|Уникальный идентификатор запроса, отправленный в заголовке запроса с тем же именем или с некоторым уникальным идентификатором.     |
|`x-ms-activity-id`      |Глобальный уникальный идентификатор корреляции для запроса. Он создается службой.                    |

## <a name="response-body"></a>Текст ответа

Если код состояния равен 200, то текст ответа представляет собой документ JSON, который кодирует результаты команды запроса или элемента управления в виде последовательности прямоугольных таблиц.
Дополнительные сведения см. ниже.

> [!NOTE]
> Последовательность таблиц отражается пакетом SDK. Например, при использовании библиотеки .NET Framework Kusto. Data, последовательность таблиц затем станет результатом `System.Data.IDataReader` объекта, ВОЗВРАЩАЕМого пакетом SDK.

Если код состояния указывает на ошибку 4xx или 5xx, отличный от 401, текст ответа является документом JSON, который кодирует сведения о сбое.
Дополнительные сведения см. в разделе [рекомендации корпорации майкрософт REST API](https://github.com/microsoft/api-guidelines).

> [!NOTE]
> Если `Accept` заголовок не включен в запрос, текст ответа ошибки не обязательно является документом JSON.

## <a name="json-encoding-of-a-sequence-of-tables"></a>Кодировка JSON последовательности таблиц

Кодировка JSON последовательности таблиц представляет собой один контейнер свойств JSON со следующими парами "имя-значение".

|Имя  |Значение                              |
|------|-----------------------------------|
|Таблицы|Массив контейнера свойств таблицы.|

Контейнер свойств таблицы имеет следующие пары "имя-значение".

|Имя     |Значение                               |
|---------|------------------------------------|
|TableName|Строка, идентифицирующая таблицу. |
|Столбцы  |Массив контейнера свойств столбца.|
|Строки     |Массив массива строк.          |

Контейнер свойств столбца имеет следующие пары "имя-значение".

|Имя      |Значение                                                          |
|----------|---------------------------------------------------------------|
|ColumnName|Строка, определяющая столбец.                           |
|DataType  |Строка, которая предоставляет приблизительный тип .NET столбца.|
|ColumnType|Строка, предоставляющая [скалярный тип данных](../../query/scalar-data-types/index.md) столбца.|

Массив строк имеет тот же порядок, что и соответствующий массив столбцов.
В массиве строк также имеется один элемент, который совпадает со значением строки для соответствующего столбца.
Скалярные типы данных, которые не могут быть представлены в JSON `datetime` , `timespan`такие как и, представляются в виде строк JSON.

В следующем примере показан один из возможных таких объектов, если он содержит одну таблицу с `Table_0` именем, имеющую один `Text` столбец типа `string`, и одну строку.

```json
{
    "Tables": [{
        "TableName": "Table_0",
        "Columns": [{
            "ColumnName": "Text",
            "DataType": "String",
            "ColumnType": "string"
        }],
        "Rows": [["Hello, World!"]]
}
```

Другой пример: 

:::image type="content" source="../images/rest-json-representation.png" alt-text="представление "остальное-JSON"":::

## <a name="the-meaning-of-tables-in-the-response"></a>Значение таблиц в ответе

В большинстве случаев команды управления возвращают результат с одной таблицей, содержащей сведения, созданные командой Control. Например, `.show databases` команда возвращает одну таблицу со сведениями обо всех доступных базах данных в кластере.

Обычно запросы возвращают несколько таблиц.
Для каждой [инструкции табличного выражения](../../query/tabularexpressionstatements.md)создается одна или несколько таблиц в порядке, представляющих результаты, сформированные инструкцией.

> [!NOTE]
> Из-за [пакетов](../../query/batches.md) и [операторов ветвления](../../query/forkoperator.md)может существовать несколько таких таблиц.

Часто создаются три таблицы:

* @ExtendedProperties Таблица, предоставляющая дополнительные значения, например инструкции по визуализации клиента. Эти значения создаются, например, для отражения сведений в [операторе Render](../../query/renderoperator.md)и [курсора базы данных](../../management/databasecursor.md).
* Таблица QueryStatus, в которой содержатся дополнительные сведения о выполнении самого запроса, такие как, если он был успешно выполнен или нет, а также ресурсы, потребляемые запросом.
* Таблица Таблеофконтентс, которая создается последним, и перечисляет другие таблицы в результатах.
