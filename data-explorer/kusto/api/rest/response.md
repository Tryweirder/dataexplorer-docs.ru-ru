---
title: HTTP-ответ для запросов и управления — Azure обозреватель данных | Документация Майкрософт
description: В этой статье описывается HTTP-ответ для запросов и управления в обозреватель данных Azure.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 11/05/2018
ms.openlocfilehash: 2642ffc6b87afab785dc5f7ba962e1f659232cc2
ms.sourcegitcommit: 7fa9d0eb3556c55475c95da1f96801e8a0aa6b0f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2020
ms.locfileid: "91942273"
---
# <a name="querymanagement-http-response"></a>HTTP-ответ для запроса или управления

## <a name="response-status"></a>Состояние ответа

Строка состояния ответа HTTP соответствует стандартным кодам ответов HTTP.
Например, код 200 указывает на успешное выполнение. 

В настоящее время используются следующие коды состояний, хотя может возвращаться любой допустимый код HTTP.

|Код|Дополнительным кодом        |Описание                                    |
|----|---------------|-----------------------------------------------|
|100 |Продолжить       |Клиент может продолжать отправку запроса.       |
|200 |OK             |Запрос успешно начал обработку.       |
|400 |BadRequest     |Запрос имеет неправильный формат и не выполнен (без возможности восстановления).|
|401 |Не авторизовано   |Сначала необходимо пройти проверку подлинности клиента.            |
|403 |Запрещено      |Запрос клиента запрещен.                      |
|404 |NotFound       |Запрос ссылается на несуществующую сущность.      |
|413 |пайлоадтуларже|Объем полезных данных запроса превысил пределы.               |
|429 |TooManyRequests|Запрос был отклонен из-за регулирования. |
|504 |Время ожидания        |Время ожидания запроса истекло.                         |
|520 |ServiceError   |Служба обнаружила ошибку при обработке запроса.|

> [!NOTE]
> Код состояния 200 показывает, что обработка запроса успешно началась, а не успешно завершено.
> Ошибки, обнаруженные во время обработки запроса после возврата кода состояния 200, называются "частичными сбоями запросов", и при их обнаружении специальные индикаторы вставляются в поток ответа для оповещения клиента о том, что они были выполнены.

## <a name="response-headers"></a>Заголовки ответов

Будут возвращены следующие пользовательские заголовки.

|Пользовательский заголовок           |Описание                                                                                               |
|------------------------|----------------------------------------------------------------------------------------------------------|
|`x-ms-client-request-id`|Уникальный идентификатор запроса, отправленный в заголовке запроса с тем же именем или с некоторым уникальным идентификатором.     |
|`x-ms-activity-id`      |Глобальный уникальный идентификатор корреляции для запроса. Он создается службой.                    |

## <a name="response-body"></a>Текст ответа

Если код состояния равен 200, то текст ответа представляет собой документ JSON, который кодирует результаты команды запроса или элемента управления в виде последовательности прямоугольных таблиц.
Дополнительные сведения см. далее.

> [!NOTE]
> Последовательность таблиц отражается пакетом SDK. Например, при использовании библиотеки .NET Framework Kusto. Data, последовательность таблиц затем станет результатом `System.Data.IDataReader` объекта, возвращаемого пакетом SDK.

Если код состояния указывает на ошибку 4xx или 5xx, отличный от 401, текст ответа является документом JSON, который кодирует сведения о сбое.
Дополнительные сведения см. в разделе [рекомендации корпорации майкрософт REST API](https://github.com/microsoft/api-guidelines).

> [!NOTE]
> Если `Accept` заголовок не включен в запрос, текст ответа ошибки не обязательно является документом JSON.

## <a name="json-encoding-of-a-sequence-of-tables"></a>Кодировка JSON последовательности таблиц

Кодировка JSON последовательности таблиц представляет собой один контейнер свойств JSON со следующими парами "имя-значение".

|Название  |Значение                              |
|------|-----------------------------------|
|Таблицы|Массив контейнера свойств таблицы.|

Контейнер свойств таблицы имеет следующие пары "имя-значение".

|Название     |Значение                               |
|---------|------------------------------------|
|TableName|Строка, идентифицирующая таблицу. |
|Столбцы  |Массив контейнера свойств столбца.|
|Строки     |Массив массива строк.          |

Контейнер свойств столбца имеет следующие пары "имя-значение".

|Название      |Значение                                                          |
|----------|---------------------------------------------------------------|
|ColumnName|Строка, определяющая столбец.                           |
|DataType  |Строка, которая предоставляет приблизительный тип .NET столбца.|
|ColumnType|Строка, предоставляющая [скалярный тип данных](../../query/scalar-data-types/index.md) столбца.|

Массив строк имеет тот же порядок, что и соответствующий массив столбцов.
В массиве строк также имеется один элемент, который совпадает со значением строки для соответствующего столбца.
Скалярные типы данных, которые не могут быть представлены в JSON, такие как и, представляются в `datetime` `timespan` виде строк JSON.

В следующем примере показан один из возможных таких объектов, если он содержит одну таблицу с именем, `Table_0` имеющую один столбец `Text` типа `string` , и одну строку.

```json
{
    "Tables": [{
        "TableName": "Table_0",
        "Columns": [{
            "ColumnName": "Text",
            "DataType": "String",
            "ColumnType": "string"
        }],
        "Rows": [["Hello, World!"]]
}
```

Еще один пример: 

:::image type="content" source="../images/rest-json-representation.png" alt-text="Снимок экрана с представлением в виде дерева JSON-файла, содержащего массив объектов таблицы.":::

## <a name="the-meaning-of-tables-in-the-response"></a>Значение таблиц в ответе

В большинстве случаев команды управления возвращают результат с одной таблицей, содержащей сведения, созданные командой Control. Например, `.show databases` команда возвращает одну таблицу со сведениями обо всех доступных базах данных в кластере.

Обычно запросы возвращают несколько таблиц.
Для каждой [инструкции табличного выражения](../../query/tabularexpressionstatements.md)создается одна или несколько таблиц в порядке, представляющих результаты, сформированные инструкцией.

> [!NOTE]
> Из-за [пакетов](../../query/batches.md) и [операторов ветвления](../../query/forkoperator.md)может существовать несколько таких таблиц.

Часто создаются три таблицы:
* @ExtendedPropertiesТаблица, предоставляющая дополнительные значения, например инструкции по визуализации клиента. Эти значения создаются, например, для отражения сведений в [операторе Render](../../query/renderoperator.md)и [курсора базы данных](../../management/databasecursor.md).
  
  Эта таблица содержит один столбец типа `string` , содержащий значения, подобные JSON:

  |Значение|
  |-----|
  |{"Визуализация": "пиечарт",...}|
  |{"Cursor": "637239957206013576"}|

* Таблица QueryStatus, в которой содержатся дополнительные сведения о выполнении самого запроса, такие как, если он был успешно выполнен или нет, а также ресурсы, потребляемые запросом.

  Эта таблица имеет следующую структуру:

  |Отметка времени                  |Severity|северитинаме|StatusCode|StatusDescription            |Счетчик|RequestId|ActivityId|субактивитид|клиентактивитид|
  |---------------------------|--------|------------|----------|-----------------------------|-----|---------|----------|-------------|----------------|
  |2020-05-02 06:09:12.7052077|4       |Info        | 0        | Запрос успешно выполнен|1    |...      |...       |...          |...             |

  Значения серьезности 2 или меньше означают сбой.

* Таблица Таблеофконтентс, которая создается последним, и перечисляет другие таблицы в результатах. 

  Пример для этой таблицы:

  |Порядковый номер|Вид            |Название               |Идентификатор                                  |преттинаме|
  |-------|----------------|-------------------|------------------------------------|----------|
  |0      | куериресулт    |примариресулт      |db9520f9-0455-4cb5-b257-53068497605a||
  |1      | QueryProperties|@ExtendedProperties|908901f6-5319-4809-ae9e-009068c267c7||
  |2      | QueryStatus    |QueryStatus        |00000000-0000-0000-0000-000000000000||
