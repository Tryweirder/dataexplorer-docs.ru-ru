---
title: dcount() (функция агрегирования) - Azure Data Explorer Документы Майкрософт
description: В этой статье описывается dcount() (функция агрегирования) в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: abd474d1ef06a71e3971df18c7ba65904b34ee06
ms.sourcegitcommit: 436cd515ea0d83d46e3ac6328670ee78b64ccb05
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81663835"
---
# <a name="dcount-aggregation-function"></a>dcount() (функция агрегирования)

Возвращает оценку количества различных значений, принятых скалярным выражением в сводной группе.

**Синтаксис**

... `|` `,` *Accuracy*`)` *Expr* Экстр - Точность ... `summarize` `dcount` `(`

**Аргументы**

* *Expr*: Скалар выражение, чьи различные значения должны быть подсчитаны.
* *Точность*: `int` Дополнительный буквальный, который определяет запрашиваемую точность оценки. Ниже приведены поддерживаемые значения. Если не указано, `1` используется значение по умолчанию.

**Возвращает**

Возвращает приблизительное количество различных значений выражения *Expr* для группы.

**Пример**

```kusto
PageViewLog | summarize countries=dcount(country) by continent
```

![альт текст](./images/aggregations/dcount.png "dcount")

**Примечания**

Функция `dcount()` агрегирования в первую очередь полезна для оценки кардинальности огромных наборов. Он торгует производительностью для точности, и, следовательно, может вернуть результат, который варьируется между выполнением (порядок входных данных может повлиять на его выход).

Чтобы получить точный подсчет различных значений, сгруппированных `V` по: `G`

```kusto
T | summarize by V, G | summarize count() by G
```

Этот расчет потребует много внутренней памяти, так как различные `V` значения `G`умножаются на количество различных значений ; Таким образом, это может привести к ошибкам памяти или большому времени выполнения. `dcount()`обеспечивает быструю и надежную альтернативу:

```kusto
T | summarize dcount(B) by G | count
```

## <a name="estimation-accuracy"></a>Точность оценки

Совокупная `dcount()` функция использует вариант [алгоритма HyperLogLog (HLL),](https://en.wikipedia.org/wiki/HyperLogLog)который делает стохастичную оценку заданным кардинальностью. Алгоритм предоставляет "ручку", которая может быть использована для баланса точности и времени выполнения / размера памяти:

|Точность|Ошибка (%)|Количество ввода   |
|--------|---------|--------------|
|       0|      1.6|2<sup>12 сентября</sup>|
|       1|      0,8|2<sup>14 сентября</sup>|
|       2|      0,4|2<sup>16</sup>|
|       3|     0,28|2<sup>17</sup>|
|       4|      0,2|2<sup>18 сентября</sup>|

> [!NOTE]
> Столбец "количество ввода" — это количество счетчиков с 1 байт в реализации HLL.

Алгоритм включает в себя некоторые положения для выполнения идеального подсчета (нулевая ошибка), если набор `1`кардинальности достаточно мал (1000 `2`значений, когда уровень точности, и 8000 значений, если уровень точности).

Связанная ошибка является вероятностной, а не теоретической границой. Значение является стандартным отклонением распределения ошибок (сигма), и 99,7% оценок будут иметь относительную погрешность менее 3 раз сигмы.

Ниже приводится функция распределения вероятности относительной ошибки оценки (в процентах) для всех поддерживаемых параметров точности:

:::image type="content" border="false" source="images/aggregations/hll-error-distribution.png" alt-text="Распределение ошибок hll":::
