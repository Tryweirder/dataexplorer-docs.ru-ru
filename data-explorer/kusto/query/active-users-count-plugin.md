---
title: подключаемый модуль active_users_count — Azure обозреватель данных
description: В этой статье описывается подключаемый модуль active_users_count в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: 22d3744cfa83a003830acc07710fd459003dbf20
ms.sourcegitcommit: 9fe6ee7db15a5cc92150d3eac0ee175f538953d2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2020
ms.locfileid: "82907203"
---
# <a name="active_users_count-plugin"></a>подключаемый модуль active_users_count

Вычисляет различные числа значений, в которых каждое значение присутствовало по крайней мере в минимальном количестве периодов в лукбакк периоде.

Полезен для расчета различных счетчиков "вентиляторов", не включая внешний вид "не-вентиляторов". Пользователь считается "вентилятором" только в том случае, если он был активным в течение периода лукбакк. Период лукбакк используется только для определения того, считается `active` ли пользователь ("вентилятор"). Сама Статистическая обработка не включает пользователей из окна лукбакк. В сравнении [sliding_window_counts](sliding-window-counts-plugin.md) Статистическая обработка выполняется в скользящем окне периода лукбакк.

```kusto
T | evaluate active_users_count(id, datetime_column, startofday(ago(30d)), startofday(now()), 7d, 1d, 2, 7d, dim1, dim2, dim3)
```

**Синтаксис**

*T* `| evaluate` `,` *TimelineColumn* `,` *Bin* *dim2* *IdColumn* `,` *Period* *End* `,` *LookbackWindow* `,` *dim1* *Start* `,` идколумн тимелинеколумн`,` начало`,` окончания`,` лукбакквиндов периода`,` *активепериодскаунт* bin [Dim1 dim2...] `active_users_count(``)`

**Аргументы**

* *T*: Входное табличное выражение.
* *Идколумн*: имя столбца со значениями идентификаторов, представляющими действия пользователя. 
* *Тимелинеколумн*: имя столбца, представляющего временную шкалу.
* *Start*(необязательно) — скаляр со значением начального периода анализа.
* *End*(необязательный) — скаляр со значением периода окончания анализа.
* *Лукбакквиндов*: скользящее временное окно, определяющее период, в котором проверяется внешний вид пользователя. Лукбакк период начинается в ([текущий вид]-[лукбакк Window]) и заканчивается на ([текущий внешний вид]). 
* *Period*: скалярная константа TimeSpan для подсчета как единый внешний вид (пользователь будет считаться активным, если он встречается по крайней мере в различных активепериодскаунтах этого интервала времени.
* *Активепериодскаунт*: минимальное количество уникальных активных периодов для определения активности пользователя. Активные пользователи — это пользователи, которые выглядели по меньшей мере (равно или больше) количеству активных периодов.
* *Bin*: скалярное постоянное значение периода анализа. Аргумент может быть числовым значением, DateTime или timestamp, или строкой, `week` / `month` / `year`которая имеет значение. Все периоды будут соответствующими функциями startofyear [startofweek](startofweekfunction.md)/[StartOfMonth](startofmonthfunction.md)/[startofyear](startofyearfunction.md) .
* *Dim1*, *dim2*,...: (необязательно) список столбцов измерений, которые срезируют вычисление метрик действия.

**Возвращает**

Возвращает таблицу с различными значениями числа различных идентификаторов, которые присутствовали в Активепериодкаунтс в следующих периодах: период лукбакк, каждый период временной шкалы и каждое существующее сочетание измерений.

Схема выходной таблицы:

|*тимелинеколумн*|Dim1|..|dim_n|dcount_values|
|---|---|---|---|---|
|Тип: от *тимелинеколумн*|..|..|..|long|


**Примеры**

Вычислите еженедельное число уникальных пользователей, которые появлялись по крайней мере в трех разных днях, в течение более чем восьми дней. Период анализа: Июль 2018.

```kusto
let Start = datetime(2018-07-01);
let End = datetime(2018-07-31);
let LookbackWindow = 8d;
let Period = 1d;
let ActivePeriods = 3;
let Bin = 7d; 
let T =  datatable(User:string, Timestamp:datetime)
[
    "B",      datetime(2018-06-29),
    "B",      datetime(2018-06-30),
    "A",      datetime(2018-07-02),
    "B",      datetime(2018-07-04),
    "B",      datetime(2018-07-08),
    "A",      datetime(2018-07-10),
    "A",      datetime(2018-07-14),
    "A",      datetime(2018-07-17),
    "A",      datetime(2018-07-20),
    "B",      datetime(2018-07-24)
]; 
T | evaluate active_users_count(User, Timestamp, Start, End, LookbackWindow, Period, ActivePeriods, Bin)



```

|Отметка времени|`dcount`|
|---|---|
|2018-07-01 00:00:00.0000000|1|
|2018-07-15 00:00:00.0000000|1|

Пользователь считается активным, если он удовлетворяет одному из следующих критериев: 
* Пользователь встречался не менее трех различных дней (Period = 1d, Активепериодс = 3).
* Пользователь встречался в лукбакк окне 8D до и включая их текущий внешний вид.

На рисунке ниже показаны только следующие экземпляры, активные по этому критерию: пользователь A на 7/20 и пользователь б на 7/4 (см. Результаты подключаемого модуля выше). Внешний вид пользователя B включается для окна лукбакк на 7/4, но не для диапазона времени начала, равного 6/29-30. 

:::image type="content" source="images/queries/active-users-count.png" alt-text="Пример числа активных пользователей":::
