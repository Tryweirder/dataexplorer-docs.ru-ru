---
title: active_users_count плагин - Azure Data Explorer (ru) Документы Майкрософт
description: В этой статье описывается active_users_count плагин в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: f324507d1a4528c5efefc14f7820437383211ca6
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81519352"
---
# <a name="active_users_count-plugin"></a>active_users_count плагин

Высчитывает различные подсчеты значений, где каждое значение появилось, по крайней мере, в минимальном количестве периодов в период обратного отсчета.

Полезно для расчета различных подсчетов "фанатов" только, не включая выступления "не-фанатов". Пользователь считается "вентилятором" только в том случае, если он был активен в период возврата. Период возврата времени используется только для определения `active` того, считается ли пользователь ("вентилятор") или нет. Сама агрегация не включает пользователей из окна возврата (в отличие от «sliding_window_counts» (sliding-window-counts-plugin.md), в котором агрегация находится над раздвижным окном периода возврата).

```kusto
T | evaluate active_users_count(id, datetime_column, startofday(ago(30d)), startofday(now()), 7d, 1d, 2, 7d, dim1, dim2, dim3)
```

**Синтаксис**

*T* `| evaluate` *dim1* `,` *dim2* `,` `,` *Bin* `,` *End* `,` `,` *Period* `,` *IdColumn* `,` `,` *Start* `,` *LookbackWindow* *ActivePeriodsCount* *TimelineColumn* IdColumn TimelineКолонка Начало Конец LookbackWindow Период ActivePeriodsCount Bin `active_users_count(``)`

**Аргументы**

* *T*: Входное табеляцивское выражение.
* *IdColumn*: Название столбца с значениями идентификатора, которые представляют активность пользователя. 
* *TimelineColumn*: Название столбца, представляющего временную шкалу.
* *Начало*: (необязательно) Scalar со значением периода начала анализа.
* *Конец*: (необязательно) Scalar со значением конечного периода анализа.
* *LookbackWindow*: Скользящее временное окно, определяющее период, в котором проверяется внешний вид пользователя. Период возврата начинается с (текущий внешний вид) - «окно возврата») и заканчивается на (текущий внешний вид). 
* *Период*: Постоянный промежуток времени Scalar, чтобы считаться одним внешним видом (пользователь будет считаться активным, если он появляется по крайней мере в различных ActivePeriodsCount этого времени.
* *ActivePeriodsCount*: Минимальное количество различных активных периодов, чтобы решить, является ли пользователь активным. Активными пользователями являются те, кто появился в по крайней мере (равные или больше, чем) активных периодов рассчитывать.
* *Бин*: Scalar постоянное значение периода шага анализа. Может быть либо числовая / дата / timestamp значение, `week` / `month` / `year`или строка, которая является одним из , и в этом случае все периоды будут [startofweek](startofweekfunction.md)/[startofmonth](startofmonthfunction.md)/[startofyear](startofyearfunction.md) соответственно.
* *dim1*, *dim2*, ...: (необязательный) список столбцов измерений, которые нарезает расчет метрик активности.

**Возвращает**

Возвращает таблицу с определенными значениями количества для идентификаторов, появившихся в течение ActivePeriodCounts в период обратного отсчета, для каждого периода временной шкалы и для каждой существующей комбинации измерений.

Схема таблицы вывода:

|*ХронологияКоля*|dim1|..|dim_n|dcount_values|
|---|---|---|---|---|
|тип: по состоянию на *ХроникаColumn*|..|..|..|long|


**Примеры**

Рассчитайте еженедельное количество различных пользователей, которые появились, по крайней мере, в 3 различных днях в течение предыдущих 8 дней. Период анализа: июль 2018 года.

```kusto
let Start = datetime(2018-07-01);
let End = datetime(2018-07-31);
let LookbackWindow = 8d;
let Period = 1d;
let ActivePeriods = 3;
let Bin = 7d; 
let T =  datatable(User:string, Timestamp:datetime)
[
    "B",      datetime(2018-06-29),
    "B",      datetime(2018-06-30),
    "A",      datetime(2018-07-02),
    "B",      datetime(2018-07-04),
    "B",      datetime(2018-07-08),
    "A",      datetime(2018-07-10),
    "A",      datetime(2018-07-14),
    "A",      datetime(2018-07-17),
    "A",      datetime(2018-07-20),
    "B",      datetime(2018-07-24)
]; 
T | evaluate active_users_count(User, Timestamp, Start, End, LookbackWindow, Period, ActivePeriods, Bin)



```

|Отметка времени|dcount|
|---|---|
|2018-07-01 00:00:00.0000000|1|
|2018-07-15 00:00:00.0000000|1|

Пользователь считается активным, если он был замечен, по крайней мере, в 3 различных днях (Период No 1d, ActivePeriods -3) в окне отошлиного листа 8d до текущего внешнего вида (включая текущий внешний вид). На рисунке ниже, только выступления, которые активны в соответствии с этим критерием, являются пользователь на 7/20 и пользователь B на 7/4 (см. результаты плагина выше). Обратите внимание, что, хотя появление пользователя B на 6/29-30 не входит в диапазон времени Start-End, они включены для окна поиска пользователя B на 7/4. 

![альт текст](images/queries/active-users-count.png "активных пользователей-кол")