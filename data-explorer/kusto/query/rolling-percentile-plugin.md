---
title: подключаемый модуль rolling_percentile — Azure обозреватель данных
description: В этой статье описывается подключаемый модуль rolling_percentile в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: a41a45fb12fafe62fffd6c13e5ea9ecff55bb355
ms.sourcegitcommit: bb8c61dea193fbbf9ffe37dd200fa36e428aff8c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/13/2020
ms.locfileid: "83373013"
---
# <a name="rolling_percentile-plugin"></a>подключаемый модуль rolling_percentile

Возвращает оценку для указанного процентиля заполнения *ValueColumn* в интервале (скользящее) *Бинспервиндов* для каждого *бинсизе*.

```kusto
T | evaluate rolling_percentile(ValueColumn, Percentile, IndexColumn, BinSize, BinsPerWindow)
```

**Синтаксис**

*T* `| evaluate` `rolling_percentile(` *ValueColumn* `,` *процентиль* `,` *индексколумн* `,` *бинсизе* `,` *бинспервиндов* [ `,` *Dim1* `,` *dim2* `,` ...]`)`

**Аргументы**

* *T*: Входное табличное выражение.
* *ValueColumn*: имя столбца со значениями для вычисления процентиля. 
* *Процентиль*: скалярная величина, для которой вычисляется процентиль.
* *Индексколумн*: имя столбца, для которого необходимо выполнить пошаговое окно.
* *Бинсизе*: скалярный и размер ячеек, применяемых к *индексколумн*.
* *Бинспервиндов*: скалярное число ячеек, включаемых в каждое окно.
* *Dim1*, *dim2*,... (необязательно) список столбцов измерений для среза.

**Возвращает**

Возвращает таблицу со строкой для каждой ячейки (и комбинацию измерений, если она задана), которая содержит скользящий процентиль значений в окне, завершающемся в ячейке (включительно). значения числа различных объектов, разные счетчики новых значений, агрегированные различные числа для каждого временного интервала.

Схема выходной таблицы:


|индексколумн|Dim1|...|dim_n|rolling_BinsPerWindow_percentile_ValueColumn_Pct
|---|---|---|---|---|


**Примеры**

### <a name="rolling-3-day-median-value-per-day"></a>Скользящее медиа-значение за 3 дня в день 

Следующий запрос вычисляет значение медианы за 3 дня в ежедневной детализации. Каждая строка выходных данных представляет медианное значение для последних 3 ячеек (дней), включая саму ячейку.

<!-- csl: https://help.kusto.windows.net:443/Samples -->
```kusto
let T = 
range idx from 0 to 24*10-1 step 1
| project Timestamp = datetime(2018-01-01) + 1h*idx, val=idx+1
| extend EvenOrOdd = iff(val % 2 == 0, "Even", "Odd");
 T  
 | evaluate rolling_percentile(val, 50, Timestamp, 1d, 3)
```

|Отметка времени|rolling_3_percentile_val_50|
|---|---|
|2018-01-01 00:00:00.0000000|   12|
|2018-01-02 00:00:00.0000000|   24|
|2018-01-03 00:00:00.0000000|   36|
|2018-01-04 00:00:00.0000000|   60|
|2018-01-05 00:00:00.0000000|   84|
|2018-01-06 00:00:00.0000000|   108|
|2018-01-07 00:00:00.0000000|   132|
|2018-01-08 00:00:00.0000000|   156|
|2018-01-09 00:00:00.0000000|   180|
|2018-01-10 00:00:00.0000000|   204|

### <a name="rolling-3-day-median-value-per-day-by-dimension"></a>Скользящее значение медианы за день по измерению 3 дня

Тот же пример, приведенный выше, но теперь также вычисляет пошаговое окно, секционированное для каждого значения измерения.

<!-- csl: https://help.kusto.windows.net:443/Samples -->
```kusto
let T = 
range idx from 0 to 24*10-1 step 1
| project Timestamp = datetime(2018-01-01) + 1h*idx, val=idx+1
| extend EvenOrOdd = iff(val % 2 == 0, "Even", "Odd");
 T  
 | evaluate rolling_percentile(val, 50, Timestamp, 1d, 3, EvenOrOdd)
```

|Отметка времени| евенородд|  rolling_3_percentile_val_50|
|---|---|---|
|2018-01-01 00:00:00.0000000|   Разного|   12|
|2018-01-02 00:00:00.0000000|   Разного|   24|
|2018-01-03 00:00:00.0000000|   Разного|   36|
|2018-01-04 00:00:00.0000000|   Разного|   60|
|2018-01-05 00:00:00.0000000|   Разного|   84|
|2018-01-06 00:00:00.0000000|   Разного|   108|
|2018-01-07 00:00:00.0000000|   Разного|   132|
|2018-01-08 00:00:00.0000000|   Разного|   156|
|2018-01-09 00:00:00.0000000|   Разного|   180|
|2018-01-10 00:00:00.0000000|   Разного|   204|
|2018-01-01 00:00:00.0000000|   Четно|    11|
|2018-01-02 00:00:00.0000000|   Четно|    23|
|2018-01-03 00:00:00.0000000|   Четно|    35|
|2018-01-04 00:00:00.0000000|   Четно|    59|
|2018-01-05 00:00:00.0000000|   Четно|    83|
|2018-01-06 00:00:00.0000000|   Четно|    107|
|2018-01-07 00:00:00.0000000|   Четно|    131|
|2018-01-08 00:00:00.0000000|   Четно|    155|
|2018-01-09 00:00:00.0000000|   Четно|    179|
|2018-01-10 00:00:00.0000000|   Четно|    203|
