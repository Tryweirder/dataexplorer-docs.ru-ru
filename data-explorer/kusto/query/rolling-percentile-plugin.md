---
title: rolling_percentile плагин - Azure Data Explorer (ru) Документы Майкрософт
description: В этой статье описывается rolling_percentile плагин в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: 02def4069c83eeec080ca059493132619fce30d5
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81510274"
---
# <a name="rolling_percentile-plugin"></a>rolling_percentile плагин

Возвращает оценку для указанного процентиля населения *ValueColumn* в подвижном (скользящем) окне размера *BinsPerWindow* на *BinSize.*

```kusto
T | evaluate rolling_percentile(ValueColumn, Percentile, IndexColumn, BinSize, BinsPerWindow)
```

**Синтаксис**

*T* `| evaluate` `,` `,` `,` `,` `,` `,` *ValueColumn* `,` *Percentile* *dim1* *dim2* *IndexColumn* *BinSize* *BinsPerWindow* ValueColumn Процентиль ИндексКолонка BinSize BinsPerWindow - dim1 dim2 ..." `rolling_percentile(``)`

**Аргументы**

* *T*: Входное табеляцивское выражение.
* *ValueColumn*: Название столбца со значениями для расчета процентиля. 
* *Процентиль*: Scalar с процентиля для расчета.
* *IndexColumn*: Название столбца для запуска переходящего окна.
* *BinSize*: Scalar с размером бункеров для применения над *IndexColumn.*
* *BinsPerWindow*: Scalar с числом ячеек, включенных в каждое окно.
* *dim1*, *dim2*, ... : (необязательно) список размеров столбцов нарезать.

**Возвращает**

Возвращает таблицу с строкой на каждую ячейку (и комбинацию измерений, если указано), которая имеет подвижного процентиля значений в окне, заканчивающейся в ячейке (включительно). различные значения подсчета, различные подсчеты новых значений, агрегированные различные подсчеты для каждого временного окна.

Схема таблицы вывода:


|ИндексКолобейт|dim1|...|dim_n|rolling_BinsPerWindow_percentile_ValueColumn_Pct
|---|---|---|---|---|


**Примеры**

### <a name="rolling-3-day-median-value-per-day"></a>Роллинг 3-дневное медианное значение в день 

Следующий запрос вычисляет 3-дневное медианное значение в ежедневной детализации. Каждая строка в выходе представляет среднее значение за последние 3 ячейки (дней), включая сам узло.

```kusto
let T = 
range idx from 0 to 24*10-1 step 1
| project Timestamp = datetime(2018-01-01) + 1h*idx, val=idx+1
| extend EvenOrOdd = iff(val % 2 == 0, "Even", "Odd");
 T  
 | evaluate rolling_percentile(val, 50, Timestamp, 1d, 3)
```

|Отметка времени|rolling_3_percentile_val_50|
|---|---|
|2018-01-01 00:00:00.0000000|   12|
|2018-01-02 00:00:00.0000000|   24|
|2018-01-03 00:00:00.0000000|   36|
|2018-01-04 00:00:00.0000000|   60|
|2018-01-05 00:00:00.0000000|   84|
|2018-01-06 00:00:00.0000000|   108|
|2018-01-07 00:00:00.0000000|   132|
|2018-01-08 00:00:00.0000000|   156|
|2018-01-09 00:00:00.0000000|   180|
|2018-01-10 00:00:00.0000000|   204|

### <a name="rolling-3-day-median-value-per-day-by-dimension"></a>Роллинг 3-дневное медианное значение в день по размеру

Тот же пример сверху, но теперь также вычисляет подвижного окна разделены для каждого значения измерения.

```kusto
let T = 
range idx from 0 to 24*10-1 step 1
| project Timestamp = datetime(2018-01-01) + 1h*idx, val=idx+1
| extend EvenOrOdd = iff(val % 2 == 0, "Even", "Odd");
 T  
 | evaluate rolling_percentile(val, 50, Timestamp, 1d, 3, EvenOrOdd)
```

|Отметка времени| Эвенородд|  rolling_3_percentile_val_50|
|---|---|---|
|2018-01-01 00:00:00.0000000|   Даже|   12|
|2018-01-02 00:00:00.0000000|   Даже|   24|
|2018-01-03 00:00:00.0000000|   Даже|   36|
|2018-01-04 00:00:00.0000000|   Даже|   60|
|2018-01-05 00:00:00.0000000|   Даже|   84|
|2018-01-06 00:00:00.0000000|   Даже|   108|
|2018-01-07 00:00:00.0000000|   Даже|   132|
|2018-01-08 00:00:00.0000000|   Даже|   156|
|2018-01-09 00:00:00.0000000|   Даже|   180|
|2018-01-10 00:00:00.0000000|   Даже|   204|
|2018-01-01 00:00:00.0000000|   Странно|    11|
|2018-01-02 00:00:00.0000000|   Странно|    23|
|2018-01-03 00:00:00.0000000|   Странно|    35|
|2018-01-04 00:00:00.0000000|   Странно|    59|
|2018-01-05 00:00:00.0000000|   Странно|    83|
|2018-01-06 00:00:00.0000000|   Странно|    107|
|2018-01-07 00:00:00.0000000|   Странно|    131|
|2018-01-08 00:00:00.0000000|   Странно|    155|
|2018-01-09 00:00:00.0000000|   Странно|    179|
|2018-01-10 00:00:00.0000000|   Странно|    203|