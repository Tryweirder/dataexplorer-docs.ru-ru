---
title: подключаемый модуль funnel_sequence_completion — Azure обозреватель данных
description: В этой статье описывается подключаемый модуль funnel_sequence_completion в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/16/2020
ms.openlocfilehash: 3511d15ebf0f5e3708deeeed981a8a6808da2e48
ms.sourcegitcommit: 09da3f26b4235368297b8b9b604d4282228a443c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/28/2020
ms.locfileid: "87347941"
---
# <a name="funnel_sequence_completion-plugin"></a>Подключаемый модуль funnel_sequence_completion

Вычисляет воронку завершенных шагов последовательности в сравнении различных периодов времени.

```kusto
T | evaluate funnel_sequence_completion(id, datetime_column, startofday(ago(30d)), startofday(now()), 1d, state_column, dynamic(['S1', 'S2', 'S3']), dynamic([10m, 30min, 1h]))
```

## <a name="syntax"></a>Синтаксис

*T* `| evaluate` `funnel_sequence_completion(` *идколумн* `,` *тимелинеколумн* `,` *Начало* `,` *конечного* `,` *шага* `,` *статеколумн* `,` *Sequence* `,` *макссекуенцестепвиндовс*`)`

## <a name="arguments"></a>Аргументы

* *T*: Входное табличное выражение.
* *Идколум*: ссылка на столбец должна присутствовать в исходном выражении.
* *Тимелинеколумн*: ссылка на столбец, представляющая временную шкалу, должна присутствовать в исходном выражении.
* *Start*: скалярное константное значение начального периода анализа.
* *End*: скалярное значение периода окончания анализа.
* *Шаг*: скалярное постоянное значение периода шага анализа (bin).
* *Статеколумн*: ссылка на столбец, представляющая состояние, должна присутствовать в исходном выражении.
* *Sequence*: константный динамический массив со значениями последовательности (значения ищутся в `StateColumn` ).
* *Макссекуенцестепвиндовс*: скалярная константа динамического массива со значениями максимального допустимого интервала времени между первым и последним последовательным этапами последовательности. Каждое окно (точка) в массиве формирует результат анализа воронки.

## <a name="returns"></a>Результаты

Возвращает одну таблицу, полезную для создания схемы воронки для проанализированной последовательности:

* `TimelineColumn`: проанализированное временное окно
* `StateColumn`: состояние последовательности.
* `Period`: максимальный период (окно), допустимый для выполнения шагов в последовательности воронки, измеряемой на первом шаге последовательности. Каждое значение в *макссекуенцестепвиндовс* создает воронку анализа с отдельным периодом. 
* `dcount`: число различных объектов `IdColumn` в окне времени, переданных из состояния первой последовательности в значение `StateColumn` .

## <a name="examples"></a>Примеры

### <a name="exploring-storm-events"></a>Просмотр событий с более подробной информацией 

Следующий запрос проверяет воронку завершения последовательности: `Hail`  ->  `Tornado`  ->  `Thunderstorm Wind` в общем времени 1hour, 4Hours, 1day. 

<!-- csl: https://help.kusto.windows.net:443/Samples -->
```kusto
let _start = datetime(2007-01-01);
let _end =  datetime(2008-01-01);
let _windowSize = 365d;
let _sequence = dynamic(['Hail', 'Tornado', 'Thunderstorm Wind']);
let _periods = dynamic([1h, 4h, 1d]);
StormEvents
| evaluate funnel_sequence_completion(EpisodeId, StartTime, _start, _end, _windowSize, EventType, _sequence, _periods) 
```

|`StartTime`|`EventType`|`Period`|`dcount`|
|---|---|---|---|
|2007-01-01 00:00:00.0000000|Град|01:00:00|2877|
|2007-01-01 00:00:00.0000000|Торнадо|01:00:00|208|
|2007-01-01 00:00:00.0000000|Шквалистый ветер|01:00:00|87|
|2007-01-01 00:00:00.0000000|Град|04:00:00|2877|
|2007-01-01 00:00:00.0000000|Торнадо|04:00:00|231|
|2007-01-01 00:00:00.0000000|Шквалистый ветер|04:00:00|141|
|2007-01-01 00:00:00.0000000|Град|1,00:00:00|2877|
|2007-01-01 00:00:00.0000000|Торнадо|1,00:00:00|244|
|2007-01-01 00:00:00.0000000|Шквалистый ветер|1,00:00:00|155|

Основные сведения о результатах:  
Результат — три воронки (для периодов: один час, 4 часа и один день). Для каждого этапа воронки отображаются несколько различных счетчиков. Можно увидеть, что для завершения всей последовательности будет `Hail`  ->  `Tornado`  ->  `Thunderstorm Wind` `dcount` получено большее значение. Иными словами, количество вхождений последовательности приближается к шагу воронки.
