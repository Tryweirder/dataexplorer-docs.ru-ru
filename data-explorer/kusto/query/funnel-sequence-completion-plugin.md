---
title: funnel_sequence_completion плагин - Azure Data Explorer (ru) Документы Майкрософт
description: В этой статье описывается funnel_sequence_completion плагин в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/16/2020
ms.openlocfilehash: 7f168841db2df47e4e3a192b75585a1fe4d83718
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81514779"
---
# <a name="funnel_sequence_completion-plugin"></a>Подключаемый модуль funnel_sequence_completion

Вычисляет воронку завершенных шагов последовательности в пределах сравнения различных периодов времени.

```kusto
T | evaluate funnel_sequence_completion(id, datetime_column, startofday(ago(30d)), startofday(now()), 1d, state_column, dynamic(['S1', 'S2', 'S3']), dynamic([10m, 30min, 1h]))
```

**Синтаксис**

*T* `| evaluate` `,` *Start* `,` *End* `,` *Step* `,` *StateColumn* `,` *Sequence* `,` *MaxSequenceStepWindows* *IdColumn* `,` *TimelineColumn* IdColumn ХронологияКолонка Начало Конец шага StateColumn Последовательность MaxПоследовательноStepWindows `funnel_sequence_completion(``)`

**Аргументы**

* *T*: Входное табеляцивское выражение.
* *IdColum*: ссылка столбца, должна присутствовать в выражении источника
* *TimelineColumn*: ссылка столбца, представляющая временную шкалу, должна присутствовать в выражении источника
* *Начало*: скалирование постоянного значения периода начала анализа
* *Конец*: скалирование постоянного значения конечного периода анализа
* *Шаг*: скалирование постоянное значение периода шага анализа (бин) 
* *StateColumn*: ссылка столбца, представляющая состояние, должна присутствовать в выражении источника
* *Последовательность*: постоянный динамический массив со значениями `StateColumn`последовательности (значения просматриваются в)
* *MaxSequenceStepWindows*: масштабировать постоянный динамический массив со значениями максимально допустимого промежуток времени между первым и последним последовательным этапом в последовательности, каждое окно (период) в массиве генерирует результат анализа воронки

**Возвращает**

Возвращает одну таблицу, полезную для построения диаграммы воронки для анализируемой последовательности:

* ХронологияКолонка: анализировалось временное окно
* `StateColumn`: состояние последовательности.
* Период: максимальный период (окно), разрешенный для завершения шагов в последовательности воронки, измеренной с первого шага в последовательности. Каждое значение в *MaxSequenceStepWindows* генерирует анализ воронки с отдельным периодом. 
* подсчет: четкое `IdColumn` количество в окне времени, которое перешло от состояния первой последовательности к значению `StateColumn`.

**Примеры**

### <a name="exploring-storm-events"></a>Изучение штормовых событий 

Следующий запрос проверяет воронку завершения последовательности: `Hail`  ->  `Tornado`  ->  `Thunderstorm Wind` в "общее" время 1 час, 4 часа, 1 день. 

```kusto
let _start = datetime(2007-01-01);
let _end =  datetime(2008-01-01);
let _windowSize = 365d;
let _sequence = dynamic(['Hail', 'Tornado', 'Thunderstorm Wind']);
let _periods = dynamic([1h, 4h, 1d]);
StormEvents
| evaluate funnel_sequence_completion(EpisodeId, StartTime, _start, _end, _windowSize, EventType, _sequence, _periods) 
```

|StartTime|EventType|Период|dcount|
|---|---|---|---|
|2007-01-01 00:00:00.0000000|Град|01:00:00|2877|
|2007-01-01 00:00:00.0000000|Торнадо|01:00:00|208|
|2007-01-01 00:00:00.0000000|Шквалистый ветер|01:00:00|87|
|2007-01-01 00:00:00.0000000|Град|04:00:00|2877|
|2007-01-01 00:00:00.0000000|Торнадо|04:00:00|231|
|2007-01-01 00:00:00.0000000|Шквалистый ветер|04:00:00|141|
|2007-01-01 00:00:00.0000000|Град|1.00:00:00|2877|
|2007-01-01 00:00:00.0000000|Торнадо|1.00:00:00|244|
|2007-01-01 00:00:00.0000000|Шквалистый ветер|1.00:00:00|155|

Понимание результатов:  
Результат это 3 воронки (для периодов: 1 час, 4 часа и 1 день), в то время как для каждого шага воронки количество различных кол-во EpisodeId показано. Вы можете видеть, что чем больше времени `Hail`  ->  `Tornado`  ->  `Thunderstorm Wind` дается `dcount` на завершение всей последовательности более высокого значения (т.е. больше возникновений последовательности, достигающей ступени воронки).
