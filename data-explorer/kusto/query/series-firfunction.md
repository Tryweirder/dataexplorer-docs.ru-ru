---
title: series_fir () - Исследователь данных Azure (англ.) Документы Майкрософт
description: В этой статье описаны series_fir() в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/19/2019
ms.openlocfilehash: bbdf93504be431d77c19a881cf79d1e1d3d400ac
ms.sourcegitcommit: 436cd515ea0d83d46e3ac6328670ee78b64ccb05
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81663576"
---
# <a name="series_fir"></a>series_fir()

Применяет фильтр Finite Impulse Response в серии.  

Принимает выражение, содержащее динамический числовой массив, в качестве ввода и применяет фильтр [Finite Impulse Response.](https://en.wikipedia.org/wiki/Finite_impulse_response) Путем уточнения `filter` коэффициентов, он может быть использован для расчета скользящей средней, сглаживания, обнаружения изменений и многих других случаев использования. Функция принимает входной столбец, содержащий динамический массив, и статический массив коэффициентов фильтра и применяет фильтр к столбцу. Она выводит новый столбец динамического массива, содержащий отфильтрованные результаты.  

**Синтаксис**

`series_fir(`*х* `,` *фильтраю* (`,` *нормализуется*,`,` *центр*`)`

**Аргументы**

* *x*: Динамическая ячейка массива, представляющая собой массив числовых значений, как правило, полученная выходная часть [изсерий или](make-seriesoperator.md) [make_list](makelist-aggfunction.md) операторов.
* *фильтр*: Постоянное выражение, содержащее коэффициенты фильтра (хранится как динамический массив числовых значений).
* *нормализовать*: Факультативное значение Boolean, указывающее, следует ли нормализовать фильтр (т.е. разделить сявт-е на сумму коэффициентов). Если *фильтр* содержит отрицательные значения, то `false` *нормализовать* должны быть указаны как, в противном случае результат будет `null`. Если не указано, то значение *нормализации* по умолчанию будет считаться в зависимости от наличия отрицательных значений в *фильтре:* если *фильтр* содержит по крайней мере одно отрицательное значение, то *нормализовать* `false`предполагается.  
Нормализация является удобным способом убедиться, что сумма коэффициентов составляет 1 и, таким образом, фильтр не усиливает и не смягчает серию. Например, скользящее среднее из 4 ячеек может быть определено *фильтром*(1,1,1,1,1,1) и *нормализовано*«истинно, что проще, чем печатать (0.25,0.25.0.0.25).
* *центр*: Дополнительное значение Boolean, указывающее, применяется ли фильтр симметрично на временном окне до и после текущей точки, или на временном окне из текущей точки назад. По умолчанию center имеет значение false, которое подходит для потоковой передачи данных, где фильтр можно применить только к текущим и более ранним точкам. Тем не менее для ad-hoc-обработки можно задать значение true, обеспечив синхронизацию с временными рядами (см. примеры ниже). Технически говоря, этот параметр контролирует [задержку группы](https://en.wikipedia.org/wiki/Group_delay_and_phase_delay)фильтра.

**Примеры**

* Расчет скользящей средней 5 баллов может быть выполнен путем установки *фильтра*(1,1,1,1,1,1) и *нормализовать* = `true` (по умолчанию). Обратите внимание на эффект *центра* = `false` `true`(по умолчанию) против:

```kusto
range t from bin(now(), 1h)-23h to bin(now(), 1h) step 1h
| summarize t=make_list(t)
| project id='TS', val=dynamic([0,0,0,0,0,0,0,0,0,10,20,40,100,40,20,10,0,0,0,0,0,0,0,0]), t
| extend 5h_MovingAvg=series_fir(val, dynamic([1,1,1,1,1])),
         5h_MovingAvg_centered=series_fir(val, dynamic([1,1,1,1,1]), true, true)
| render timechart
```

Этот запрос возвращает:  
*5h_MovingAvg*: 5 пунктов движущихся средний фильтр. Пик сглажен и его вершина смещена на (5 – 1)/2 = 2 ч.  
*5h_MovingAvg_centered*: то же самое, но с настройкой center'true, вызывает пик, чтобы остаться в своем первоначальном месте.

:::image type="content" source="images/samples/series-fir.png" alt-text="Серия пихты":::

* Расчет разницы между точкой и предшествующей может быть выполнена путем установки *фильтра*No1,-1:

```kusto
range t from bin(now(), 1h)-11h to bin(now(), 1h) step 1h
| summarize t=make_list(t)
| project id='TS',t,value=dynamic([0,0,0,0,2,2,2,2,3,3,3,3])
| extend diff=series_fir(value, dynamic([1,-1]), false, false)
| render timechart
```
:::image type="content" source="images/samples/series-fir2.png" alt-text="Серия пихта 2":::
