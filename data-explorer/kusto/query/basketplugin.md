---
title: подключаемый модуль корзины — Azure обозреватель данных
description: В этой статье описывается подключаемый модуль корзины в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 05/26/2019
ms.openlocfilehash: a43275aa6d2938631cad052cfbdd9a185db487b2
ms.sourcegitcommit: 8953d09101f4358355df60ab09e55e71bc255ead
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2020
ms.locfileid: "84420855"
---
# <a name="basket-plugin"></a>подключаемый модуль корзины

```kusto
T | evaluate basket()
```

Basket находит все распространенные шаблоны дискретных атрибутов (измерения) в данных и возвращает все распространенные шаблоны, которые превысили пороговое значение частоты в исходном запросе. В корзине гарантированно находятся все часто встречающиеся закономерности в данных, но не гарантируется степень полинома, а время выполнения запроса линейное по числу строк, но в некоторых случаях может быть экспоненциальное число столбцов (измерений). В основе Basket лежит алгоритм Apriori, который изначально предназначался для интеллектуального анализа данных путем анализа корзины.

**Синтаксис**

`T | evaluate basket(`*аргументы*`)`

**Возвращает**

Корзина возвращает все часто встречающиеся шаблоны, которые появляются выше порогового значения (по умолчанию: 0,05) строк. В результатах каждый шаблон соответствует строке.

Первый столбец — это идентификатор сегмента. Следующие два столбца — это количество и процент строк из исходного запроса, захваченных шаблоном. Остальные столбцы берутся из исходного запроса. Их значения соответствуют конкретным значениям в столбцах или подстановочным значениям (которыми по умолчанию являются значения NULL), представляющим значения переменных.

**Аргументы (необязательные)**

`T | evaluate basket(`[*Threshold*, *WeightColumn*, *максдименсионс*, *CustomWildcard*, *CustomWildcard*,...]`)`

Все аргументы необязательны, но они должны быть упорядочены, как показано выше. Чтобы указать, что следует использовать значение по умолчанию, добавьте знак тильды в строку "~" (см. примеры ниже).

Доступные аргументы:

* Пороговое значение — 0,015 < *double* < 1 [по умолчанию: 0,05]

    Задает минимальный коэффициент строк, определяющий распространенность шаблонов (шаблоны с меньшим коэффициентом не будут возвращаться).
    
    Например, `T | evaluate basket(0.02)`.

* WeightColumn — *column_name*

    Рассматривает каждую строку входных данных в соответствии с указанным весовым коэффициентом (по умолчанию весовой коэффициент каждой строки — 1). Аргумент должен быть именем числового столбца (например, int, long, real). Как правило, при использовании столбца с весовым коэффициентом следует учитывать выборку, группирование или агрегирование данных, внедренных в каждой строке.
    
    Например, `T | evaluate basket('~', sample_Count)`.

* Максдименсионс-1 < *int* [по умолчанию: 5]

    Задает максимальное количество некоррелированных измерений на корзину. По умолчанию они ограничены, чтобы обеспечить сокращение времени выполнения запроса.

    Например, `T | evaluate basket('~', '~', 3)`.

* CustomWildcard — *"any_value_per_type"*

    Задает подстановочный знак для определенного типа в таблице результатов, который укажет, что текущий шаблон не имеет ограничения по этому столбцу.
    По умолчанию имеет значение NULL, для строки по умолчанию указывается пустая строка. Если значение по умолчанию является допустимым значением в данных, следует использовать другое подстановочное значение (например, `*` ).
    См. следующий пример.

    Например, `T | evaluate basket('~', '~', '~', '*', int(-1), double(-1), long(0), datetime(1900-1-1))`.

**Пример**

<!-- csl: https://help.kusto.windows.net:443/Samples -->
```kusto
StormEvents 
| where monthofyear(StartTime) == 5
| extend Damage = iff(DamageCrops + DamageProperty > 0 , "YES" , "NO")
| project State, EventType, Damage, DamageCrops
| evaluate basket(0.2)
```

|Идентификатор сегмента|Count|Процент|Состояние|EventType|Ущерб|DamageCrops|
|---|---|---|---|---|---|---|---|---|
|0|4574|77,7|||NO|0
|1|2278|38,7||Град|NO|0
|2|5675|96,4||||0
|3|2371|40,3||Град||0
|4|1279|21,7||Шквалистый ветер||0
|5|2468|41,9||Град||
|6|1310|22,3|||YES|
|7|1291|21,9||Шквалистый ветер||

**Примеры с пользовательскими подстановочными знаками**

<!-- csl: https://help.kusto.windows.net:443/Samples -->
```kusto
StormEvents 
| where monthofyear(StartTime) == 5
| extend Damage = iff(DamageCrops + DamageProperty > 0 , "YES" , "NO")
| project State, EventType, Damage, DamageCrops
| evaluate basket(0.2, '~', '~', '*', int(-1))
```

|Идентификатор сегмента|Count|Процент|Состояние|EventType|Ущерб|DamageCrops|
|---|---|---|---|---|---|---|---|---|
|0|4574|77,7|\*|\*|NO|0
|1|2278|38,7|\*|Град|NO|0
|2|5675|96,4|\*|\*|\*|0
|3|2371|40,3|\*|Град|\*|0
|4|1279|21,7|\*|Шквалистый ветер|\*|0
|5|2468|41,9|\*|Град|\*|-1
|6|1310|22,3|\*|\*|YES|-1
|7|1291|21,9|\*|Шквалистый ветер|\*|-1
