---
title: подключаемый модуль корзины — Azure обозреватель данных
description: В этой статье описывается подключаемый модуль корзины в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: alexans
ms.service: data-explorer
ms.topic: reference
ms.date: 05/26/2019
ms.openlocfilehash: 9436254d72f364edc1f6a758ce2325e272367293
ms.sourcegitcommit: 608539af6ab511aa11d82c17b782641340fc8974
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2020
ms.locfileid: "92252673"
---
# <a name="basket-plugin"></a>Подключаемый модуль basket

```kusto
T | evaluate basket()
```

Корзина находит все часто встречающиеся закономерности дискретных атрибутов (измерений) в данных. Затем он возвращает часто встречающиеся шаблоны, которые прошли пороговое значение частоты в исходном запросе. В корзине гарантировано нахождение всех часто встречающихся шаблонов в данных, но не гарантируется степень полинома. Среда выполнения запроса является линейной в количестве строк, но она может быть экспоненциальной в количестве столбцов (измерений). В основе Basket лежит алгоритм Apriori, который изначально предназначался для интеллектуального анализа данных путем анализа корзины.

## <a name="syntax"></a>Синтаксис

`T | evaluate basket(`*аргументы*`)`

## <a name="returns"></a>Результаты

Корзина возвращает все часто встречающиеся закономерности, которые появляются выше порогового значения количества строк. Пороговое значение по умолчанию — 0,05. В результатах каждый шаблон соответствует строке.

Первый столбец — это идентификатор сегмента. Следующие два столбца — это *количество* и *процент строк*из исходного запроса, которые фиксируются в шаблоне. Остальные столбцы берутся из исходного запроса.
Их значением является либо конкретное значение из столбца, либо значение с подстановочным знаком, которое по умолчанию равно null, что означает значение переменной.

**Аргументы (необязательные)**

`T | evaluate basket(`[*Threshold*, *WeightColumn*, *максдименсионс*, *CustomWildcard*, *CustomWildcard*,...]`)`

Все аргументы необязательны, но они должны быть упорядочены, как показано выше. Чтобы указать, что должно использоваться значение по умолчанию, используйте строку со значением тильда-"~". Примеры см. ниже.

Доступные аргументы:

* Пороговое значение — 0,015 < *double* < 1 [по умолчанию: 0,05]

    Устанавливает минимальное соотношение строк для частого рассмотрения. Шаблоны с меньшим соотношением не будут возвращены.
    
    Например, `T | evaluate basket(0.02)`.

* WeightColumn — *column_name*

    Рассматривает каждую строку входных данных в соответствии с указанным весом. По умолчанию каждая строка имеет вес "1". Аргумент должен быть именем числового столбца, например int, Long, Real. Обычно столбец веса используется для учета выборки или сегментирования или агрегирования данных, которые уже внедрены в каждую строку.

    Например, `T | evaluate basket('~', sample_Count)`.

* Максдименсионс-1 < *int* [по умолчанию: 5]

    Устанавливает максимальное количество некоррелированных измерений на каждую корзину, ограниченное по умолчанию, чтобы максимально сокращать время выполнения запроса.

    Например, `T | evaluate basket('~', '~', 3)`.

* CustomWildcard — *"any_value_per_type"*

    Задает подстановочный знак для определенного типа в таблице результатов, который укажет, что текущий шаблон не имеет ограничения по этому столбцу.
    Значением по умолчанию является NULL. Значением по умолчанию для строки является пустая строка. Если значение по умолчанию является хорошим значением в данных, следует использовать другое значение с подстановочными знаками, например `*` .

    Пример:

     `T | evaluate basket('~', '~', '~', '*', int(-1), double(-1), long(0), datetime(1900-1-1))`

## <a name="example"></a>Пример

<!-- csl: https://help.kusto.windows.net:443/Samples -->
```kusto
StormEvents 
| where monthofyear(StartTime) == 5
| extend Damage = iff(DamageCrops + DamageProperty > 0 , "YES" , "NO")
| project State, EventType, Damage, DamageCrops
| evaluate basket(0.2)
```

|Идентификатор сегмента|Счетчик|Процент|Состояние|EventType|Ущерб|DamageCrops|
|---|---|---|---|---|---|---|---|---|
|0|4574|77,7|||NO|0
|1|2278|38,7||Град|NO|0
|2|5675|96,4||||0
|3|2371|40,3||Град||0
|4|1279|21,7||Шквалистый ветер||0
|5|2468|41,9||Град||
|6|1310|22,3|||YES|
|7|1291|21,9||Шквалистый ветер||

**Примеры с пользовательскими подстановочными знаками**

<!-- csl: https://help.kusto.windows.net:443/Samples -->
```kusto
StormEvents 
| where monthofyear(StartTime) == 5
| extend Damage = iff(DamageCrops + DamageProperty > 0 , "YES" , "NO")
| project State, EventType, Damage, DamageCrops
| evaluate basket(0.2, '~', '~', '*', int(-1))
```

|Идентификатор сегмента|Счетчик|Процент|Состояние|EventType|Ущерб|DamageCrops|
|---|---|---|---|---|---|---|---|---|
|0|4574|77,7|\*|\*|NO|0
|1|2278|38,7|\*|Град|NO|0
|2|5675|96,4|\*|\*|\*|0
|3|2371|40,3|\*|Град|\*|0
|4|1279|21,7|\*|Шквалистый ветер|\*|0
|5|2468|41,9|\*|Град|\*|-1
|6|1310|22,3|\*|\*|YES|-1
|7|1291|21,9|\*|Шквалистый ветер|\*|-1
