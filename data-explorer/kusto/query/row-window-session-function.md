---
title: row_window_session () - Исследователь данных Azure Документы Майкрософт
description: Эта статья описывает row_window_session () в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: 87e89443bc85125e705bc180ea0cdb9e599c9c13
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81510257"
---
# <a name="row_window_session"></a>row_window_session()

`row_window_session()`вычисляет значения начала сеанса столбца в [наборе серийных строк.](./windowsfunctions.md#serialized-row-set)

**Синтаксис**

`row_window_session``(` *Expr* `,` *MaxDistanceFirst* `,` *MaxDistanceBetweenСоседы* и`,` *перезагрузка*`)`

* *Expr* — это выражение, значения которого сгруппированы в сеансах.
  Значения null производят нулевые значения, и следующее значение начинает новую сессию.
  *Expr* должен быть масштабным выражением типа. `datetime`

* *MaxDistanceFirst* устанавливает один критерий для начала новой сессии: максимальное расстояние между текущим значением *Expr* и значением *Expr* в начале сеанса.
  Это масштабная константа `timespan`типа.

* *MaxDistanceBetweenNeighbors* устанавливает второй критерий для начала новой сессии: максимальное расстояние от одного значения *Expr* к следующему.
  Это масштабная константа `timespan`типа.

* *Перезагрузка* является дополнительным масштабированием `boolean`выражение типа. Если указано, каждое `true` значение, которое оценивается, немедленно перезапустит сеанс.

**Возвращает**

Функция возвращает значения в начале каждого сеанса.

**Примечания**

Функция имеет следующую концептуальную модель расчета:

1. Перейти на вхожей последовательности значений *Expr* в порядке.

2. Для каждого значения определите, устанавливает ли он новую сессию.

3. Если он устанавливает новую сессию, излучайте значение *Expr*. В противном случае, излучают предыдущее значение *Expr*.

Условие, определяющее, представляет ли значение новый сеанс, является логическим или следующим образом:

* Если не было значения предыдущей сессии, или предыдущее значение сеанса было нулевым.

* Если значение *Expr* равно или превышает предыдущее значение сеанса плюс *MaxDistanceFromFirst.*

* Если значение *Expr* равна или превышает предыдущее значение *Expr* плюс *MaxDistanceBetweenNeighbors.*

**Примеры**

В следующем примере показано, как вычислить значения начала `ID` сеанса для таблицы с `Timestamp` двумя столбцов, столбцом, который определяет последовательность, и столбцом, который дает время, в которое произошла каждая запись. В этом примере сеанс не может превышать 1 час, и он продолжается до тех пор, пока записи находятся с разделом менее 5 минут.

```kusto
datatable (ID:string, Timestamp:datetime) [
    // ...
]
| sort by ID asc, Timestamp asc
| extend SessionStarted = row_window_session(Timestamp, 1h, 5m, ID != prev(ID))
```