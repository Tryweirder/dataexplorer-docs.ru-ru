---
title: row_window_session () — обозреватель данных Azure
description: В этой статье описывается row_window_session () в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: alexans
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: f872004a8291adc95f594c6301075faa02c8ec6c
ms.sourcegitcommit: 608539af6ab511aa11d82c17b782641340fc8974
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2020
ms.locfileid: "92242875"
---
# <a name="row_window_session"></a>row_window_session()

`row_window_session()` Вычисляет начальные значения сеанса для столбца в [сериализованном наборе строк](./windowsfunctions.md#serialized-row-set).

## <a name="syntax"></a>Синтаксис

`row_window_session` `(` *`Expr`* `,` *`MaxDistanceFromFirst`* `,` *`MaxDistanceBetweenNeighbors`* [`,` *`Restart`*] `)`

* *`Expr`* выражение, значения которого группируются вместе в сеансах.
  Значения NULL создают значения NULL, а следующее значение запускает новый сеанс.
  *`Expr`* должно быть скалярным выражением типа `datetime` .

* *`MaxDistanceFromFirst`* устанавливает один критерий для запуска нового сеанса: максимальное расстояние между текущим значением *`Expr`* и значением *`Expr`* в начале сеанса.
  Это скалярная константа типа `timespan` .

* *`MaxDistanceBetweenNeighbors`* устанавливает второй критерий для запуска нового сеанса: максимальное расстояние от одного значения *`Expr`* до следующего.
  Это скалярная константа типа `timespan` .

* *Restart* — это Необязательное скалярное выражение типа `boolean` . Если указано, каждое значение, результатом которого является, `true` немедленно перезапускает сеанс.

## <a name="returns"></a>Результаты

Функция возвращает значения в начале каждого сеанса.

**Примечания**

Функция имеет следующую концептуальную модель вычислений:

1. Перейдем по входной последовательности значений *`Expr`* по порядку.

1. Для каждого значения определите, устанавливает ли он новый сеанс.

1. Если он устанавливает новый сеанс, выдается значение *`Expr`* . В противном случае выпустите предыдущее значение *`Expr`* .

Условие, определяющее, представляет ли значение новый сеанс, является логическим или одним из следующих условий:

* Если предыдущее значение сеанса отсутствует или предыдущее значение сеанса было равно null.

* Если значение *`Expr`* равно или превышает предыдущее значение сеанса плюс *`MaxDistanceFromFirst`* .

* Если значение *`Expr`* равно или превышает предыдущее значение *`Expr`* плюс *`MaxDistanceBetweenNeighbors`* .

## <a name="examples"></a>Примеры

В следующем примере показано, как вычислить начальные значения сеанса для таблицы с двумя столбцами: `ID` столбец, определяющий последовательность, и `Timestamp` столбец, который содержит время, в течение которого была выполнена каждая запись. В этом примере сеанс не может превышать 1 час, и он продолжится, пока записи менее 5 минут.

```kusto
datatable (ID:string, Timestamp:datetime) [
    // ...
]
| sort by ID asc, Timestamp asc
| extend SessionStarted = row_window_session(Timestamp, 1h, 5m, ID != prev(ID))
```