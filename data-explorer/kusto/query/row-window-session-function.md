---
title: row_window_session () — обозреватель данных Azure
description: В этой статье описывается row_window_session () в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: 51bc5e26cdc2d002b29ec435a68421ba8768a7a4
ms.sourcegitcommit: 9fe6ee7db15a5cc92150d3eac0ee175f538953d2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2020
ms.locfileid: "82907178"
---
# <a name="row_window_session"></a>row_window_session()

`row_window_session()`Вычисляет начальные значения сеанса для столбца в [сериализованном наборе строк](./windowsfunctions.md#serialized-row-set).

**Синтаксис**

`row_window_session` `(` *`Expr`* `,` *`MaxDistanceFromFirst`* `,` *`MaxDistanceBetweenNeighbors`* [`,` *`Restart`*] `)`

* *`Expr`* выражение, значения которого группируются вместе в сеансах.
  Значения NULL создают значения NULL, а следующее значение запускает новый сеанс.
  *`Expr`* должно быть скалярным выражением типа `datetime`.

* *`MaxDistanceFromFirst`* устанавливает один критерий для запуска нового сеанса: максимальное расстояние между текущим значением *`Expr`* и значением *`Expr`* в начале сеанса.
  Это скалярная константа типа `timespan`.

* *`MaxDistanceBetweenNeighbors`* устанавливает второй критерий для запуска нового сеанса: максимальное расстояние от одного значения *`Expr`* до следующего.
  Это скалярная константа типа `timespan`.

* *Restart* — это Необязательное скалярное выражение типа `boolean`. Если указано, каждое значение, результатом которого является `true` , немедленно перезапускает сеанс.

**Возвращает**

Функция возвращает значения в начале каждого сеанса.

**Примечания**

Функция имеет следующую концептуальную модель вычислений:

1. Перейдем по входной последовательности значений *`Expr`* по порядку.

1. Для каждого значения определите, устанавливает ли он новый сеанс.

1. Если он устанавливает новый сеанс, выдается значение *`Expr`*. В противном случае выпустите предыдущее значение *`Expr`*.

Условие, определяющее, представляет ли значение новый сеанс, является логическим или одним из следующих условий:

* Если предыдущее значение сеанса отсутствует или предыдущее значение сеанса было равно null.

* Если значение *`Expr`* равно или превышает предыдущее значение сеанса плюс *`MaxDistanceFromFirst`*.

* Если значение *`Expr`* равно или превышает предыдущее значение *`Expr`* плюс. *`MaxDistanceBetweenNeighbors`*

**Примеры**

В следующем примере показано, как вычислить начальные значения сеанса для таблицы с двумя столбцами `ID` : столбец, определяющий последовательность, и `Timestamp` столбец, который содержит время, в течение которого была выполнена каждая запись. В этом примере сеанс не может превышать 1 час, и он продолжится, пока записи менее 5 минут.

```kusto
datatable (ID:string, Timestamp:datetime) [
    // ...
]
| sort by ID asc, Timestamp asc
| extend SessionStarted = row_window_session(Timestamp, 1h, 5m, ID != prev(ID))
```