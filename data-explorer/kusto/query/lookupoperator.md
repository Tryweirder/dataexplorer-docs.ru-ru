---
title: Оператор Lookup — Azure обозреватель данных | Документация Майкрософт
description: В этой статье описывается оператор Lookup в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: alexans
ms.service: data-explorer
ms.topic: reference
ms.date: 03/12/2020
ms.openlocfilehash: 3305d78dd903160491ac3cdabd274ce8ace8ba2f
ms.sourcegitcommit: 608539af6ab511aa11d82c17b782641340fc8974
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2020
ms.locfileid: "92246428"
---
# <a name="lookup-operator"></a>Оператор lookup

`lookup`Оператор расширяет столбцы таблицы фактов со значениями, которые были просмотрены в таблице измерения.

```kusto
FactTable | lookup kind=leftouter (DimensionTable) on CommonColumn, $left.Col1 == $right.Col2
```

В этом случае результатом является таблица, которая расширяет `FactTable` ( `$left` ) данными () `DimensionTable` `$right` , выполняя поиск каждой пары ( `CommonColumn` , `Col` ) из прежней таблицы с каждой парой ( `CommonColumn1` , `Col2` ) в последней таблице. Различия между таблицами фактов и измерений см. в разделе [таблицы фактов и измерений](../concepts/fact-and-dimension-tables.md). 

`lookup`Оператор выполняет операцию, аналогичную [оператору join](joinoperator.md) , со следующими отличиями.

* В результате не повторяются столбцы из `$right` таблицы, которые являются основанием для операции JOIN.
* Поддерживаются только два вида поиска, `leftouter` а `inner` — `leftouter` по умолчанию.
* В плане производительности система по умолчанию предполагает, что `$left` таблица является таблицей большего размера (факты), а `$right` таблица — таблицей меньшего размера (измерения). Это в точности соответствует предположению, используемому `join` оператором.
* `lookup`Оператор автоматически передает `$right` таблицу в `$left` таблицу (по сути, как если бы `hint.broadcast` она была указана). Обратите внимание, что это ограничивает размер `$right` таблицы.

## <a name="syntax"></a>Синтаксис

*Лефттабле* `|` `lookup`[ `kind` `=` ( `leftouter` | `inner` )] `(` *RightTable* `)` `on` *Атрибуты* ригхттабле

## <a name="arguments"></a>Аргументы

* *Лефттабле*: таблица или табличное выражение, которое является основанием для уточняющего запроса.
  Отмечается как `$left` .

* *Ригхттабле*: таблица или табличное выражение, используемое для заполнения новых столбцов в таблице фактов. Отмечается как `$right` .

* *Атрибуты*: разделенный запятыми список из одного или нескольких правил, описывающих, как строки из *лефттабле* сопоставляются со строками из *ригхттабле*. С помощью логического оператора вычисляется несколько правил `and` .
  Правило может быть одним из следующих:

  |Тип правила        |Синтаксис                                          |Predicate                                                      |
  |-----------------|------------------------------------------------|---------------------------------------------------------------|
  |Равенство по имени |*ColumnName*                                    |`where`*Лефттабле*. *ColumnName* `==` *Ригхттабле*. *ColumnName*|
  |Равенство по значению|`$left.`*Лефтколумн* `==` `$right.` *Ригхтколумн*|`where``$left.` *LeftColumn* `==` Лефтколумн `$right.` * Ригхтколумн        |

  > [!Note] 
  > В случае "равенства по значению" имена столбцов *должны* уточняться применимой таблицей владельца, обозначенной `$left` `$right` нотацией и.

* `kind`: Необязательная инструкция по интерпретации строк в *лефттабле* , не имеющих соответствий в *ригхттабле*. По умолчанию `leftouter` используется, что означает, что все эти строки будут отображаться в выходных данных со значениями NULL, используемыми для отсутствующих значений столбцов *ригхттабле* , добавленных оператором. Если `inner` используется, такие строки опускаются из выходных данных. (Другие виды объединения не поддерживаются `looku` оператором p.)
  
## <a name="returns"></a>Результаты

Таблица со следующими элементами.

* Столбец для каждого столбца в каждой из двух таблиц, в том числе соответствующие ключи.
  Столбцы правой части будут автоматически переименованы при конфликтах имен.
* Строка для каждого соответствия во входных таблицах. Соответствие — это строки из обеих таблиц, у которых совпадают значения всех полей `on` . 
* Атрибуты (уточняющие ключи) будут отображаться в выходной таблице только один раз.

 * `kind` Unspecified `kind=leftouter`

     Кроме внутренних соответствий есть также строка для каждой строки в левой и (или) правой части, даже при отсутствии соответствия. В этом случае ячейки выходных данных без соответствий содержат значения NULL.

 * `kind=inner`

     Строка в выходных данных для каждой комбинации соответствующих строк из левой и правой частей.

## <a name="examples"></a>Примеры

```kusto
let FactTable=datatable(Row:string,Personal:string,Family:string) [
  "1", "Bill",   "Gates",
  "2", "Bill",   "Clinton",
  "3", "Bill",   "Clinton",
  "4", "Steve",  "Ballmer",
  "5", "Tim",    "Cook"
];
let DimTable=datatable(Personal:string,Family:string,Alias:string) [
  "Bill",  "Gates",   "billg",
  "Bill",  "Clinton", "billc",
  "Steve", "Ballmer", "steveb",
  "Tim",   "Cook",    "timc"
];
FactTable
| lookup kind=leftouter DimTable on Personal, Family
```

Строка     | Персональный  | Семейство   | Псевдоним
--------|-----------|----------|--------
1       | Билл      | Критериям    | биллг
2       | Билл      | Клинтон  | биллк
3       | Билл      | Клинтон  | биллк
4       | Вася     | Балмер  | стевеб
5       | TIM       | Кука     | тимк