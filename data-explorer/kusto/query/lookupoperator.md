---
title: оператор поиска - Azure Data Explorer (ru) Документы Майкрософт
description: В этой статье описывается оператор поиска в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 03/12/2020
ms.openlocfilehash: 1325a1b839b62baacade4cf7c64cd278aeeabaf5
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81513062"
---
# <a name="lookup-operator"></a>Оператор lookup

Оператор `lookup` расширяет столбцы таблицы фактов с значениями, просматриваемыми в таблице измерений.

```kusto
FactTable | lookup kind=leftouter (DimensionTable) on CommonColumn, $left.Col1 == $right.Col2
```

Здесь, результат таблица, которая `FactTable` расширяет`$left`( ) `DimensionTable` с данными из (ссылки на `$right``CommonColumn`)`Col`путем выполнения поиска каждой пары ( , ) из прежней таблицы с каждой парой ( ,`CommonColumn1``Col2`) в последней таблице. Для различий между таблицами [fact and dimension tables](../concepts/fact-and-dimension-tables.md)фактов и измерений см. 

Оператор `lookup` выполняет операцию, аналогичную [оператору соединения,](joinoperator.md) со следующими отличиями:

* Результат не повторяет столбцы `$right` из таблицы, которые являются основой для операции соединения.
* Поддерживается только два вида `leftouter` поиска, `inner` `leftouter` и, с по умолчанию.
* С точки зрения производительности система по `$left` умолчанию предполагает, что таблица `$right` — это большая (факты) таблица, а таблица — меньшая (размеры). Это прямо противоположно предположению, `join` используемому оператором.
* Оператор `lookup` автоматически транслирует `$right` таблицу `$left` к столу (по `hint.broadcast` сути, ведет себя так, как если бы было указано). Обратите внимание, что это `$right` ограничивает размер таблицы.

**Синтаксис**

*LeftTable* `|` `lookup` `kind` `=` (`leftouter`|`inner`) `(` `)` *Attributes* *RightTable* `on`

**Аргументы**

* *LeftTable*: Таблица или табулярное выражение, которое является основой для поиска.
  Обозначено `$left`как .

* *RightTable*: Таблица или таблоярное выражение, которое используется для "заполнения" новых столбцов в таблице фактов. Обозначено `$right`как .

* *Атрибуты*: Список запятой, ограниченный одним или несколькими правилами, описывающие, как строки из *LeftTable* сопоставляются со строками из *RightTable.* Несколько правил оцениваются с помощью логического `and` оператора.
  Правило может быть одним из:

  |Вид правила        |Синтаксис                                          |Predicate                                                      |
  |-----------------|------------------------------------------------|---------------------------------------------------------------|
  |Равенство по имени |*ColumnName*                                    |`where`*LeftTable*. *КолонкаНазаRight* `==` *RightTable*. *КолонкаИмя*|
  |Равенство по стоимости|`$left.`*Леваяколонна* `==` `$right.` *правая колонна*|`where``$left.` *Левая колонна* `==` `$right.`(правая колонна)        |

  > [!Note] 
  > В случае "равенства по стоимости" имена столбцов *должны* быть квалифицированы `$right` с соответствующей таблицей владельца, обозначаемой и обозначенной и обозначенными. `$left`

* `kind`: Дополнительная инструкция о том, как лечить строки в *LeftTable,* которые не имеют соответствия в *RightTable*. По умолчанию используется, `leftouter` что означает, что все эти строки будут отображаться в выходе с нулевыми значениями, используемыми для отсутствующих значений столбцов *RightTable,* добавленных оператором. При `inner` использовании такие строки отопускаются из вывода. (Другие виды соединения не `looku`поддерживаются оператором p.)
  
**Возвращает**

Таблица со следующими элементами.

* Столбец для каждого столбца в каждой из двух таблиц, в том числе соответствующие ключи.
  Столбцы правой стороны будут автоматически переименованы при возникновении конфликтов имен.
* Строка для каждого соответствия во входных таблицах. Соответствие — это строки из обеих таблиц, у которых совпадают значения всех полей `on` . 
* Атрибуты (ключи поиска) будут отображаться только один раз в таблице вывода.

 * `kind`Неопределенное`kind=leftouter`

     Кроме внутренних соответствий есть также строка для каждой строки в левой и (или) правой части, даже при отсутствии соответствия. В этом случае ячейки выходных данных без соответствий содержат значения NULL.

 * `kind=inner`

     Строка в выходных данных для каждой комбинации соответствующих строк из левой и правой частей.

**Примеры**

```kusto
let FactTable=datatable(Row:string,Personal:string,Family:string) [
  "1", "Bill",   "Gates",
  "2", "Bill",   "Clinton",
  "3", "Bill",   "Clinton",
  "4", "Steve",  "Ballmer",
  "5", "Tim",    "Cook"
];
let DimTable=datatable(Personal:string,Family:string,Alias:string) [
  "Bill",  "Gates",   "billg",
  "Bill",  "Clinton", "billc",
  "Steve", "Ballmer", "steveb",
  "Tim",   "Cook",    "timc"
];
FactTable
| lookup kind=leftouter DimTable on Personal, Family
```

Строка     | Personal  | Семейство   | Псевдоним
--------|-----------|----------|--------
1       | Билл      | Ворота    | Биллг
2       | Билл      | Клинтон  | биллк
3       | Билл      | Клинтон  | биллк
4       | Вася     | Баллмер  | Стивеб
5       | Тим       | Готовить     | timc