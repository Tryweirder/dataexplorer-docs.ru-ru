---
title: Рекомендации по запросам в Azure обозреватель данных
description: В этой статье описываются рекомендации по запросам в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/03/2020
ms.openlocfilehash: 301917f363176fb8e3bbf2fe4286a86b7a5674ea
ms.sourcegitcommit: 2126c5176df272d149896ac5ef7a7136f12dc3f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/13/2020
ms.locfileid: "86280515"
---
# <a name="query-best-practices"></a>Рекомендации по запросам

Ниже приведены некоторые рекомендации, которые необходимо выполнить, чтобы ускорить выполнение запроса.

|Действие  |Назначение  |Не использовать  |Примечания  |
|---------|---------|---------|---------|
| **Фильтры времени** | Сначала используйте фильтры времени. ||Kusto высоко оптимизирован для использования фильтров времени.| 
|**Строковые операторы**      | Использование `has` оператора     | Не использовать`contains`     | При поиске полных маркеров `has` работает лучше, так как он не ищет подстроки.   |
|**Операторы с учетом регистра**     |  Использование команды `==`       | Не использовать`=~`       |  При возможности используйте операторы с учетом регистра.       |
| | Использование команды `in` | Не использовать`in~`|
|  | Использование команды `contains_cs`         | Не использовать`contains`        | Если вы можете использовать `has` / `has_cs` и не использовать `contains` / `contains_cs` , это еще лучше. |
| **Поиск текста**    |    Поиск в определенном столбце     |    Не использовать`*`    |   `*`выполняет полнотекстовый поиск по всем столбцам.    |
| **Извлечение полей из [динамических объектов](./scalar-data-types/dynamic.md) в миллионах строк**    |  Собросайте свой столбец во время приема, если большинство запросов извлекают поля из динамических объектов в миллионах строк.      |         | Таким образом, вы платите только один раз для извлечения столбцов.    |
| **`let`Оператор со значением, которое используется более одного раза** | Использование [функции материализации ()](./materializefunction.md) |  |   Дополнительные сведения об использовании см. в `materialize()` разделе [материализация ()](materializefunction.md).|
| **Применение преобразований более чем к 1 000 000 000 записям**| Измените запрос, чтобы уменьшить объем данных, поступающих в преобразование.| Не преобразуйте большие объемы данных, если это можно избежать. | |
| **Новые запросы** | Используйте `limit [small number]` или `count` в конце. | |     Выполнение непривязанных запросов по неизвестным наборам данных может привести к возврату ГБ результатов клиенту, что приведет к снижению отклика и занятому кластеру.|
| **Сравнения без учета регистра** | Использование команды `Col =~ "lowercasestring"` | Не использовать`tolower(Col) == "lowercasestring"` |
| **Сравнение данных, которые уже находятся в нижнем регистре (или в верхнем регистре)** | `Col == "lowercasestring"` (или `Col == "UPPERCASESTRING"`) | Избегайте использования сравнений без учета регистра.||
| **Фильтрация по столбцам** |  Фильтрация по столбцу таблицы.|Не фильтруйте по вычисляемому столбцу. | |
| | Использование команды `T | where predicate(<expression>)` | Не использовать`T | extend _value = <expression> | where predicate(_value)` ||
| **Оператор summarize** |  Используйте [Указание. Стратегия = в случайном порядке](./shufflequery.md) , если `group by keys` оператор суммирования имеет большое количество элементов. | | Большая кратность идеально превышает 1 000 000.|
|**[Оператор join](./joinoperator.md)** | Выберите таблицу с меньшей строкой, которая будет первой (самая левая в запросе). ||
| Соединение между кластерами |На всех кластерах выполните запрос на стороне «right» объединения, где находятся большинство данных. ||
|Соединение, если левая часть имеет большой размер и правая часть слишком велика | Использование [подсказки. Стратегия = трансляция](./broadcastjoin.md) || Небольшое значение — до 100 000 записей. |
|Присоединение, если обе стороны слишком велики | [Указание USE. Стратегия = случайный](./shufflequery.md) || Используется, когда ключ объединения имеет большую кратность.|
|**Извлечение значений в столбце со строками, имеющими общий формат или шаблон**|  Использование [оператора Parse](./parseoperator.md) | Не используйте несколько `extract()` инструкций.  | Например, такие значения, как`"Time = <time>, ResourceId = <resourceId>, Duration = <duration>, ...."`
|**[Функция Extract ()](./extractfunction.md)**| Используйте, если синтаксически проанализированные строки не соответствуют одному и тому же формату или шаблону.| |Извлеките необходимые значения с помощью регулярного выражения.|
| **[Функция материализации ()](./materializefunction.md)** | Отправка всех возможных операторов, которые уменьшают набор материализованных данных и по-прежнему сохраняют семантику запроса. | |Например, фильтры или проектные обязательные столбцы.
