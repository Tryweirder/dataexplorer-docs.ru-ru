---
title: Соединение кросс-кластера - Исследователь данных Azure (ru) Документы Майкрософт
description: В этой статье описывается соединение кросс-кластера в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
zone_pivot_group_filename: data-explorer/zone-pivot-groups.json
zone_pivot_groups: kql-flavors
ms.openlocfilehash: 1199b148fa295ac17417bbf590a73bfc9400a710
ms.sourcegitcommit: 01eb9aaf1df2ebd5002eb7ea7367a9ef85dc4f5d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2020
ms.locfileid: "81765930"
---
# <a name="cross-cluster-join"></a>Кросс-кластерНое соединение

::: zone pivot="azuredataexplorer"

Для общего обсуждения межкластерных запросов см. [кросс-кластерные или кросс-базы данных](cross-cluster-or-database-queries.md)

Можно выполнить операцию соединения на наборах данных, переиточенных на различных кластерах. Например. 

```kusto
T | ... | join (cluster("SomeCluster").database("SomeDB").T2 | ...) on Col1 // (1)

cluster("SomeCluster").database("SomeDB").T | ... | join (cluster("SomeCluster2").database("SomeDB2").T2 | ...) on Col1 // (2)
```

В приведенных выше примерах операция соединения представляет собой кросс-кластерное соединение, исходя из того, что текущий кластер не является ни "SomeCluster", ни "SomeCluster2".

Обратите внимание, что в следующем примере

```kusto
cluster("SomeCluster").database("SomeDB").T | ... | join (cluster("SomeCluster").database("SomeDB2").T2 | ...) on Col1 
```

операция соединения не является кросс-кластерным соединением, поскольку обе ее операции происходят в одном кластере.

Когда Kusto сталкивается с кросс-кластером, он автоматически решает, где выполнять операцию соединения самостоятельно. Это решение может иметь один из трех возможных результатов:
* Выполните операцию соединения на кластере левой операнды, правый операнд будет впервые извлечен этим кластером. (присоединиться к примеру **(1)** будет выполнен на локальном кластере)
* Выполните операцию соединения на кластере правой операции, левая операндбудет будет сначала извлечена этим кластером. (присоединиться к примеру **(2)** будет выполнен на "SomeCluster2")
* Выполните операцию соединения локально (имеется в виду кластер, получивший запрос), оба операции будут сначала извлечены локальным кластером

Фактическое решение зависит от конкретного запроса, стратегия автоматического соединения remoting (упрощенная версия): "Если один из operands является локальным, соединение будет выполнено локально. Если оба оперы удаленного соединения будут выполнены на кластере правой оперы ".

Иногда производительность запроса может быть значительно улучшена, если не следовать стратегии автоматического ремотирования. Вообще говоря, лучше всего (с точки зрения производительности) выполнить операцию соединения на кластере наибольшего оперативного дела.

Если в примере **(1)** ```T | ...``` это набор данных, ```cluster("SomeCluster").database("SomeDB").T2 | ...``` созданный гораздо меньше, чем тот, который производится он более эффективен для выполнения операции соединения на "SomeCluster".

Это может быть достигнуто путем предоставления Kusto присоединиться remoting намек. Синтаксис:

```kusto
T | ... | join hint.remote=<strategy> (cluster("SomeCluster").database("SomeDB").T2 | ...) on Col1
```

Ниже приведены правовые ценности для*`strategy`*
* **`left`**- выполнить соединение на кластере левого операнд 
* **`right`**- выполнить соединение на кластере правой операнд
* **`local`**- выполнить соединение на кластере текущего кластера
* **`auto`**- (по умолчанию) пусть Кусто сделать автоматическое решение remoting

**Примечание:** Присоединиться к ремотиву намек будет проигнорирован Кусто, если намекнул стратегии не применимы к операции соединения.

::: zone-end

::: zone pivot="azuremonitor"

Это не поддерживается в Azure Monitor

::: zone-end
