---
title: Соединение между кластерами — Azure обозреватель данных
description: В этой статье описывается соединение между кластерами в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: alexans
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
zone_pivot_group_filename: data-explorer/zone-pivot-groups.json
zone_pivot_groups: kql-flavors
ms.openlocfilehash: a7c8f89886a8c12941dbc218ad69b35eebd7f1c7
ms.sourcegitcommit: 608539af6ab511aa11d82c17b782641340fc8974
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2020
ms.locfileid: "92246585"
---
# <a name="cross-cluster-join"></a>Соединение между кластерами

::: zone pivot="azuredataexplorer"

Общие сведения о запросах между кластерами см. в разделе [запросы между кластерами и между базами данных](cross-cluster-or-database-queries.md) .

Можно выполнить операцию JOIN с наборами данных, находящимися в разных кластерах. Пример:

```kusto
T | ... | join (cluster("SomeCluster").database("SomeDB").T2 | ...) on Col1 // (1)

cluster("SomeCluster").database("SomeDB").T | ... | join (cluster("SomeCluster2").database("SomeDB2").T2 | ...) on Col1 // (2)
```

В приведенном выше примере операция JOIN является соединением между кластерами, предполагая, что текущий кластер не является "Сомеклустер" или "SomeCluster2".

В следующем примере:

```kusto
cluster("SomeCluster").database("SomeDB").T | ... | join (cluster("SomeCluster").database("SomeDB2").T2 | ...) on Col1 
```

операция JOIN не является соединением между кластерами, поскольку оба операнда происходят в одном кластере.

Когда Kusto встречает соединение между кластерами, он автоматически решает, где выполнить операцию JOIN. Это решение может иметь один из трех возможных результатов:

* Выполнить операцию JOIN в кластере левого операнда, правый операнд будет сначала выбран этим кластером. (соединение в примере **(1)** будет выполнено в локальном кластере).
* Выполнить операцию JOIN в кластере правого операнда, левый операнд будет сначала выбран этим кластером. (JOIN в примере **(2)** будет выполнен в "SomeCluster2")
* Выполнить операцию Join локально (это означает, что в кластере, который получил запрос), оба операнда будут сначала получены локальным кластером.

Фактическое решение зависит от конкретного запроса. Стратегия удаленного взаимодействия автоматического присоединение — это (упрощенная версия): "Если один из операндов является локальным, соединение будет выполняться локально. Если оба операнда являются удаленными, в кластере правого операнда будет выполняться JOIN.

Иногда производительность запроса может быть улучшена, если не соблюдается стратегия автоматического удаленного взаимодействия. В этом случае выполните операцию JOIN в кластере самого крупного операнда.

Если в примере **(1)** набор данных, созданный в `T | ...` , гораздо меньше, чем один из созданных `cluster("SomeCluster").database("SomeDB").T2 | ...` , то более эффективным будет выполнение операции JOIN с "сомеклустер".

Эту операцию можно выполнить, предоставив указание Kusto Join для удаленного взаимодействия. Синтаксис:

```kusto
T | ... | join hint.remote=<strategy> (cluster("SomeCluster").database("SomeDB").T2 | ...) on Col1
```

Ниже приведены допустимые значения для `strategy`
* `left` — выполнение объединения в кластере левого операнда 
* `right` — выполнение объединения в кластере правого операнда;
* `local` — выполнить присоединение в кластере текущего кластера;
* `auto` -(по умолчанию). Позвольте Kusto сделать решение об автоматическом удаленном взаимодействии

> [!Note]
> Указание Join Remoting будет игнорироваться Kusto, если указанная стратегия не применима к операции JOIN.

::: zone-end

::: zone pivot="azuremonitor"

Эта возможность не поддерживается в Azure Monitor

::: zone-end
