---
title: Рекомендации по разработке схем - Azure Data Explorer Документы Майкрософт
description: В этой статье описаны рекомендации по разработке схем в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/18/2020
ms.openlocfilehash: f9e2d4a2ad50b140d041179736b48a41a424f5c6
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81522174"
---
# <a name="best-practices-for-schema-design"></a>Рекомендации по разработке схем

Есть несколько "Dos and Don'ts", вы можете следовать, чтобы сделать ваши команды управления работать лучше и иметь более легкое влияние на службу.

## <a name="do"></a>Как нужно

1. Если вам нужно создать несколько таблиц, используйте [`.create tables`](create-tables-command.md) команду, вместо того, чтобы выдавать много `.create table` команд.
2. Если вам нужно переименовать несколько таблиц, сделайте это с помощью [`.rename tables`](rename-table-command.md)одного вызова, а не путем выдачи отдельного вызова для каждой пары таблиц.
3. Используйте команду с `.show` самым низким уровнем охвата,`|`вместо того, чтобы применять фильтры после трубы (). Пример:
    - Используйте `.show table T extents` вместо `.show cluster extents | where TableName == 'T'`
    - Используйте `.show database DB schema` вместо `.show schema | where DatabaseName == 'DB'`.
4. Используйте `.show table T` только в том случае, если вам нужно получить актуальную статистику на одной таблице. Если вам просто нужно проверить существование таблицы, или просто получить схему таблицы, используйте `.show table T schema as json`.
5. При определении схемы для таблицы, которая будет включать значения времени даты, убедитесь, что эти столбцы набраны с типом. `datetime`
    - Kusto высоко оптимизирован для `datetime` фильтрации на столбцах. Не конвертировать `string` или числовые `long`(например) `datetime` столбцы в момент запроса для фильтрации, если это может быть сделано до или во время приема.

## <a name="dont"></a>Как не нужно

1. Не запускайте `.show` команды слишком часто `.show schema`(например, , `.show databases`, ). `.show tables` Когда это возможно - кэш информации, которые они возвращают.
2. Не запускайте `.show schema` команду на кластере, большая схема которой (например, с более чем 100 базами данных). Вместо этого [`.show databases schema`](../management/show-schema-database.md)используйте .
3. Не запускайте операции [командного запроса](index.md#combining-queries-and-control-commands) слишком часто.
    - *command-then-query*: означает трубопроводный набор результатов команды управления и применение фильтров/агрегаций на нем.
        - Например: `.show ... | where ... | summarize ...`
    - При запуске `.show cluster extents | count` что-то `| count`вроде: (акцент на ), Kusto сначала готовит таблицу данных, в которой будут держаться все детали по всем размерам в кластере, а затем отправляет эту таблицу в памяти только в двигатель Kusto для того, чтобы сделать подсчет. Это означает, что Kusto на самом деле работает очень трудно в ООН-оптимизированный путь, чтобы вернуть вам такой тривиальный ответ.
4. Чрезмерное использование тегов степени как часть приема данных. Особенно при `drop-by:` использовании тегов, которые ограничивают способность системы выполнять ориентированные на производительность процессы ухода в фоновом режиме.
    - Смотрите примечания к производительности [здесь](../management/extents-overview.md#extent-tagging).
    