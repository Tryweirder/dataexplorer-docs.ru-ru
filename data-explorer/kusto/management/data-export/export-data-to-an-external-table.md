---
title: Экспорт данных во внешнюю таблицу в Azure обозреватель данных
description: В этой статье описывается экспорт данных во внешнюю таблицу в обозреватель данных Azure.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 03/30/2020
ms.openlocfilehash: 8cd79b6f6531efd9621edf603b38d71bb074f6aa
ms.sourcegitcommit: c815c6ccf33864e21e1d3daff26a4f077dff88f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2020
ms.locfileid: "95012173"
---
# <a name="export-data-to-an-external-table"></a>Экспорт данных во внешнюю таблицу

Данные можно экспортировать, определив [внешнюю таблицу](../external-table-commands.md) и экспортировав в нее данные.
Свойства таблицы указываются при [создании внешней таблицы](../external-tables-azurestorage-azuredatalake.md#create-or-alter-external-table).
Команда Export ссылается на внешнюю таблицу по имени.

Команде требуется [разрешение администратора таблицы или администратора базы данных](../access-control/role-based-authorization.md).

## <a name="syntax"></a>Синтаксис

`.export` [ `async` ] `to` `table` *Екстерналтабленаме* <br>
[ `with` `(` *PropertyName* `=` *propertyvalue* `,` ... `)` ] <| *Запрос*

**Аргументы**

* *Екстерналтабленаме*: имя внешней таблицы для экспорта.
* *Запрос*: экспорт запроса.
* *Свойства*: следующие свойства поддерживаются как часть команды Export to External Table: 
    * `sizeLimit`, `parquetRowGroupSize` , `distributed` . Дополнительные сведения об этих свойствах см. в разделе [Экспорт в хранилище](export-data-to-storage.md) .
    * `spread`, `concurrency` -свойства для уменьшения или увеличения параллелизма операций записи. Дополнительные сведения см. в разделе [оператор секционирования](../../query/partitionoperator.md) . Эти свойства применимы только при экспорте во внешнюю таблицу, секционированную по _строковой_ секции. По умолчанию число узлов, одновременно выполняющих экспорт, будет равно минимуму между 64 и числом узлов кластера.


## <a name="output"></a>Выходные данные

|Выходной параметр |Type |Описание
|---|---|---
|екстерналтабленаме  |Строка |Имя внешней таблицы.
|Path|Строка|Путь вывода.
|нумрекордс|Строка| Число записей, экспортируемых по пути.

## <a name="notes"></a>Примечания

* Выходная схема экспорта запроса должна соответствовать схеме внешней таблицы, включая все столбцы, определенные в секциях. Например, если таблица секционирована по *DateTime*, то выходная схема запроса должна иметь столбец timestamp, соответствующий *тиместампколумннаме*. Это имя столбца определено в определении секционирования внешней таблицы.

* Невозможно переопределить свойства внешней таблицы с помощью команды Export.
 Например, нельзя экспортировать данные в формате Parquet во внешнюю таблицу, формат данных которой — CSV.

* Если внешняя таблица секционирована, экспортированные артефакты будут записаны в соответствующие каталоги в соответствии с определениями секций, как показано в [примере с секционированной внешней таблицей](#partitioned-external-table-example).
  * Если значение секции равно null или пусто или является недопустимым значением каталога, то значение секции заменяется значением по умолчанию `__DEFAULT_PARTITION__` .

* Рекомендации по устранению ошибок хранилища во время выполнения команд экспорта см. в разделе [сбои во время выполнения команд экспорта](export-data-to-storage.md#failures-during-export-commands).

### <a name="number-of-files"></a>Число файлов

Количество файлов, записываемых на секцию, зависит от параметров:

 * Если внешняя таблица включает только секции даты и времени или не содержит ни одной секции, число записанных файлов (для каждой секции, если существует) должно быть похоже на число узлов в кластере (или более, если `sizeLimit` достигнут). При распределении операции экспорта все узлы в кластере одновременно экспортируются. Для отключения распространения, чтобы только один узел записывал записи, установите значение `distributed` false. Этот процесс создаст меньше файлов, но снизит производительность экспорта.

* Если внешняя таблица включает Секцию по строковому столбцу, то число экспортируемых файлов должно быть отдельным файлом для каждой секции (или более, если `sizeLimit` достигнут). Все узлы все еще участвуют в экспорте (операция распределена), но каждая секция назначается определенному узлу. Если задано `distributed` значение false, то экспорт будет выполняться только для одного узла, но поведение останется неизменным (один файл записан на секцию).

## <a name="examples"></a>Примеры

### <a name="non-partitioned-external-table-example"></a>Пример внешней таблицы, не являющейся секционированной

Екстерналблоб является несекционированной внешней таблицей. 

```kusto
.export to table ExternalBlob <| T
```

|екстерналтабленаме|Path|нумрекордс|
|---|---|---|
|екстерналблоб|http://storage1.blob.core.windows.net/externaltable1cont1/1_58017c550b384c0db0fea61a8661333e.csv|10|

### <a name="partitioned-external-table-example"></a>Пример внешней таблицы с секционированием

Партитионедекстерналблоб — это внешняя таблица, определенная следующим образом: 

```kusto
.create external table PartitionedExternalBlob (Timestamp:datetime, CustomerName:string) 
kind=blob
partition by 
   "CustomerName="CustomerName,
   bin(Timestamp, 1d)
dataformat=csv
( 
   h@'http://storageaccount.blob.core.windows.net/container1;secretKey'
)
```

```kusto
.export to table PartitionedExternalBlob <| T
```

|екстерналтабленаме|Path|нумрекордс|
|---|---|---|
|екстерналблоб|http://storageaccount.blob.core.windows.net/container1/CustomerName=customer1/2019/01/01/fa36f35c-c064-414d-b8e2-e75cf157ec35_1_58017c550b384c0db0fea61a8661333e.csv|10|
|екстерналблоб|http://storageaccount.blob.core.windows.net/container1/CustomerName=customer2/2019/01/01/fa36f35c-c064-414d-b8e2-e75cf157ec35_2_b785beec2c004d93b7cd531208424dc9.csv|10|

Если команда выполняется асинхронно (с помощью `async` ключевого слова), выходные данные доступны с помощью команды " [отобразить сведения о операции](../operations.md#show-operation-details) ".
