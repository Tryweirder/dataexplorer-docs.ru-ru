---
title: Экспорт данных во внешнюю таблицу в Azure обозреватель данных | Документация Майкрософт
description: В этой статье описывается экспорт данных во внешнюю таблицу в обозреватель данных Azure.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 03/30/2020
ms.openlocfilehash: 56150c480d0d5ecfd4d428e51f7bdb4b68e36b0c
ms.sourcegitcommit: 1faf502280ebda268cdfbeec2e8ef3d582dfc23e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/01/2020
ms.locfileid: "82617703"
---
# <a name="export-data-to-an-external-table"></a>Экспорт данных во внешнюю таблицу

Данные можно экспортировать, определив [внешнюю таблицу](../externaltables.md) и экспортировав в нее данные.
Свойства таблицы указываются при [создании внешней таблицы](../externaltables.md#create-or-alter-external-table), поэтому не нужно внедрять свойства таблицы в команду Export. Команда Export ссылается на внешнюю таблицу по имени.
Для экспорта данных требуется [разрешение администратора базы данных](../access-control/role-based-authorization.md).

> [!NOTE] 
> * Экспорт во внешнюю таблицу со `impersonate` строкой подключения в настоящее время не поддерживается.

**Синтаксис**

`.export`[`async`] `to` `table` *Екстерналтабленаме* <br>
[`with` `(` *PropertyName* PropertyName `=` *PropertyValue*PropertyValue`,`... `)`] <| *Запрос*

**Проверки**

|Выходной параметр |Тип |Описание
|---|---|---
|екстерналтабленаме  |Строка |Имя внешней таблицы.
|Path|Строка|Путь вывода.
|нумрекордс|Строка| Число записей, экспортируемых по пути.

**Примечания.**
* Выходная схема экспорта запроса должна соответствовать схеме внешней таблицы, включая все столбцы, определенные в секциях. Например, если таблица секционирована по *значению DateTime*, схема вывода запроса должна включать столбец timestamp, соответствующий *тиместампколумннаме* , определенному в определении секционирования внешней таблицы.

* Невозможно переопределить свойства внешней таблицы с помощью команды Export.
 Например, нельзя экспортировать данные в формате Parquet во внешнюю таблицу, формат данных которой — CSV.

* В составе команды Export поддерживаются следующие свойства. Дополнительные сведения см. в разделе [Экспорт в хранилище](export-data-to-storage.md) . 
   * `sizeLimit`, `parquetRowGroupSize`, `distributed`.

* Если внешняя таблица секционирована, экспортированные артефакты будут записаны в соответствующие каталоги в соответствии с определениями секций, как показано в [примере](#partitioned-external-table-example). 

* Количество файлов, записываемых на секцию, зависит от следующих факторов:
   * Если внешняя таблица включает только секции даты и времени или не содержит ни одной секции, количество записанных файлов (для каждой секции, если существует) должно соответствовать количеству узлов в кластере (или более, если `sizeLimit` достигнуто). Это связано с тем, что операция экспорта распределена, так что все узлы в кластере одновременно экспортируются. 
   Для отключения распространения, чтобы только один узел выполнял операции записи, установите `distributed` значение false. Это позволит создать меньше файлов, но будет снижать производительность экспорта.

   * Если внешняя таблица включает Секцию по строковому столбцу, то число экспортируемых файлов должно быть отдельным файлом для каждой секции (или более, если `sizeLimit` достигнут). Все узлы все еще участвуют в экспорте (операция распределена), но каждая секция назначается определенному узлу. Если `distributed` в этом случае установить значение false, это приведет к тому, что экспорт будет выполняться только для одного узла, но поведение останется неизменным (один файл, записанный на секцию).

## <a name="examples"></a>Примеры

### <a name="non-partitioned-external-table-example"></a>Пример внешней таблицы, не являющейся секционированной

Екстерналблоб является несекционированной внешней таблицей. 
```kusto
.export to table ExternalBlob <| T
```

|екстерналтабленаме|Path|нумрекордс|
|---|---|---|
|екстерналблоб|http://storage1.blob.core.windows.net/externaltable1cont1/1_58017c550b384c0db0fea61a8661333e.csv|10|

### <a name="partitioned-external-table-example"></a>Пример внешней таблицы с секционированием

Партитионедекстерналблоб — это внешняя таблица, определенная следующим образом: 

```kusto
.create external table PartitionedExternalBlob (Timestamp:datetime, CustomerName:string) 
kind=blob
partition by 
   "CustomerName="CustomerName,
   bin(Timestamp, 1d)
dataformat=csv
( 
   h@'http://storageaccount.blob.core.windows.net/container1;secretKey'
)
```

```kusto
.export to table PartitionedExternalBlob <| T
```

|екстерналтабленаме|Path|нумрекордс|
|---|---|---|
|екстерналблоб|http://storageaccount.blob.core.windows.net/container1/CustomerName=customer1/2019/01/01/fa36f35c-c064-414d-b8e2-e75cf157ec35_1_58017c550b384c0db0fea61a8661333e.csv|10|
|екстерналблоб|http://storageaccount.blob.core.windows.net/container1/CustomerName=customer2/2019/01/01/fa36f35c-c064-414d-b8e2-e75cf157ec35_2_b785beec2c004d93b7cd531208424dc9.csv|10|

Если команда выполняется асинхронно (с помощью `async` ключевого слова), выходные данные доступны с помощью команды " [отобразить сведения о операции](../operations.md#show-operation-details) ".
