---
title: Экспорт данных во внешнюю таблицу - Azure Data Explorer Документы Майкрософт
description: В этой статье описаны данные об экспорте в внешнюю таблицу в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 03/30/2020
ms.openlocfilehash: e26d1ae163b69f3a04c52538c245ea446dc11199
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81521647"
---
# <a name="export-data-to-an-external-table"></a>Экспортные данные во внешнюю таблицу

Данные можно экспортировать, определяя [внешнюю таблицу](../externaltables.md) и экспортируя в нее данные.
Свойства таблицы определяются при [создании внешней таблицы,](../externaltables.md#create-or-alter-external-table)поэтому не нужно встраивать свойства таблицы в команду экспорта. Экспортная команда ссылается на внешнюю таблицу по имени.
Экспортные данные требуют [разрешения администрирования базы данных.](../access-control/role-based-authorization.md)

> [!NOTE] 
> * Экспорт во внешнюю `impersonate` таблицу со строкой подключения в настоящее время не поддерживается.

**Синтаксис**

`.export``to` -`async` `table` *ВнешнийTableName* <br>
`with` `(` *НедвижимостьНаит* `=` *НедвижимостьСтоимость*`,`... `)`- <*Запрос*

**Выход:**

|Выходной параметр |Тип |Описание
|---|---|---
|ВнешнийTableName  |Строка |Название внешней таблицы.
|путь|Строка|Путь вывода.
|NumRecords|Строка| Количество записей, экспортированных на путь.

**Примечания.**
* Схема вывода экспортного запроса должна соответствовать схеме внешней таблицы, включая все столбцы, определяемые разделами. Например, если таблица разделена *DateTime,* схема вывода запроса должна включать столбец Timestamp, который соответствует временной *меткеColumnName,* определенной в определении раздела внешней таблицы.

* Невозможно переопределить внешние свойства таблицы с помощью команды экспорта.
 Например, нельзя экспортировать данные в формате Parquet во внешнюю таблицу, формат омычает CSV.

* Следующие свойства поддерживаются в составе экспортной команды. Подробнее о [разделе экспорт ам-хранилища](export-data-to-storage.md) читайте в разделе: 
   * `sizeLimit`, `parquetRowGroupSize`, `distributed`.

* Если внешняя таблица разделена, экспортируемые артефакты будут записаны в соответствующие каталоги, в соответствии с определениями раздела, как видно на [примере](#partitioned-external-table-example). 

* Количество файлов, написанных на раздел, зависит от следующих:
   * Если внешняя таблица включает только разделы дат времени или вообще не разъедает - количество написанных файлов (для каждого раздела, если `sizeLimit` существует) должно быть вокруг числа узлов в кластере (или больше, если достигнуто). Это происходит потому, что экспортная операция распределена, так что все узлы в кластере экспортируются одновременно. 
   Отключить распределение, чтобы только один узла выполнял записи, `distributed` установленные на ложные. Это создаст меньше файлов, но снизит производительность экспорта.

   * Если внешняя таблица включает раздел строки столбца, число экспортируемых файлов должно быть одним `sizeLimit` файлом на раздел (или больше, если оно достигнуто). Все узлы по-прежнему участвуют в экспорте (операция распределена), но каждый раздел присваивается определенному узлам. Установка `distributed` на ложную в этом случае приведет к тому, что экспорт выполняеттолько только один узла, но поведение останется прежним (один файл, написанный на раздел).

## <a name="examples"></a>Примеры

### <a name="non-partitioned-external-table-example"></a>Пример внешней таблицы, не разделенный

ExternalBlob — это внешняя таблица, не разделенная. 
```kusto
.export to table ExternalBlob <| T
```

|ВнешнийTableName|путь|NumRecords|
|---|---|---|
|ВнешнийБлобл|http://storage1.blob.core.windows.net/externaltable1cont1/1_58017c550b384c0db0fea61a8661333e.csv|10|

### <a name="partitioned-external-table-example"></a>Разделенный внешний пример таблицы

РазделИтеExternalBlob — это внешняя таблица, определяемая следующим образом: 

```
.create external table PartitionedExternalBlob (Timestamp:datetime, CustomerName:string) 
kind=blob
partition by 
   "CustomerName="CustomerName,
   bin(Timestamp, 1d)
dataformat=csv
( 
   h@'http://storageaccount.blob.core.windows.net/container1;secretKey'
)
```

```
.export to table PartitionedExternalBlob <| T
```

|ВнешнийTableName|путь|NumRecords|
|---|---|---|
|ВнешнийБлобл|http://storageaccount.blob.core.windows.net/container1/CustomerName=customer1/2019/01/01/fa36f35c-c064-414d-b8e2-e75cf157ec35_1_58017c550b384c0db0fea61a8661333e.csv|10|
|ВнешнийБлобл|http://storageaccount.blob.core.windows.net/container1/CustomerName=customer2/2019/01/01/fa36f35c-c064-414d-b8e2-e75cf157ec35_2_b785beec2c004d93b7cd531208424dc9.csv|10|

Если команда выполняется асинхронно (с `async` помощью ключевого слова), вывод доступен с помощью команды [деталей операции шоу.](../operations.md#show-operation-details)