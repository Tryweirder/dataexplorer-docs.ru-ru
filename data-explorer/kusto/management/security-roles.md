---
title: Управление функциями безопасности - Azure Data Explorer Документы Майкрософт
description: В этой статье описывается управление ролями безопасности в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: ea56911ff2ad320d1070da2a4b92d94f060273cf
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81520100"
---
# <a name="security-roles-management"></a>Управление ролями безопасности

> [!IMPORTANT]
> Прежде чем изменить правила авторизации в кластере Kusto (ы), прочитайте следующее: 
> [авторизация](../management/access-control/role-based-authorization.md) на основе ролей [управления доступом Kusto](../management/access-control/index.md) 

В этой статье описаны команды управления, используемые для управления ролями безопасности.
Роли безопасности определяют, какие принципы безопасности (пользователи и приложения) имеют разрешения на работу на защищенном ресурсе, например базисной базе данных или таблице, и какие операции разрешены. Например, принципы, `database viewer` которые играют роль безопасности для определенной базы данных, могут запросить и просмотреть все сущности этой базы данных (за исключением ограниченных таблиц).

Роль безопасности может быть связана с принципами безопасности или группами безопасности (которые могут иметь другие принципы безопасности или другие группы безопасности). Когда основной элемент безопасности пытается сделать операцию на защищенном ресурсе, система проверяет, что принцип связан по крайней мере с одной ролью безопасности, которая предоставляет разрешения на выполнение этой операции на ресурсе. Это называется **проверкой авторизации.** В случае проверки авторизации операция прерывается.

**Синтаксис**

Команды управления функциями управления функциями управления функциями синхронизации безопасности:

*Глагол* *SecurableObjectTypeSecurTypeSecurObjectName* *SecurableObjectName* *Роль* -*Description*`(` *ListOfPrincipals* `)`

* *Глагол* указывает вид действия `.show`для `.add` `.drop`выполнения: `.set`, , и .

    |*Глагол* |Описание                                  |
    |-------|---------------------------------------------|
    |`.show`|Возвращает текущее значение или значения.         |
    |`.add` |Добавляет одну или несколько принципов к роли.     |
    |`.drop`|Удаляет одну или несколько принципов из роли.|
    |`.set` |Устанавливает роль в определенный список директоров, удаляя все предыдущие (если таковые имеется).|

* *SecurableObjectType* — это тот объект, роль которого указана.

    |*SecurableObjectType*|Описание|
    |---------------------|-----------|
    |`database`|Указанная база данных|
    |`table`|Указанная таблица|

* *SecurableObjectName* — это название объекта.

* *Роль* — это название соответствующей роли.

    |*Role*      |Описание|
    |------------|-----------|
    |`principals`|Может появиться только `.show` как часть глагола; возвращает список принципов, которые могут повлиять на объект, обеспечивающий безопасность.|
    |`admins`    |Контролируйте охраняемый объект, включая возможность просматривать, изменять его и удалять объект и все подобъекты.|
    |`users`     |Можно просматривать объект, обеспечивающий безопасность, и создавать новые объекты под ним.|
    |`viewers`   |Можно просматривать объект безопасности.|
    |`unrestrictedviewers`|Только на уровне базы данных позволяет просматривать ограниченные таблицы `viewers` `users`(которые не подвергаются воздействию "нормальных" и).|
    |`ingestors` |Только на уровне базы данных позволяет проглатывать данные во все таблицы.|
    |`monitors`  ||

* *ListOfPrincipals* — это необязательный, запятый список основных `string`идентификаторов безопасности (значения типа).

* *Описание* является дополнительным значением типа, `string` который хранится рядом с ассоциацией, для будущих целей аудита.

## <a name="example"></a>Пример

Следующая команда управления перечисляет все принципы безопасности, которые имеют некоторый доступ к таблице `StormEvents` в базе данных:

```kusto
.show table StormEvents principals
```

Вот потенциальные результаты этой команды:

|Роль |PrincipalType |PrincipalDisplayName |ГлавныйобъектId |ДиректорФЗН 
|---|---|---|---|---
|База данных Apsty Админ |Пользователь AAD |Марк Смит |cd709aed-a26c-e3953dec735e |aadusermsmith@fabrikam.com|





## <a name="managing-database-security-roles"></a>Управление ролями безопасности баз данных

`.set``database` *База данныхИмя* *Роль* `none` (ru)`skip-results`

`.set``database` *База данныхНаитная* *роль* `(` *Директора* `,` *(Директор)*...» `)` В`skip-results`-*Описание*

`.add``database` *База данныхНаитная* *роль* `(` *Директора* `,` *(Директор)*...» `)` В`skip-results`-*Описание*

`.drop``database` *База данныхНаитная* *роль* `(` *Директора* `,` *(Директор)*...» `)` В`skip-results`-*Описание*

Первая команда удаляет все принципы из роли. Второй удаляет все принципы из роли и устанавливает новый набор принципов. Третий добавляет новые принципы к роли без удаления существующих принципов. Последний удаляет указанные принципы из ролей и сохраняет другие.

Где:

* *DatabaseName* — это название базы данных, роль которой в области безопасности в настоящее время изменяется.

* *Роль:* `admins`, `ingestors` `monitors`, `unrestrictedviewers` `users`, `viewers`,

* *Директором* является один или несколько директоров. Ознакомьтесь с [принципами и поставщиками идентификационных данных,](./access-control/principals-and-identity-providers.md) как указать эти принципы.

* `skip-results`, если это предусмотрено, просит, чтобы команда не возвращала обновленный список основ данных.

* *Описание,* если это предоставлено, это текст, который будет связан `.show` с изменением и извлечен ы соответствующей командой.

<!-- TODO: Need more examples for the public syntax. Until then we're keeping this internal -->


## <a name="managing-table-security-roles"></a>Управление ролями безопасности таблицы

`.set``table` *ТаблицаРоль* *Role* `none` `skip-results`(s)

`.set``table` *ТаблицаИмя* *Роль* `(` *Главный* `,` *(главный)* `)` В`skip-results`-*Описание*

`.add``table` *ТаблицаИмя* *Роль* `(` *Главный* `,` *(главный)* `)` В`skip-results`-*Описание*

`.drop``table` *ТаблицаИмя* *Роль* `(` *Главный* `,` *(главный)* `)` В`skip-results`-*Описание*

Первая команда удаляет все принципы из роли. Второй удаляет все принципы из роли и устанавливает новый набор принципов. Третий добавляет новые принципы к роли без удаления существующих принципов. Последний удаляет указанные принципы из ролей и сохраняет другие.

Где:

* *TableName* — это название таблицы, роль безопасности которой изменяется.

* *Роль:* `admins` или `ingestors`.

* *Директором* является один или несколько директоров. Ознакомьтесь с [принципами и поставщиками идентификационных данных,](./access-control/principals-and-identity-providers.md) как указать эти принципы.

* `skip-results`, если это предусмотрено, просит, чтобы команда не возвращала обновленный список основ таблицы.

* *Описание,* если это предоставлено, это текст, который будет связан `.show` с изменением и извлечен ы соответствующей командой.

**Пример**

```kusto
.add table Test admins ('aaduser=imike@fabrikam.com ')
```

## <a name="managing-function-security-roles"></a>Управление ролями безопасности функций

`.set``function` *ФункцияРоль* *Role* `none` Функционального названия (г.)`skip-results`

`.set``function` *FunctionName* *Роль* `(` *Главный* `,` *(Principal)* `)` В`skip-results`-*Описание*

`.add``function` *FunctionName* *Роль* `(` *Главный* `,` *(Principal)* `)` В`skip-results`-*Описание*

`.drop``function` *FunctionName* *Роль* `(` *Главный* `,` *(Principal)* `)` В`skip-results`-*Описание*

Первая команда удаляет все принципы из роли. Второй удаляет все принципы из роли и устанавливает новый набор принципов. Третий добавляет новые принципы к роли без удаления существующих принципов. Последний удаляет указанные принципы из ролей и сохраняет другие.

Где:

* *ФункцияName* — это название функции, роль безопасности которой изменяется.

* *Роль* всегда `admin`.

* *Директором* является один или несколько директоров. Ознакомьтесь с [принципами и поставщиками идентификационных данных,](./access-control/principals-and-identity-providers.md) как указать эти принципы.

* `skip-results`, если это предусмотрено, просит, чтобы команда не возвращала обновленный список принципов функций.

* *Описание,* если это предоставлено, это текст, который будет связан `.show` с изменением и извлечен ы соответствующей командой.

**Пример**

```kusto
.add function MyFunction admins ('aaduser=imike@fabrikam.com') 'This user should have access'
```

