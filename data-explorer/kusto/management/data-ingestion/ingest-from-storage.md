---
title: Kusto. прием в команду (извлечение данных из хранилища) — Azure обозреватель данных
description: В этой статье описывается команда. приема на (извлечение данных из хранилища) в обозреватель данных Azure.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 03/24/2020
ms.openlocfilehash: 90158c066c724f7d05e9c5e91333874ad572e81b
ms.sourcegitcommit: 53679e57e0fcb7ec46beaba7cc812bd991da6cc0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87984476"
---
# <a name="the-ingest-into-command-pull-data-from-storage"></a>Команда. приема в (извлечение данных из хранилища)

`.ingest into`Команда принимает данные в таблицу путем извлечения данных из одного или нескольких файлов облачного хранилища.
Например, команда может получать 1000 больших двоичных объектов в формате CSV из хранилища BLOB-объектов Azure, анализировать их и принимать их вместе в одну целевую таблицу.
Данные добавляются в таблицу, не затрагивая существующие записи, и без изменения схемы таблицы.

**Синтаксис**

`.ingest`[ `async` ] `into` `table` *TableName* *саурцедаталокатор* [ `with` `(` *инжестионпропертинаме* `=` *инжестионпропертивалуе* [ `,` ...] `)` ]

**Аргументы**

* `async`: Если указано, команда немедленно возвращает значение и продолжает прием в фоновом режиме. Результаты выполнения команды будут содержать `OperationId` значение, которое затем можно использовать с `.show operation` командой для получения состояния завершения приема и результатов.
  
* *TableName*: имя таблицы для приема данных.
  Имя таблицы всегда указывается относительно базы данных в контексте, а ее схема является схемой, которая будет предполагаться для данных, если объект сопоставления схемы не предоставлен.

* *Саурцедаталокатор*: литерал типа `string` или разделенный запятыми список таких литералов, заключенных в `(` `)` символы и, представляющих [строки подключения к хранилищу](../../api/connection-strings/storage.md). Kusto использует формат URI для описания файлов хранилища, содержащих данные для извлечения. 
  * Одна строка подключения должна ссылаться на отдельный файл, размещенный в учетной записи хранения. 
  * Прием нескольких файлов может быть выполнен путем указания нескольких строк подключения, разделенных запятыми, или путем [приема из запроса](ingest-from-query.md) [внешней таблицы](../../query/schema-entities/externaltables.md).

> [!NOTE]
> Настоятельно рекомендуется использовать скрытые [строковые литералы](../../query/scalar-data-types/string.md#obfuscated-string-literals) для *саурцедатапоинтер* , который включает в себя фактические учетные данные.
> Служба не гарантирует очистки учетных данных во внутренних трассировках, сообщениях об ошибках и т. д.

* *Инжестионпропертинаме*, *инжестионпропертивалуе*: любое количество [свойств приема](../../../ingestion-properties.md) , влияющих на процесс приема.

**Результаты**

Результатом выполнения команды является таблица с количеством записей, в котором имеются сегменты данных ("экстенты"), созданные командой.
Если сегментов данных не было создано, возвращается одна запись с пустым ИДЕНТИФИКАТОРом экстента (с нулевым значением).

|Имя       |Тип      |Описание                                                                |
|-----------|----------|---------------------------------------------------------------------------|
|екстентид   |`guid`    |Уникальный идентификатор сегмента данных, созданного командой.|
|итемлоадед |`string`  |Один или несколько файлов хранилища, связанных с этой записью.             |
|Duration   |`timespan`|Время, затраченное на прием.                                     |
|HasErrors  |`bool`    |Указывает, представляет ли эта запись ошибку приема или нет.                |
|Операции|`guid`    |Уникальный идентификатор, представляющий операцию. Можно использовать с `.show operation` командой.|

**Замечания**

Эта команда не изменяет схему таблицы, которая принимается в.
При необходимости данные преобразуются в эту схему во время приема, а не наоборот (дополнительные столбцы игнорируются, и отсутствующие столбцы обрабатываются как значения NULL).

**Примеры**

В следующем примере система предписывает модулю считывать два больших двоичных объекта из хранилища BLOB-объектов Azure в виде CSV-файлов и принимать их содержимое в таблицу `T` . `...`Представляет подписанный URL-адрес службы хранилища Azure (SAS), который предоставляет доступ на чтение к каждому большому двоичному объекту. Обратите внимание также на использование замаскированных строк ( `h` перед строковыми значениями), чтобы гарантировать, что SAS никогда не записывается.

```kusto
.ingest into table T (
    h'https://contoso.blob.core.windows.net/container/file1.csv?...',
    h'https://contoso.blob.core.windows.net/container/file2.csv?...'
)
```

Следующий пример предназначен для приема данных из Azure Data Lake Storage Gen 2 (ADLSv2). Учетные данные, используемые здесь ( `...` ), — это учетные данные учетной записи хранения (общий ключ), и мы используем только маскировку строк только для секретной части строки подключения.

```kusto
.ingest into table T (
  'abfss://myfilesystem@contoso.dfs.core.windows.net/path/to/file1.csv;...'
)
```

В следующем примере один файл принимается из Azure Data Lake Storage (ADLS).
Он использует учетные данные пользователя для доступа к ADLS (поэтому нет необходимости обрабатывать универсальный код ресурса (URI) хранилища, содержащий секрет). В нем также показано, как указать свойства приема.

```kusto
.ingest into table T ('adl://contoso.azuredatalakestore.net/Path/To/File/file1.ext;impersonate')
  with (format='csv')
```
