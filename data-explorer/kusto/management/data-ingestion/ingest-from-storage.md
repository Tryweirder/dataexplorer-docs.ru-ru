---
title: Kusto. прием в команду (извлечение данных из хранилища) — Azure обозреватель данных
description: В этой статье описывается команда. приема на (извлечение данных из хранилища) в обозреватель данных Azure.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 03/24/2020
ms.openlocfilehash: fcab02ee032d1009cf31e36963c44cc6b12358e3
ms.sourcegitcommit: fd3bf300811243fc6ae47a309e24027d50f67d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/13/2020
ms.locfileid: "83382018"
---
# <a name="the-ingest-into-command-pull-data-from-storage"></a>Команда. приема в (извлечение данных из хранилища)

`.ingest into`Команда принимает данные в таблицу, выполнив извлечение данных из одного или нескольких артефактов облачного хранилища.
Например, команда может получать 1000 больших двоичных объектов в формате CSV из хранилища BLOB-объектов Azure, анализировать их и принимать их вместе в одну целевую таблицу.
Данные добавляются в таблицу, не затрагивая существующие записи, и без изменения схемы таблицы.

**Синтаксис**

`.ingest`[ `async` ] `into` `table` *TableName* *саурцедаталокатор* [ `with` `(` *инжестионпропертинаме* `=` *инжестионпропертивалуе* [ `,` ...] `)` ]

**Аргументы**

* `async`: Если указано, команда немедленно возвращает значение и продолжает прием в фоновом режиме. Результаты выполнения команды будут содержать `OperationId` значение, которое затем можно использовать с `.show operation` командой для получения состояния завершения приема и результатов.
  
* *TableName*: имя таблицы для приема данных.
  Имя таблицы всегда указывается относительно базы данных в контексте, а ее схема является схемой, которая будет предполагаться для данных, если объект сопоставления схемы не предоставлен.

* *Саурцедаталокатор*: литерал типа `string` или разделенный запятыми список таких литералов, заключенных в `(` `)` символы и, указывающий артефакты хранилища, содержащие данные для извлечения. См. раздел [строки подключения к хранилищу](../../api/connection-strings/storage.md).

> [!NOTE]
> Настоятельно рекомендуется использовать скрытые [строковые литералы](../../query/scalar-data-types/string.md#obfuscated-string-literals) для *саурцедатапоинтер* , который включает в себя фактические учетные данные.
> Служба не гарантирует очистки учетных данных во внутренних трассировках, сообщениях об ошибках и т. д.

* *Инжестионпропертинаме*, *инжестионпропертивалуе*: любое количество [свойств приема](../../../ingestion-properties.md) , влияющих на процесс приема.

**Результаты**

Результатом выполнения команды является таблица с количеством записей, в котором имеются сегменты данных ("экстенты"), созданные командой.
Если сегментов данных не было создано, возвращается одна запись с пустым ИДЕНТИФИКАТОРом экстента (с нулевым значением).

|Имя       |Type      |Описание                                                                |
|-----------|----------|---------------------------------------------------------------------------|
|екстентид   |`guid`    |Уникальный идентификатор сегмента данных, созданного командой.|
|итемлоадед |`string`  |Один или несколько артефактов хранилища, связанных с этой записью.             |
|Duration   |`timespan`|Время, затраченное на прием.                                     |
|HasErrors  |`bool`    |Указывает, представляет ли эта запись ошибку приема или нет.                |
|Операции|`guid`    |Уникальный идентификатор, представляющий операцию. Можно использовать с `.show operation` командой.|

**Замечания**

Эта команда не изменяет схему таблицы, которая принимается в.
При необходимости данные преобразуются в эту схему во время приема, а не наоборот (дополнительные столбцы игнорируются, и отсутствующие столбцы обрабатываются как значения NULL).

**Примеры**

В следующем примере система предписывает модулю считывать два больших двоичных объекта из хранилища BLOB-объектов Azure в виде CSV-файлов и принимать их содержимое в таблицу `T` . `...`Представляет подписанный URL-адрес службы хранилища Azure (SAS), который предоставляет доступ на чтение к каждому большому двоичному объекту. Обратите внимание также на использование замаскированных строк ( `h` перед строковыми значениями), чтобы гарантировать, что SAS никогда не записывается.

```kusto
.ingest into table T (
    h'https://contoso.blob.core.windows.net/container/file1.csv?...',
    h'https://contoso.blob.core.windows.net/container/file2.csv?...'
)
```

Следующий пример предназначен для приема данных из Azure Data Lake Storage Gen 2 (ADLSv2). Учетные данные, используемые здесь ( `...` ), — это учетные данные учетной записи хранения (общий ключ), и мы используем только маскировку строк только для секретной части строки подключения.

```kusto
.ingest into table T (
  'abfss://myfilesystem@contoso.dfs.core.windows.net/path/to/file1.csv;'
    h'...'
)
```

В следующем примере один файл принимается из Azure Data Lake Storage (ADLS).
Он использует учетные данные пользователя для доступа к ADLS (поэтому нет необходимости обрабатывать универсальный код ресурса (URI) хранилища, содержащий секрет). В нем также показано, как указать свойства приема.

```kusto
.ingest into table T ('adl://contoso.azuredatalakestore.net/Path/To/File/file1.ext;impersonate')
  with (format='csv')
```

