---
title: Прием потоковой передачи и изменения схемы — Azure обозреватель данных
description: В этой статье рассматриваются варианты обработки изменений схемы с приемом потоковой передачи в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 05/20/2020
ms.openlocfilehash: f1ab3d012be7751eba33447b325748859509af00
ms.sourcegitcommit: 8e097319ea989661e1958efaa1586459d2b69292
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2020
ms.locfileid: "84784571"
---
# <a name="streaming-ingestion-and-schema-changes"></a>Прием потоковой передачи и изменения схемы

## <a name="background"></a>Историческая справка

Узлы кластера. схема кэша баз данных, получающих данные посредством приема потоковой передачи. Этот процесс оптимизирует производительность и использование ресурсов кластера, но может привести к задержкам распространения при изменениях схемы.

Ниже приведены примеры изменений схемы.

* Создание и удаление баз данных и таблиц
* Добавление, удаление, переввод или переименование столбцов таблицы
* Добавление или удаление предварительно созданных сопоставлений приема
* Добавление, удаление или изменение политик

Если изменения схемы и потоки приема потоковой передачи не согласованы, некоторые запросы приема потоковой передачи могут завершиться ошибкой. Ошибки могут включать ошибки, связанные с схемой, или вставку неполных или искаженных данных в таблицу.
При реализации пользовательского приложения приема настоятельно рекомендуется обрабатывать ошибки, связанные со схемой, выполняя повторные попытки в течение ограниченного времени или переправляя данные из невыполненных запросов с помощью методов приема в очереди.

## <a name="clearing-the-schema-cache"></a>Очистка кэша схемы

Уменьшите влияние задержки распространения, явно очистив кэш схемы на узлах кластера.
Очистите кэш схемы, используя один из [кэша очистки схемы для команд управления приема потоковой передачи](clear-schema-cache-command.md) .
Если поток приема потоковой передачи и изменения схемы согласованы, можно полностью устранить сбои и связанные с ними искажения данных. 

**Пример скоординированного потока:**

1. Приостановка приема потоковой передачи.
1. Дождитесь завершения всех необработанных запросов приема потоковой передачи>
1. Внесите изменения в схему.
1. Выполните одну или несколько `.clear cache streaming ingestion` команд схемы. 
    * Повторяйте до успешного выполнения, и все строки в выходных данных команды указывают на успешное выполнение
1. Возобновление приема потоковой передачи.

> [!NOTE]
> Использование команды «Очистить схему приема потоковой передачи» часто может оказать негативное воздействие на производительность приема потоковой передачи.
