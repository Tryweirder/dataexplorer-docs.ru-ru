---
title: Управление журналами в Azure обозреватель данных
description: В этой статье описывается управление журналами в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 08/19/2019
ms.openlocfilehash: 64b0f8179a328ce811747b05a90516fd8b6029be
ms.sourcegitcommit: 41cd88acc1fd79f320a8fe8012583d4c8522db78
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/02/2020
ms.locfileid: "84294412"
---
# <a name="journal-management"></a>Управление журналом

 `Journal`содержит сведения о операциях с метаданными, выполненных в базе данных Azure обозреватель данных.

Операции с метаданными могут возникать из команды управления, выполненной пользователем, или с помощью внутренних команд управления, выполняемых системой, таких как удаление экстентов путем хранения.

> [!NOTE]
> * Операции с метаданными, охватывающие *Добавление* новых экстентов, таких как `.ingest` , `.append` `.move` и другие, не будут иметь совпадающих событий, показанных в `Journal` .
> * Данные в столбцах результирующего набора, а также в том формате, в котором они представлены, не являются контрактными. 
  Делать зависимость от них не рекомендуется.

|Событие        |EventTimestamp     |База данных  |EntityName|упдатедентитинаме|ентитиверсион|EntityContainerName|
|-------------|-------------------|----------|----------|-----------------|-------------|-------------------|
|CREATE-TABLE |2017-01-05 14:25:07|интерналдб|MyTable1  |MyTable1         |Версия 7.0         |интерналдб         |
|RENAME-TABLE |2017-01-13 10:30:01|интерналдб|MyTable1  |MyTable2         |Версия 8.0         |интерналдб         |  

|оригиналентитистате|упдатедентитистате                                              |чанжекомманд                                                                                                          |Основной            |
|-------------------|----------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|---------------------|
|.                  |Имя: MyTable1, атрибуты: Name = "[MyTable1]. [col1] ", тип =" I32 "|. CREATE TABLE MyTable1 (Col1: int)                                                                                      |imike@fabrikam.com
|.                  |Свойства базы данных (слишком длинные для отображения)         |. Create Database TestDB PERSISTED (@ " https://imfbkm.blob.core.windows.net/md ", @ " https://imfbkm.blob.core.windows.net/data ")|Идентификатор приложения Azure AD = 76263cdb-ABCD-545644e9c404
|Имя: MyTable1, атрибуты: Name = "[MyTable1]. [col1] ", тип =" I32 "|Имя: MyTable2, атрибуты: Name = "[MyTable1]. [col1] ", тип =" I32 "|. Переименование таблицы MyTable1 в MyTable2|rdmik@fabrikam.com

|Item                 |Описание                                                              |                                
|---------------------|-------------------------------------------------------------------------|
|Событие                |Имя события метаданных                                                  |
|EventTimestamp       |Метка времени события                                                      |                        
|База данных             |Метаданные этой базы данных были изменены после события                |
|EntityName           |Имя сущности, в которой была выполнена операция, до изменения    |
|упдатедентитинаме    |Новое имя сущности после изменения                                     |
|ентитиверсион        |Новая версия метаданных (DB/Cluster) после изменения               |
|EntityContainerName  |Имя контейнера сущностей (сущность = столбец, контейнер = таблица)               |
|оригиналентитистате  |Состояние сущности (свойства сущности) перед изменением            |
|упдатедентитистате   |Новое состояние после изменения                                           |
|чанжекомманд        |Команда выполнения элемента управления, вызвавшая изменение метаданных          |
|Основной            |Участник (пользователь или приложение), который выполнил команду Control               |
    
## <a name="show-journal"></a>. Отображение журнала

`.show journal`Команда возвращает список изменений метаданных в базах данных или кластере, к которому у пользователя есть доступ администратора.

**Разрешения**

Все (доступ к кластеру) позволяет выполнить команду. 

Возвращаемые результаты будут включать: 
- Все записи журнала пользователя, который исполняет команду. 
- Все записи журнала баз данных, к которым пользователь выполнил команду, имеют доступ к администратору. 
- Все записи в журнале кластера, если пользователь, запускающий команду, является администратором кластера. 

## <a name="show-database-databasename-journal"></a>. Отображение журнала базы данных *DatabaseName* 

`.show` `database` *DatabaseName* `journal` Команда DatabaseName возвращает журнал для конкретных изменений метаданных базы данных.

**Разрешения**

Все (доступ к кластеру) позволяет выполнить команду. Возвращенные результаты включают: 
- Все записи журнала базы данных *DatabaseName* , если пользователь, запускающий команду, является администратором базы данных в *DatabaseName*. 
- В противном случае все записи журнала базы данных `DatabaseName` и пользователя, исполняющего команду. 
