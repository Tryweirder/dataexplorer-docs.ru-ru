---
title: Политика емкости - Исследователь данных Azure (ru) Документы Майкрософт
description: В этой статье описывается политика емкости в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 03/12/2020
ms.openlocfilehash: af648bd0a4b328477b14e20a2457e3e914df2827
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81522004"
---
# <a name="capacity-policy"></a>Политика в области емкости

Политика емкости используется для управления вычислительными ресурсами, которые используются для выполнения операций по обработке данных и других операций по уходу за данными (например, слияние размеров).

## <a name="the-capacity-policy-object"></a>Объект политики емкости

Политика емкости состоит `IngestionCapacity`из `ExtentsMergeCapacity` `ExtentsPurgeRebuildCapacity` , `ExportCapacity`и .

### <a name="ingestion-capacity"></a>Мощность приема

|Свойство                           |Тип    |Описание                                                                                                                                                                               |
|-----------------------------------|--------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|КластерМаксимальныеПараллельныеоперации |long    |Максимальное значение для количества операций одновременного приема в кластере                                                                                                            |
|Коэффициент coreUtilization         |double  |Коэффициент на процент используемых ядер при расчете мощности приема (результат расчета всегда будет `ClusterMaximumConcurrentOperations`нормализован) |                                                                                                                             |

Общая мощность приема кластера (как показано на [.show емкость)](../management/diagnostics.md#show-capacity)рассчитывается по следующим:

Минимум`ClusterMaximumConcurrentOperations`(, `Number of nodes in cluster` максимум (1,) `Core count per node`  *  `CoreUtilizationCoefficient`

> [!Note] 
> В кластерах с тремя узлами или выше узло админ не участвует в `Number of nodes in cluster` выполнении операций по проглатываниям, поэтому уменьшается на 1.

### <a name="extents-merge-capacity"></a>Емкость слияния

|Свойство                           |Тип    |Описание                                                                                    |
|-----------------------------------|--------|-----------------------------------------------------------------------------------------------|
|MaximumConcurrentOperationsPerNode |long    |Максимальное значение для количества параллельных операций слияния/восстановления на одном узлах |

Общая емкость слияния кластера (как показано на [.show capacity)](../management/diagnostics.md#show-capacity)рассчитывается следующим:

`Number of nodes in cluster`X`MaximumConcurrentOperationsPerNode`

> [!Note] 
> В кластерах с тремя узлами или выше узло админ не участвует `Number of nodes in cluster` в выполнении операций слияния, поэтому уменьшается на 1.

### <a name="extents-purge-rebuild-capacity"></a>Объемы очистки Восстановить потенциал

|Свойство                           |Тип    |Описание                                                                                                                           |
|-----------------------------------|--------|--------------------------------------------------------------------------------------------------------------------------------------|
|MaximumConcurrentOperationsPerNode |long    |Максимальное значение для количества параллельных размеров очистки операций восстановления (восстановление объемов для операций очистки) на одном уде |

Общая емкость очистки кластера (как показано на [мощности .show)](../management/diagnostics.md#show-capacity)рассчитывается следующим:

`Number of nodes in cluster`X`MaximumConcurrentOperationsPerNode`

> [!Note] 
> В кластерах с тремя узлами или выше узло админ не участвует `Number of nodes in cluster` в выполнении операций слияния, поэтому уменьшается на 1.

### <a name="export-capacity"></a>Экспортный потенциал

|Свойство                           |Тип    |Описание                                                                                                                                                                            |
|-----------------------------------|--------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|КластерМаксимальныеПараллельныеоперации |long    |Максимальное значение для числа параллельных экспортных операций в кластере.                                                                                                           |
|Коэффициент coreUtilization         |double  |Коэффициент на процент используемых ядер при расчете экспортного потенциала (результат расчета всегда `ClusterMaximumConcurrentOperations`будет нормализован) |

Общий экспортный потенциал кластера (как показано на [основе .show capacity)](../management/diagnostics.md#show-capacity)рассчитывается следующими:

Минимум`ClusterMaximumConcurrentOperations`(, `Number of nodes in cluster` максимум (1,) `Core count per node`  *  `CoreUtilizationCoefficient`

> [!Note] 
> В кластерах с тремя узлами или выше узла админ не участвует `Number of nodes in cluster` в выполнении экспортных операций, поэтому он сокращается на 1.

### <a name="extents-partition-capacity"></a>Емкость раздела

|Свойство                           |Тип    |Описание                                                                             |
|-----------------------------------|--------|----------------------------------------------------------------------------------------|
|КластерМаксимальныеПараллельныеоперации |long    |Максимальное значение для числа параллельных операций раздела в кластере. |

Общая емкость раздела кластера (как показано [на мощности .show)](../management/diagnostics.md#show-capacity)определяется `ClusterMaximumConcurrentOperations`одним свойством: .

### <a name="defaults"></a>Умолчания;

Политика емкости по умолчанию имеет следующее представление JSON:

```kusto 
{
  "IngestionCapacity": {
    "ClusterMaximumConcurrentOperations": 512,
    "CoreUtilizationCoefficient": 0.75
  },
  "ExtentsMergeCapacity": {
    "MaximumConcurrentOperationsPerNode": 1
  },
  "ExtentsPurgeRebuildCapacity": {
    "MaximumConcurrentOperationsPerNode": 1
  },
  "ExportCapacity": {
    "ClusterMaximumConcurrentOperations": 100,
    "CoreUtilizationCoefficient": 0.25
  }
}
```

> [!WARNING]
> **Редко** рекомендуется изменять политику емкости без предварительной консультации с командой Kusto.

## <a name="control-commands"></a>Команды управления

* Используйте [емкость кластерной политики .show](capacity-policy.md#show-cluster-policy-capacity) для отображать текущую политику емкости кластера.
* Используйте [емкость кластерной политики .alter](capacity-policy.md#alter-cluster-policy-capacity) для изменения политики емкости кластера.

## <a name="throttling"></a>Регулирование

Kusto ограничивает количество одновременных запросов на следующие команды:

1. Проемные произнавания (включает все команды, перечисленные [здесь)](../management/data-ingestion/index.md)
      * Предел определяется в [политике емкости.](#capacity-policy)
1. Слияния
      * Предел определяется в [политике емкости.](#capacity-policy)
1. Удаляет
      * Глобальный в настоящее время фиксируется на уровне одного на кластер.
      * Потенциал восстановления очистки используется внутренне для определения количества параллельных операций восстановления во время команд очистки (команды очистки не будут заблокированы/задушены из-за этого, но будут работать быстрее/медленнее в зависимости от возможности восстановления очистки).
1. Экспорт
      * Предел определяется в [политике емкости.](#capacity-policy)


Когда Kusto обнаружит, что некоторые операции превысили допустимую одновременные операции, Kusto ответит с 429 http-кодом.
Клиент должен повторить операцию после некоторого отступления.