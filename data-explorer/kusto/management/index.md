---
title: Сведения об управлении (управляющих командах) в Azure Data Explorer | Документация Майкрософт
description: В этой статье представлены сведения об управлении (управляющих командах) в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: 1277de1be577de7f9f6d4adf1b74460eac4a8c42
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81490350"
---
# <a name="management-control-commands-overview"></a>Сведения об управлении (управляющих командах)

В этом разделе описываются управляющие команды, которые используются при работе с Kusto.
Управляющие команды представляют собой запросы к службе для получения сведений, которые не являются данными в таблицах базы данных, или для изменения состояния службы и т. п.

## <a name="differentiating-control-commands-from-queries"></a>Отличия управляющих команд от запросов

Kusto использует три механизма для различения запросов и управляющих команд: на уровне языка, на уровне протокола и на уровне API. Это нужно для обеспечения безопасности.

На уровне языка первый символ в тексте запроса определяет, является ли он обычным запросом или управляющей командой. Управляющие команды должны начинаться с символа точки (`.`), а запрос не может начинаться с этого символа.

На уровне протокола используются разные конечные точки HTTP/HTTPS для управляющих команд и для запросов.

На уровне API используются разные функции для управляющих команд и для запросов.

## <a name="combining-queries-and-control-commands"></a>Сочетание запросов и управляющих команд

Управляющие команды могут ссылаться на запросы (но не наоборот) и на другие управляющие команды.
Поддерживаются несколько сценариев работы.

1. **AdminThenQuery.** Сначала выполняется управляющая команда, а затем ее результат (в виде временной таблицы данных) используется как входные данные для запроса.
2. **AdminFromQuery.** Сначала выполняется запрос или управляющая команда `.show`, а затем ее результат (в виде временной таблицы данных) используется как входные данные для управляющей команды.

Обратите внимание, что во всех этих случаях вся операция технически считается управляющей командой, а не запросом, а значит текст запроса должен начинаться с символа точки (`.`) и направляться в конечную точку управления соответствующей службы.

Также обратите внимание, что [инструкции запроса](../query/statements.md) отображаются в той части текста, которая относится к запросу (те есть не могут располагаться перед командой).

Метод **AdminThenQuery** обозначается одним из двух способов:

1. При применении символа вертикальной черты (`|`) запрос обрабатывает результаты управляющей команды так же, как и данные от любого другого оператора запроса.
2. При применении символа точки с запятой (`;`) результаты управляющей команды передаются с помощью специального символа с именем `$command_results`, который можно использовать в запросе любое количество раз.

Пример:

```kusto
// 1. Using pipe: Count how many tables are in the database-in-scope:
.show tables
| count

// 2. Using semicolon: Count how many tables are in the database-in-scope:
.show tables;
$command_results
| count

// 3. Using semicolon, and including a let statement:
.show tables;
let useless=(n:string){strcat(n,'-','useless')};
$command_results | extend LastColumn=useless(TableName)
```

**AdminFromQuery** обозначается сочетанием символов `<|`. В следующем примере мы сначала выполним запрос, который создаст таблицу с одним столбцом (с именем `str` и типом `string`) и одной строкой, а затем сохраним ее с именем таблицы `MyTable` в базе данных в текущем контексте:

```kusto
.set MyTable <|
let text="Hello, World!";
print str=Text
```
