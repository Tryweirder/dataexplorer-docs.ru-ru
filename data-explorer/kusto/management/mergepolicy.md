---
title: Политика объединения экстентов — Azure обозреватель данных
description: В этой статье описывается политика объединения экстентов в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/19/2020
ms.openlocfilehash: 1f0a95e095dfaa11afdea3b66597ff3d98f0449b
ms.sourcegitcommit: 3848b8db4c3a16bda91c4a5b7b8b2e1088458a3a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/16/2020
ms.locfileid: "84818622"
---
# <a name="extents-merge-policy"></a>Политика объединения экстентов

Политика слияния определяет, должен ли и как будут объединены [экстенты (сегменты данных)](../management/extents-overview.md) в кластере Kusto.

Существует два типа операций слияния: `Merge` , который перестраивает индексы и `Rebuild` , которые полностью возобновляют данные.

Оба типа операций приводят к одному экстенту, который заменяет исходные экстенты.

По умолчанию операции перестроения являются предпочтительными. Если имеются экстенты, не соответствующие критериям перестроения, будет предпринята попытка их слияния.  

> [!NOTE]
> * Добавление тегов в экстенты с помощью *различных* `drop-by` тегов приведет к невозможности слияния таких экстентов, даже если задана политика слияния. Дополнительные сведения см. в разделе [Добавление тегов к экстентам](../management/extents-overview.md#extent-tagging).
> * Экстенты, объединение тегов которых превышает длину 1 млн символов, не будут объединены.
> * [Политика сегментирования](./shardingpolicy.md) базы данных или таблицы также влияет на то, как объединяются экстенты.

## <a name="merge-policy-properties"></a>Свойства политики слияния

Политика слияния содержит следующие свойства.

* **Ровкаунтуппербаундформерже**:
    * Значения по умолчанию —
      * 0 (без ограничений) для политик, установленных до июня 2020.
      * 16 000 000 для политик, которые были установлены с 2020 июня.
    * Максимально допустимое число строк в Объединенном экстенте.
    * Применяется к операциям слияния, а не перестроению.  
* **Оригиналсизембуппербаундформерже**:
    * Значение по умолчанию — 0 (без ограничений).
    * Максимально допустимый исходный размер (в МБ) Объединенного экстента.
    * Применяется к операциям слияния, а не перестроению.  
* **Максекстентстомерже**:
    * Значение по умолчанию — 100.
    * Максимально допустимое число экстентов для слияния в одной операции.
    * Применяется к операциям MERGE.
* **Луппериод**:
    * По умолчанию — 01:00:00 (1 час).
    * Максимальное время ожидания между запуском двух последовательных итераций операций слияния или перестроения службой Управление данными.
    * Применяется к операциям слияния и перестроения.
* **Алловребуилд**:
    * Значение по умолчанию — true.
    * Определяет `Rebuild` , включены ли операции (в этом случае они являются предпочтительными для `Merge` операций).
* **Алловмерже**:
    * Значение по умолчанию — true.
    * Определяет, `Merge` включены ли операции. в этом случае они менее предпочтительны, чем `Rebuild` операции.
* **Максранжеинхаурс**:
    * Значение по умолчанию — 8.
    * Максимально допустимое различие (в часах) между двумя разными интервалами времени создания экстентов, чтобы их можно было объединить.
    * Метки времени являются созданием экстентов и не связаны с фактическими данными, содержащимися в экстентах.
    * Применяется к операциям слияния и перестроения.
    * Это значение должно быть задано в соответствии с действующей [политикой хранения](./retentionpolicy.md) *софтделетепериод*или значениями *датахотспан* [политики кэша](./cachepolicy.md) . Возьмем меньшее значение *софтделетепериод* и *датахотспан*. Установите значение *максранжеинхаурс* в диапазоне от 2-3%. См. [примеры](#maxrangeinhours-examples) .

## <a name="maxrangeinhours-examples"></a>Примеры Максранжеинхаурс

|min (Софтделетепериод (политика хранения), Датахотспан (политика кэша))|Максимальный диапазон в часах (политика слияния)|
|--------------------------------------------------------------------|---------------------------------|
|7 дней (168 часов)                                                  | 4                               |
|14 дней (336 часов)                                                 | 8                               |
|30 дней (720 часов)                                                 | 18                              |
|60 дней (1 440 часов)                                               | 36                              |
|90 дней (2 160 часов)                                               | 60                              |
|180 дней (4 320 часов)                                              | 120                             |
|365 дней (8 760 часов)                                              | 250                             |

> [!WARNING]
> Перед изменением политики объединения экстентов обратитесь к группе Azure обозреватель данных.

При создании базы данных ей присваивается значение политики слияния по умолчанию, упомянутое выше. Политика по умолчанию наследуется всеми таблицами, созданными в базе данных, если их политики явно не переопределены на уровне таблицы.

Дополнительные сведения см. [в разделе Управление командами, которые позволяют управлять политиками слияния для баз данных или таблиц](../management/merge-policy.md).
