---
title: Политика слияния размеров - Azure Data Explorer Документы Майкрософт
description: В этой статье описывается политика слияния масштабов в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/19/2020
ms.openlocfilehash: 771af22f07a770b0da1196871e9132393524aab9
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81520729"
---
# <a name="extents-merge-policy"></a>Политика слияния размеров
Политика слияния определяет, следует ли объединять [размеры и способы объединения extents (Data Shards)](../management/extents-overview.md) в кластере Kusto.

Есть 2 вкуса для `Merge` операций слияния: (который `Rebuild` восстанавливает индексы), и (который полностью перегоняет данные).

Оба вида операций приводят к единому объему, который заменяет объемы источника.

По умолчанию операции rebuild являются предпочтительными, и только при наличии каких-либо оставшихся объемов, которые не соответствуют критериям для восстановления, они пытаются быть объединены.  

*Примечания.*
- Теги, использующие *различные* `drop-by` теги, приведут к тому, что такие степени не будут объединены вместе, даже если была установлена политика слияния (см. [Пометки степени).](../management/extents-overview.md#extent-tagging)
- Масштабы, союз тегов которых превышает длину 1M символов, не будут объединены вместе.
- [Политика sharding](./shardingpolicy.md) таблицы базы данных/таблицы также имеет некоторое влияние на как размеры получают слитыми совместно.

Политика слияния содержит следующие свойства:

- **RowCountUpperBoundForMerge**:
    - Значение по умолчанию — 0.
    - Максимально допустимое количество строк объединенной степени.
    - Применяется к операциям слияния, а не к rebuild.  
- **MaxExtentsToMerge**:
    - По умолчанию до 100.
    - Максимально допустимое количество размеров, которые должны быть объединены в одну операцию.
    - Применяется к операциям слияния.
- **LoopPeriod**:
    - По умолчанию до 01:00:00 (1 час).
    - Максимальное время ожидания между началом 2 последовательных итераций операций слияния/восстановления (выполняемых службой управления данными).
    - Применяется как к операциям слияния, так и к восстановлению.
- **AllowRebuild**:
    - По умолчанию к "истинному".
    - Определяет, `Rebuild` включены ли операции (в этом `Merge` случае они предпочтительнее, чем операции).
- **AllowMerge**:
    - По умолчанию к "истинному".
    - Определяет, `Merge` включены ли операции (в этом случае `Rebuild` они менее предпочтительнее, чем операции).
- **MaxRangeInHours**:
    - По умолчанию до 8.
    - Максимальная допустимая разница (в часах) между временами создания любых 2 различных уровней, так что они все еще могут быть объединены.
    - Временные метки являются метками того, что они созданы, и не относятся к фактическим данным, содержащимся в объемах.
    - Применяется как к операциям слияния, так и к восстановлению.
    - Наилучшей практикой является корреляция этого значения с [политикой хранения](./retentionpolicy.md)данных /таблицы *SoftDeletePeriod,* или *DataHotSpan* [политики кэша](./cachepolicy.md)(нижняя часть из двух), так что она составляет от 2-3% от последнего.

**`MaxRangeInHours`Примеры:**
|мин (SoftDeletePeriod (Политика удержания), DataHotSpan (Политика кэша))|Диапазон Макса в часах (Политика слияния)
|---|---
|7 дней (168 часов)| 4
|14 дней (336 часов)| 8
|30 дней (720 часов)| 18
|60 дней (1440 часов)| 36
|90 дней (2160 часов)| 60
|180 дней (4320 часов)| 120
|365 дней (8760 часов)| 250

> [!WARNING]
> Редко рекомендуется изменять политику слияния extents без предварительной консультации с командой Kusto.

При создании базы данных она устанавливается с политикой слияния по умолчанию (политика с упомянутыми выше значениями по умолчанию), которая по умолчанию наследуется всеми таблицами, созданными в базе данных (если только их политики явно не переопределены на уровне таблицы).

Команды управления, позволяющие управлять политиками слияния для баз данных /таблиц, можно найти [здесь.](../management/merge-policy.md)