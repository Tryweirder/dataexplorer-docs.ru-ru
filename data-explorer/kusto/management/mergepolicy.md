---
title: Политика объединения экстентов — Azure обозреватель данных | Документация Майкрософт
description: В этой статье описывается политика объединения экстентов в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/19/2020
ms.openlocfilehash: f0398fbc19842b3cce7fe69c8cb61258d0aeaaa6
ms.sourcegitcommit: a562ce255ac706ca1ca77d272a97b5975235729d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/26/2020
ms.locfileid: "83867041"
---
# <a name="extents-merge-policy"></a>Политика объединения экстентов
Политика слияния определяет, должен ли и как будут объединены [экстенты (сегменты данных)](../management/extents-overview.md) в кластере Kusto.

Существует две разновидности для операций слияния: `Merge` (которая перестраивает индексы) и `Rebuild` (которая полностью заново принимает данные).

Оба вида операций приводят к одному экстенту, который заменяет исходные экстенты.

По умолчанию операции перестроения являются предпочтительными и только при наличии оставшихся экстентов, которые не соответствуют критериям для перестроения. они попытаются выполнить слияние.  

*Примечания.*
- Добавление тегов к экстентам с помощью *различных* `drop-by` тегов приведет к тому, что такие экстенты не будут объединены, даже если задана политика слияния (см. раздел [Добавление тегов в области](../management/extents-overview.md#extent-tagging)).
- Экстенты, объединение тегов которых превышает длину 1м символов, не объединяются вместе.
- [Политика сегментирования](./shardingpolicy.md) базы данных и таблицы также оказывает какое-то воздействие на объединение экстентов.

Политика слияния содержит следующие свойства.

- **Ровкаунтуппербаундформерже**:
    - Значения по умолчанию —
      - 0 (без ограничений) для политик, которые были установлены до июня 2020.
      - 16 000 000 для политик, которые были установлены с 2020 июня.
    - Максимально допустимое число строк в Объединенном экстенте.
    - Применяется к операциям слияния, а не перестроению.  
- **Оригиналсизембуппербаундформерже**:
    - Значение по умолчанию — 0 (без ограничений).
    - Максимально допустимый исходный размер (в МБ) Объединенного экстента.
    - Применяется к операциям слияния, а не перестроению.  
- **Максекстентстомерже**:
    - Значение по умолчанию — 100.
    - Максимально допустимое число экстентов для слияния в одной операции.
    - Применяется к операциям MERGE.
- **Луппериод**:
    - По умолчанию — 01:00:00 (1 час).
    - Максимальное время ожидания между запуском двух последовательных итераций операций слияния и перестроения (выполняется службой Управление данными).
    - Применяется к операциям слияния и перестроения.
- **Алловребуилд**:
    - Значение по умолчанию — true.
    - Определяет `Rebuild` , включены ли операции (в этом случае они являются предпочтительными для `Merge` операций).
- **Алловмерже**:
    - Значение по умолчанию — true.
    - Определяет `Merge` , включены ли операции (в этом случае они менее предпочтительны, чем `Rebuild` операции).
- **Максранжеинхаурс**:
    - Значение по умолчанию — 8.
    - Максимально допустимое различие (в часах) между двумя разными временами создания различных экстентов, чтобы их можно было объединить.
    - Метки времени используются для создания экстентов и не связаны с фактическими данными, содержащимися в экстентах.
    - Применяется к операциям слияния и перестроения.
    - Рекомендуется, чтобы это значение сопоставлено с *софтделетепериод* [политики хранения](./retentionpolicy.md)базы данных или таблицы, или *датахотспан* [политики кэша](./cachepolicy.md)(в нижней части этих двух), чтобы она была в диапазоне от 2-3% от второго.

**`MaxRangeInHours`примеров**

|min (Софтделетепериод (политика хранения), Датахотспан (политика кэша))|Максимальный диапазон в часах (политика слияния)|
|--------------------------------------------------------------------|---------------------------------|
|7 дней (168 часов)                                                  | 4                               |
|14 дней (336 часов)                                                 | 8                               |
|30 дней (720 часов)                                                 | 18                              |
|60 дней (1 440 часов)                                               | 36                              |
|90 дней (2 160 часов)                                               | 60                              |
|180 дней (4 320 часов)                                              | 120                             |
|365 дней (8 760 часов)                                              | 250                             |

> [!WARNING]
> Перед изменением политики объединения экстентов обратитесь к группе Azure обозреватель данных.

При создании базы данных она задается с помощью политики слияния по умолчанию (политики со значениями по умолчанию, упомянутыми выше), которая по умолчанию наследуется всеми таблицами, созданными в базе данных (если их политики явно не переопределены на уровне таблицы).

Команды управления, которые позволяют управлять политиками слияния для баз данных и таблиц, можно найти [здесь](../management/merge-policy.md).
