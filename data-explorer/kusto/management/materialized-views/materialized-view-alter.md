---
title: Изменение материализованных представлений в Azure обозреватель данных
description: В этой статье описывается, как изменять материализованные представления в обозреватель данных Azure.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: yifats
ms.service: data-explorer
ms.topic: reference
ms.date: 08/30/2020
ms.openlocfilehash: ac9fb575f46bb60e313da4fa2b3c023ac826daec
ms.sourcegitcommit: 21dee76964bf284ad7c2505a7b0b6896bca182cc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/23/2020
ms.locfileid: "91057273"
---
# <a name="alter-materialized-view"></a>. изменение материализованных представлений

Изменение [материализованных представлений](materialized-view-overview.md) может быть использовано для изменения запроса материализованных представлений с сохранением существующих данных в представлении.

Для изменения материализованных представлений требуются разрешения [администратора базы данных](../access-control/role-based-authorization.md) или администратор материализованных представлений. Дополнительные сведения см. в разделе [Управление ролями безопасности](../security-roles.md).

> [!WARNING]
> Будьте внимательны при изменении материализованных представлений. Неправильное использование может привести к утрате данных.

## <a name="syntax"></a>Синтаксис

`.alter` `materialized-view`  
[ `with` `(` *PropertyName* `=` *propertyvalue* `,` ... `)` ]  
*ViewName* `on table` *SourceTableName*  
`{`  
    &nbsp;&nbsp;&nbsp;&nbsp;*Выбор*  
`}`

## <a name="arguments"></a>Аргументы

|Аргумент|Тип|Описание
|----------------|-------|---|
|ViewName|Тип String|Имя материализованных представлений.|
|SourceTableName|Тип String|Имя исходной таблицы, в которой определено представление.|
|Запрос|Тип String|Запрос материализованных представлений.|

## <a name="properties"></a>Свойства

`dimensionTables`Является единственным поддерживаемым свойством в материализованный команде View ALTER. Это свойство должно использоваться в случае, если запрос ссылается на таблицы измерений. Дополнительные сведения см. в описании команды [. Create материализованный-View](materialized-view-create.md) .

## <a name="use-cases"></a>Варианты использования

* Добавьте агрегаты в представление — например, добавьте `avg` агрегат в `T | summarize count(), min(Value) by Id` , путем изменения запроса представления на `T | summarize count(), min(Value), avg(Value) by Id` .
* Измените операторы, отличные от оператора суммирования. Пример Tor. Отфильтруйте некоторые записи, изменив  `T | summarize arg_max(Timestamp, *) by User` на `T | where User != 'someone' | summarize arg_max(Timestamp, *) by User` .
* ALTER без изменений в запросе из-за изменения в исходной таблице. Tor пример: Предположим, что для параметра `T | summarize arg_max(Timestamp, *) by Id` не задано значение `autoUpdateSchema` (см [. раздел Create материализованный-View](materialized-view-create.md) команда). Если столбец добавлен или удален из исходной таблицы представления, представление будет автоматически отключено. Выполните команду ALTER с тем же запросом, чтобы изменить схему материализованных представлений в соответствии с новой схемой таблицы. Представление по-прежнему должно быть явно включено после изменения с помощью команды [Enable материализованные представления](materialized-view-enable-disable.md) .

## <a name="alter-materialized-view-limitations"></a>Изменение материализованных представлений

* **Изменения не поддерживаются:**
    * Изменение типа столбца не поддерживается.
    * Переименование столбцов не поддерживается. Например, при изменении представления `T | summarize count() by Id` на `T | summarize Count=count() by Id` будет удален столбец `count_` и создан новый столбец `Count` , который изначально будет содержать только значения NULL.
    * Изменения в материализованных выражениях Group By не поддерживаются.

* **Влияние на существующие данные:**
    * Изменение материализованных представлений не влияет на существующие данные.
    * Новые столбцы будут получать значения NULL для всех существующих записей, пока не получены записи, измените значения NULL.
        * Например, если представление `T | summarize count() by bin(Timestamp, 1d)` изменяется на `T | summarize count(), sum(Value) by bin(Timestamp, 1d)` , то для конкретного объекта, `Timestamp=T` для которого уже были обработаны записи до изменения представления, `sum` столбец будет содержать частичные данные. Это представление включает только записи, обработанные после выполнения инструкции ALTER.
    * При добавлении фильтров в запрос не изменяются записи, которые уже были материализованными. Фильтр будет применяться только к новым принятым записям.
