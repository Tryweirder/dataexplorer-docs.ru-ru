---
title: Диагностическая информация - Azure Data Explorer Документы Майкрософт
description: В этой статье описывается диагностическая информация в Azure Data Explorer.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: ae8efdf99b7ed91285e90defed7568d2a440240d
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81521273"
---
# <a name="diagnostic-information"></a>Диагностическая информация

Следующие команды могут быть использованы для отображения диагностической информации системы.

## <a name="show-cluster"></a>.show кластера

```kusto
.show cluster
```

Возвращает набор, имеющий один рекорд на узла, который в настоящее время активен в кластере.  

**Результаты**

|Выходной столбец |Тип |Описание 
|---|---|---|
|NodeId|Строка|Идентифицирует узел (это Azure RoleId узла, если кластер развернут в Azure). |
|Адрес|Строка |Внутренняя конечная точка, используемая кластером для межузловой связи. 
|Имя |Строка |Внутреннее имя узла (включает имя машины, имя процесса и идентификатор процесса). 
|StartTime |Дата и время |Точная дата/время (в UTC), что текущее мгновенное Kusto в узлах началось. Это может быть использовано для обнаружения, если узла (или Kusto работает на узла) был перезапущен в последнее время. 
|IsAdmin |Логическое |Является ли этот уденный в настоящее время "лидером" кластера. 
|МашинаTotalMemory  |Int64 |Количество оперативной памяти, которое имеет узла. 
|МашинаДоступнаЯПамять  |Int64 |Количество оперативной памяти, которое в настоящее время "доступно для использования" на узлах. 
|ProcessorCount  |Int32 |Количество процессоров на узлах. 
|Окружающая средаОписание  |строка |Дополнительная информация об среде узлов (например, домены обновления/неисправности), серизированная как JSON. 

**Пример**

```kusto
.show cluster
```

NodeId|Адрес|Имя|StartTime|IsAdmin|МашинаTotalMemory|МашинаДоступнаЯПамять|ProcessorCount|Окружающая средаОписание
---|---|---|---|---|---|---|---|---
Kusto.Azure.Svc_IN_1|net.tcp://100.112.150.30:23107/|Kusto.Azure.Svc_IN_4/RD000D3AB1E9BD/WaWorkerHost/3820|2016-01-15 02:00:22.6522152|True|274877435904|247797796864|16|"UpdateDomain":0, "FaultDomain":0
Kusto.Azure.Svc_IN_3|net.tcp://100.112.154.34:23107/|Kusto.Azure.Svc_IN_3/RD000D3AB1E062/WaWorkerHost/2760|2016-01-15 05:52:52.1434683|False|274877435904|258740346880|16|"UpdateDomain":1, "FaultDomain":1
Kusto.Azure.Svc_IN_2|net.tcp://100.112.128.40:23107/|Kusto.Azure.Svc_IN_2/RD000D3AB1E054/WaWorkerHost/3776|2016-01-15 07:17:18.0699790|False|274877435904|244232339456|16|"UpdateDomain":2, "FaultDomain":2
Kusto.Azure.Svc_IN_0|net.tcp://100.112.138.15:23107/|Kusto.Azure.Svc_IN_0/RD000D3AB0D6C6/WaWorkerHost/3208|2016-01-15 09:46:36.9865016|False|274877435904|238414581760|16|"UpdateDomain":3, "FaultDomain":3


## <a name="show-diagnostics"></a>.показать диагностику

```kusto
.show diagnostics
```

Возвращает информацию о состоянии здоровья кластера Kusto.
 
**Возвращает**

|Выходной параметр |Тип |Описание|
|-----------------|-----|-----------| 
|Здоровый|Логическое|Считается ли кластер здоровым или нет.
|IsScaleOutRequired|Логическое|Следует ли увеличивать размер кластера (добавить больше вычислительных узлов). 
|МашиныВсего|Int64|Количество машин в кластере.
|МашиныOffline|Int64|Количество машин, которые в настоящее время в автономном режиме (не отвечает).
|NodeLastRestartedOn|Дата и время|Последний раз любой из узлов в кластере был перезапущен.
|AdminLastElectedOn|Дата и время|В последний раз изменилось право собственности на роль кластерного админ.
|MemoryLoadFactor|Double|Объем данных, хранящаяся кластером относительно его емкости (который составляет 100,0)
|ПровизияТотуля|Int64|Общее количество объемов данных, которые кластер в настоящее время имеет во всех базах данных и во всех таблицах.
|Reserved|Int64|
|Reserved|Int64|
|InstancesTargetНацельно-ДанныеЕмкость|Int64| Количество экземпляров, необходимых для того, чтобы привести ClusterDataCapacityFactor ниже 80 (действительно только при одинаковом размере всех машин).
|TotalOriginalDataSize|Int64|Общий размер первоначально прошнутых данных
|TotalExtentSize|Int64|Общий размер хранимых данных (после сжатия и индексации)
|IngestionsLoadFactor|Double|Процент использования емкости кластерного проглатания (можно увидеть с помощью команды емкости .show)
|IngestionsInProgress|Int64|Количество операций по проглатке в настоящее время.
|ПронизыУспех|Double|Процент операций по проглатывания, успешно выполненных за последние 10 минут.
|MergesInProgress|Int64|Количество объемов слияния операций в настоящее время выполняется.
|BuildVersion|Строка|Версия программного обеспечения Kusto развернута в кластере.
|Время сборки|Дата и время|Время сборки этой версии программного обеспечения Kusto.
|ClusterDataCapacityFactor|Double|Процент использования кластерных данных. Он рассчитывается как SUM (Данные размера размера) / SUM (размер кэша SSD).
|IsDataWarmingRequired|Логическое|Внутренний: следует ли запускать запросы на потепление кластера (для передачи данных в локальный кэш SSD). 
|DataWarminglastrunon|Дата и время|Последний раз данные .теплых были запущены на кластере
|СлиянияSuccessRate|Double|Процент слияний операций, успешно выполненных за последние 10 минут.
|NotHealthyReason|Строка|Строка с указанием причины нездорового кластера 
|IsВниманиеТребуется|Логическое|Требует ли кластера внимания группы операций
|ВниманиеТребуетсяПричина|Строка|Строка с указанием причины кластера, требующего внимания
|ProductVersion|Строка|Строка с информацией о продукте (филиал, версия и т.д.)
|Неудачныеоперации|Int64|Количество неудачных операций по проглатывания за последние 10 минут
|Неудачныеоперации слияния|Int64|Количество неудачных операций слияния за 1 час
|MaxExtentsInSingleTable|Int64|Максимальное количество уровней в таблице (TableWithMaxExtents)
|ТаблицаСМаксПробы|Строка|Таблица с максимальным количеством размеров (MaxExtentsInSingleTable)
|WarmExtentSize|Double|Общий размер размеров в горячем кэше
|NumberOfDatabases|Int32|Количество баз данных в кластере

## <a name="show-capacity"></a>.show емкость 

```kusto
.show capacity
```

Возвращает расчет для расчетной емкости кластера для каждого ресурса. 
 
**Результаты**

|Выходной параметр |Тип |Описание 
|---|---|---
|Ресурс |Строка |Имя ресурса. 
|Итог |Int64 |Сумма общих ресурсов типа 'Ресурс' доступных (например, количество одновременных проглативаемых) 
|Потреблено |Int64 |Количество ресурсов типа 'Ресурс' потребляется прямо сейчас 
|Осталось |Int64 |Количество остающихся ресурсов типа 'Ресурс' 
 
**Пример**

|Ресурс |Итог |Потреблено |Осталось 
|---|---|---|---
|глотания |576 |1 |575 

## <a name="show-operations"></a>.show операции 

Возвращает таблицу со всеми административными операциями с момента избрания нового узла Админ. 

|||
|---|---| 
|`.show` `operations`              |Возвращает все операции, которые кластер обработал или обрабатывает 
|`.show``operations` *ОперацияId*|Возвращает состояние операции для определенного идентификатора 
|`.show``operations` `,` *OperationId2* `,` *OperationId1* ОперацияId1 ОперацияId2 ...) `(`|Возвращает статус операций для определенных идонов

**Результаты**
 
|Выходной параметр |Тип |Описание 
|---|---|---
|Идентификатор |Строка |Идентификационный изопераций. 
|Операция |Строка |Админ команды псевдоним 
|NodeId |Строка |Если у команды есть удаленное выполнение (например, DataIngestPull) - NodeId будет содержать идентификатор удаленного узла выполнения 
|Startedon |Дата и время |Дата/время (в UTC) при начале операции 
|LastUpdatedon |Дата и время |Дата/время (в UTC), когда операция последнего обновления (может быть либо шагом внутри операции, либо шагом завершения) 
|Duration |Дата и время |TimeSpan между LastUpdateOn и StartedOn 
|Состояние |Строка |Состояние командования: могут иметь значения "InProgress", "Завершено" или "Не удалось" 
|Status |Строка |Дополнительная строка справки, в которой хранятся ошибки для сбойных операций 
 
**Пример**
 
|Идентификатор |Операция |идентификатор узла; |Запущен на |Последнее обновление на |Duration |Состояние |Status 
|--|--|--|--|--|--|--|--
|3827def6-0773-4f2a-859e-c02cf395deaf |СхемаШоу | |2015-01-06 08:47:01.0000000 |2015-01-06 08:47:01.0000000 |0001-01-01 00:00:00.0000000 |Завершено | 
|841fafa4-076a-4cba-9300-4836da0d9c75 |DataIngestPull |Kusto.Azure.Svc_IN_1 |2015-01-06 08:47:02.0000000 |2015-01-06 08:48:19.0000000 |0001-01-01 00:01:17.0000000 |Завершено | 
|e198c519-5263-4629-a158-8d68f7a1022f |ОперацииПоказать | |2015-01-06 08:47:18.0000000 |2015-01-06 08:47:18.0000000 |0001-01-01 00:00:00.0000000 |Завершено | 
|a9f287a1-f3e6-4154-ad18-b86438da0929 |ПровизияКап | |2015-01-11 08:41:01.0000000 |0001-01-01 00:00:00.0000000 |0001-01-01 00:00:00.0000000 |InProgress | 
|9edb3ecc-f4b4-4738-87e1-648eed2bd998 |DataIngestPull | |2015-01-10 14:57:41.0000000 |2015-01-10 14:57:41.0000000 |0001-01-01 00:00:00.0000000 |Ошибка |Коллекция была изменена; операция перечисления может не выполняться. 