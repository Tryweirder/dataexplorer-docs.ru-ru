---
title: Параметры на панелях мониторинга обозреватель данных Azure
description: Используйте параметры в качестве стандартного блока для фильтров панели мониторинга.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: gabil
ms.service: data-explorer
ms.topic: how-to
ms.date: 06/09/2020
ms.openlocfilehash: 4e11ccd1c775fa2cae2e25f7cf1bd8b802a11567
ms.sourcegitcommit: 95527c793eb873f0135c4f0e9a2f661ca55305e3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2020
ms.locfileid: "90534006"
---
# <a name="use-parameters-in-azure-data-explorer-dashboards"></a>Использование параметров на панелях мониторинга обозреватель данных Azure

Параметры используются в качестве стандартных блоков для фильтров панели мониторинга на панелях мониторинга обозреватель данных Azure. Они управляются в области панели мониторинга и могут быть добавлены в запросы для фильтрации данных, представленных базовым визуальным объектом. Запрос может использовать один или несколько параметров. В этом документе описывается создание и использование параметров и связанных фильтров на панелях мониторинга обозреватель данных Azure. 

> [!NOTE]
> Управление параметрами доступно в редакторах панелей мониторинга в режиме редактирования.

## <a name="prerequisites"></a>Предварительные требования

[Визуализация данных с помощью панелей мониторинга обозреватель данных Azure](azure-data-explorer-dashboards.md)

## <a name="view-parameters-list"></a>Просмотр списка параметров

Нажмите кнопку **Параметры** в верхней части панели мониторинга, чтобы просмотреть список всех параметров панели мониторинга.

:::image type="content" source="media/dashboard-parameters/dashboard-icons.png" alt-text="Кнопка параметров в верхней части панели мониторинга":::

## <a name="create-a-parameter"></a>Создание параметра

Чтобы создать параметр, нажмите кнопку **создать параметр** в верхней части правой панели.

:::image type="content" source="media/dashboard-parameters/new-parameter-button.png" alt-text="Кнопка "создать параметры"":::

### <a name="properties"></a>Свойства

1. На панели **Добавить параметр** настройте свойства, описанные ниже.

:::image type="content" source="media/dashboard-parameters/properties.png" alt-text="Добавление свойств параметра":::

|Поле  |Описание |
|---------|---------|
|**Отображаемое имя параметра**    |   Имя параметра, отображаемого на панели мониторинга или в карточке редактирования.      |
|**Тип параметра**    |Один из следующих параметров:<ul><li>**Один выбор**: в фильтре в качестве входных данных для параметра можно выбрать только одно значение.</li><li>**Выбор нескольких элементов**. в качестве входных данных для параметра можно выбрать одно или несколько значений в фильтре.</li><li>**Диапазон времени**: позволяет создавать дополнительные параметры для фильтрации запросов и панелей мониторинга на основе времени. По умолчанию у каждой панели мониторинга есть выбор диапазона времени.</li><li>**Бесплатный текст**: значения в фильтре не заполнены. Пользователь может ввести значение или скопировать или вставить значение в текстовое поле. Фильтр сохраняет последние использованные значения.</li></ul>    |
|**Имя переменной**     |   Имя параметра, который будет использоваться в запросе.      |
|**Data type**    |    Тип данных значений параметров.     |
|**Закрепить как фильтр панели мониторинга**   |   Закрепите фильтр на основе параметров на панели мониторинга или открепите его от панели мониторинга.       |
|**Source**     |    Источник значений параметра: <ul><li>**Исправленные значения**. Вы вручную предоставили статические значения фильтра. </li><li>**Запрос**: динамически введенные значения с помощью запроса ККЛ.  </li></ul>    |
|**Добавить значение "выделить все"**    |   Применимо только к одиночному выделению и нескольким типам параметров выбора. Используется для получения данных для всех значений параметров. Это значение должно быть встроено в запрос для предоставления функциональных возможностей. Дополнительные примеры создания таких запросов см. в разделе [Использование параметра, основанного на запросах с множественным выбором](#use-the-multiple-selection-query-based-parameter) .     |

## <a name="manage-parameters-in-parameter-card"></a>Управление параметрами в карточке параметров

В меню с тремя точками на карточке параметра выберите **изменить**, **дублировать параметр**, **Удалить**или **открепить от панели**мониторинга / **закрепить на панели мониторинга**.

На карточке параметров можно просмотреть следующие индикаторы:
* Отображаемое имя параметра 
* Имена переменных 
* Число запросов, в которых использовался параметр
* Закрепление или открепление состояния на панели мониторинга

:::image type="content" source="media/dashboard-parameters/modify-parameter.png" alt-text="Изменение параметров":::

## <a name="use-parameters-in-your-query"></a>Использование параметров в запросе

Параметр должен использоваться в запросе, чтобы сделать фильтр применимым для визуального элемента запроса. После определения параметры можно увидеть на странице **запроса** > фильтр верхней панели и в запросе IntelliSense.

:::image type="content" source="media/dashboard-parameters/query-intellisense.png" alt-text="Просмотр параметров на верхней панели и IntelliSense":::

> [!NOTE]
> Если параметр не используется в запросе, фильтр остается отключенным. После добавления параметра в запрос фильтр становится активным.

## <a name="use-different-parameter-types"></a>Использовать другие типы параметров

Поддерживаются несколько типов параметров панели мониторинга. В следующих примерах описывается использование параметров в запросе для различных типов параметров. 

### <a name="use-the-default-time-range-parameter"></a>Использовать параметр временного диапазона по умолчанию

По умолчанию у каждой панели мониторинга есть параметр *диапазона времени* . Он отображается на панели мониторинга как фильтр только при использовании в запросе. Используйте ключевые слова параметров `_startTime` и, `__endTime` чтобы использовать в запросе параметр по умолчанию, как показано в следующем примере:

```kusto
EventsAll
| where Repo.name has 'Microsoft'
| where CreatedAt between (_startTime.._endTime)
| summarize TotalEvents = count() by RepoName=tostring(Repo.name)
| top 5 by TotalEvents
```

После сохранения фильтр диапазона времени отображается на панели мониторинга. Теперь его можно использовать для фильтрации данных на карточке. Вы можете отфильтровать панель мониторинга, выбрав ее в раскрывающемся списке: **временной диапазон** (за последние x минут/часов/дней) или **Пользовательский диапазон времени**.

:::image type="content" source="media/dashboard-parameters/time-range.png" alt-text="Фильтрация с использованием настраиваемого диапазона времени":::

### <a name="use-the-single-selection-fixed-value-parameter"></a>Использовать параметр фиксированного значения одиночного выбора

Параметры фиксированного значения основываются на предопределенных значениях, указанных пользователем. В следующем примере показано, как создать один параметр фиксированного значения с одним выбором.

#### <a name="create-the-parameter"></a>Создание параметра

1. Выберите **Параметры** , чтобы открыть панель **Параметры** , и выберите **новый параметр**.

1. Заполните сведения следующим образом:

    * **Отображаемое имя параметра**: Company
    * **Тип параметра**: одиночный выбор
    * **Имя переменной**: `_company`
    * **Тип данных**: строка
    * **Закрепить как фильтр панели мониторинга**: флажок установлен
    * **Источник**: фиксированные значения
    
    В этом примере используйте следующие значения:
    
    | Значение      | Отображаемое имя параметра |
    |------------|------------------------|
    | ими    | Google                 |
    | NNTP | Microsoft              |
    | Facebook  | Facebook               |
    | AWS       | AWS                    |
    | Uber      | Uber                   |
    
    * Добавить значение " **выделить все** ": не отмечено
    * Значение по умолчанию: Microsoft

1. Нажмите кнопку **Готово** , чтобы создать параметр.

Параметры можно увидеть в области побочные **Параметры** , но сейчас они не используются в каких либо визуальных элементах.

:::image type="content" source="media/dashboard-parameters/start-end-side-pane.png" alt-text="Параметры времени окончания времени начала в боковой области":::

#### <a name="use-the-parameter"></a>Использование параметра

1. Выполните пример запроса с помощью параметра новой *компании* , используя `_company` имя переменной:

    ```kusto
    EventsAll
    | where CreatedAt > ago(7d)
    | where Type == "WatchEvent"
    | where Repo.name has _company
    | summarize WatchEvents=count() by RepoName = tolower(tostring(Repo.name))
    | top 5 by WatchEvents
    ```

    Новый параметр отображается в списке параметров в верхней части панели мониторинга.

1. Выберите другие значения, чтобы обновить визуальные элементы.

    :::image type="content" source="media/dashboard-parameters/top-five-repos.png" alt-text="пять ведущих результатов репозиториев":::

### <a name="use-the-multiple-selection-fixed-value-parameters"></a>Использование параметров фиксированного значения с множественным выбором

Параметры фиксированного значения основываются на предопределенных значениях, указанных пользователем. В следующем примере показано, как создать и использовать параметр фиксированного значения с множественным выбором.

#### <a name="create-the-parameters"></a>Создание параметров

1. Выберите **Параметры** , чтобы открыть панель **Параметры** , и выберите **новый параметр**.

1. Заполните сведения, указанные в поле [использовать параметр фиксированного значения одиночного выбора](#use-the-single-selection-fixed-value-parameter) со следующими изменениями:

    * **Отображаемое имя параметра**: компании
    * **Тип параметра**: множественный выбор
    * **Имя переменной**: `_companies`

1. Нажмите кнопку **Готово** , чтобы создать параметр.

Новые параметры можно увидеть в области побочные **Параметры** , но сейчас они не используются в каких либо визуальных элементах.

:::image type="content" source="media/dashboard-parameters/companies-side-pane.png" alt-text="Боковая область компании":::

#### <a name="use-the-parameters"></a>Использование параметров 

1. Запустите пример запроса с помощью параметра New *компании* , используя `_companies` переменную.

    ```kusto
    EventsAll
    | where CreatedAt > ago(7d)
    | extend RepoName = tostring(Repo.name)
    | where Type == "WatchEvent"
    | where RepoName has_any (_companies)
    | summarize WatchEvents=count() by RepoName
    | top 5 by WatchEvents
    ```

    Новый параметр отображается в списке параметров в верхней части панели мониторинга.  

1. Выберите одно или несколько различных значений для обновления визуальных элементов.

    :::image type="content" source="media/dashboard-parameters/select-companies.png" alt-text="Выбор компаний":::

### <a name="use-the-single-selection-query-based-parameter"></a>Использование единственного параметра на основе запроса

Значения параметров на основе запроса извлекаются во время загрузки панели мониторинга путем выполнения запроса параметра. В следующем примере показано, как создать и использовать один параметр на основе запроса.

#### <a name="create-the-parameter"></a>Создание параметра

1. Выберите **Параметры** , чтобы открыть панель **Параметры** , и выберите **новый параметр**.

2. Заполните сведения, указанные в поле [использовать параметр фиксированного значения одиночного выбора](#use-the-single-selection-fixed-value-parameter) со следующими изменениями:

    * **Отображаемое имя параметра**: событие
    * **Имя переменной**: `_event`
    * **Источник**: запрос
    * **Источник данных**: GitHub
    * Выберите **Добавить запрос** и введите следующий запрос. Нажмите кнопку **Готово**.

    ```kusto
    EventsAll
    | distinct Type
    | order by Type asc
    ```

    * **Значение**: тип
    * **Отображаемое имя**: тип
    * **Значение по умолчанию**: ватчевент

1. Нажмите кнопку **Готово** , чтобы создать параметр.

#### <a name="use-a-parameter-in-the-query"></a>Использование параметра в запросе

1. Следующий образец запроса с новым параметром события использует `_ event` переменную:

    ``` kusto
    EventsAll
    | where Type has (_event)
    | summarize count(Id) by Type, bin(CreatedAt,7d)
    ```

    Новый параметр отображается в списке параметров в верхней части панели мониторинга. 

1. Выберите другие значения, чтобы обновить визуальные элементы.

### <a name="use-the-multiple-selection-query-based-parameter"></a>Использование параметра, основанного на запросе с множественным выбором

Значения параметров на основе запроса производятся во время загрузки панели мониторинга путем выполнения заданного пользователем запроса. В следующем примере показано, как можно создать параметр на основе запроса с множественным выбором:

#### <a name="create-a-parameter"></a>Создание параметра

1. Выберите **Параметры** , чтобы открыть панель **Параметры** , и выберите **новый параметр**.

1. Заполните сведения, указанные в поле [использовать параметр фиксированного значения одиночного выбора](#use-the-single-selection-fixed-value-parameter) со следующими изменениями:

    * **Отображаемое имя параметра**: события
    * **Тип параметра**: множественный выбор
    * **Имя переменной**: `_events`

1. Нажмите кнопку **Готово** , чтобы создать параметр.

#### <a name="use-parameters-in-the-query"></a>Использование параметров в запросе

1. В следующем примере запроса используется новый параметр *Events* с помощью `_events` переменной.

    ``` kusto
    EventsAll
    | where Type in (_event) or isempty(_events)
    | summarize count(Id) by Type, bin(CreatedAt,7d)
    ```

    > [!NOTE]
    > В этом примере используется параметр **выбрать все** , который проверяет наличие пустых значений с помощью `isempty()` функции.

    Новый параметр отображается в списке параметров в верхней части панели мониторинга. 

1. Выберите одно или несколько различных значений для обновления визуальных элементов.

### <a name="use-the-free-text-parameter"></a>Использование параметра Free Text

Параметры с произвольным текстом не содержат значений. Они позволяют ввести собственное значение.

#### <a name="create-the-parameter"></a>Создание параметра

1. Выберите **Параметры** , чтобы открыть **панель Параметры** , и выберите **новый параметр**.
1. Заполните сведения следующим образом:
    * **Отображаемое имя параметра**: Company
    * **Тип параметра**: свободный текст
    * **Имя переменной**: _company
    * **Тип данных**: строка
    * **Закрепить как фильтр панели мониторинга**: флажок установлен
    * **Значение по умолчанию**: нет значения по умолчанию

#### <a name="use-parameters-in-the-query"></a>Использование параметров в запросе

1. Выполните пример запроса с помощью параметра новой *компании* , используя `_company` имя переменной:

    ```kusto
    EventsAll
    | where CreatedAt > ago(7d)
    | where Type == "WatchEvent"
    | where Repo.name has _company
    | summarize WatchEvents=count() by RepoName = tolower(tostring(Repo.name))
    | top 5 by WatchEvents
    ```

Новый параметр теперь отображается в списке параметров в верхней части панели мониторинга.

## <a name="use-filter-search-for-single-and-multiple-selection-filters"></a>Использовать фильтр поиска для одного и нескольких фильтров выбора

В одном и нескольких фильтрах выбора введите нужное значение. В результатах поиска фильтра будут представлены только недавно полученные значения, соответствующие поисковому слову.

## <a name="next-steps"></a>Next Steps

* [Настройка визуальных элементов панели мониторинга](dashboard-customize-visuals.md)
* [Запрос данных в обозреватель данных Azure](web-query-data.md) 
