---
title: Руководство по Визуализация данных из Azure Data Explorer в Power BI
description: В этом руководстве вы узнаете, как подключиться к обозревателю данных Azure с помощью Power BI и визуализировать ваши данные.
author: orspod
ms.author: orspodek
ms.reviewer: gabil
ms.service: data-explorer
ms.topic: tutorial
ms.date: 06/02/2020
ms.openlocfilehash: bde567a3c41a226ca0a8304d7ab4ed42f3fa65bf
ms.sourcegitcommit: 8953d09101f4358355df60ab09e55e71bc255ead
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2020
ms.locfileid: "84420923"
---
# <a name="tutorial-visualize-data-from-azure-data-explorer-in-power-bi"></a>Руководство по Визуализация данных из Azure Data Explorer в Power BI

Обозреватель данных Azure — это быстрая и высокомасштабируемая служба для изучения данных журналов и телеметрии. Power BI — это решение бизнес-аналитики, позволяющее визуализировать данные и делиться результатами с коллегами. В этом руководстве вы сначала научитесь отображать визуальные элементы в обозревателе данных Azure. Затем вы подключитесь к обозревателю данных Azure с помощью Power BI, создадите отчет на основе примера данных и опубликуете отчет в службе Power BI.

Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/) Azure, прежде чем начинать работу. Если вы не зарегистрированы в Power BI Pro, [зарегистрируйтесь для получения бесплатной пробной версии](https://app.powerbi.com/signupredirect?pbi_source=web), прежде чем начать.

В этом руководстве описано следующее:

> [!div class="checklist"]
> * Отображение визуальных элементов в обозревателе данных Azure
> * Подключение к обозревателю данных Azure в Power BI Desktop
> * Работа с данными в Power BI Desktop
> * Создание отчета с визуальными элементами
> * Публикация и совместное использование отчета

## <a name="prerequisites"></a>Предварительные требования

В дополнение к подпискам Azure и Power BI для работы с этим руководством вам потребуется следующее:

* [Тестовый кластер и база данных](create-cluster-database-portal.md)

* [образец данных StormEvents](ingest-sample-data.md); [!INCLUDE [data-explorer-storm-events](includes/data-explorer-storm-events.md)]

* [Power BI Desktop](https://powerbi.microsoft.com/get-started/) (выберите **Скачать бесплатно**);

## <a name="render-visuals-in-azure-data-explorer"></a>Отображение визуальных элементов в обозревателе данных Azure

Прежде чем подробно рассматривать Power BI, давайте узнаем, как отображать визуальные элементы в обозревателе данных Azure. Это очень удобно для быстрого анализа.

1. Войдите на портал [https://dataexplorer.azure.com](https://dataexplorer.azure.com).

1. В области слева выберите тестовую базу данных, содержащую пример данных StormEvents.

1. Вставьте следующий запрос в окне справа и выберите **Выполнить**.

    ```Kusto
    StormEvents
    | summarize event_count=count() by State
    | where event_count > 1800
    | project State, event_count
    | sort by event_count
    | render columnchart
    ```

    Этот запрос подсчитывает события погоды по штату. После этого отображается гистограмма всех штатов с более чем 1800 погодных событий.

    ![Гистограмма событий](media/visualize-power-bi/events-column-chart.png)

1. Вставьте следующий запрос в окне справа и выберите **Выполнить**.

    ```Kusto
    StormEvents
    | where State == "WASHINGTON" and StartTime >= datetime(2007-07-01) and StartTime <= datetime(2007-07-31)
    | summarize StormCount = count() by EventType
    | render piechart
    ```

    Этот запрос подсчитывает события погоды по типу для июля в штате Вашингтон. Затем он отображает круговую диаграмму с указанием процентов каждого типа события.

    ![Круговая диаграмма событий](media/visualize-power-bi/events-pie-chart.png)

Пришло время изучить Power BI, однако с визуальными элементами в обозревателе данных Azure можно решать гораздо больше задач.

## <a name="connect-to-azure-data-explorer"></a>Подключение к обозревателю данных Azure

Теперь вы подключитесь к обозревателю данных Azure в Power BI Desktop.

1. В Power BI Desktop на вкладке **Главная** выберите **Получение данных**, а затем — **Дополнительно**.

    ![Получение данных](media/visualize-power-bi/get-data-more.png)

1. Выполните поиск по запросу *Azure Data Explorer*, выберите **Azure Data Explorer** и нажмите **Подключиться**.

    ![Поиск и получение данных](media/visualize-power-bi/search-get-data.png)

1. На странице **Предварительная версия соединителя** нажмите кнопку **Продолжить**.

1. На следующей странице укажите имя тестового кластера и базы данных. Он должен быть указан в формате `https://<ClusterName>.<Region>.kusto.windows.net`. Введите *StormEvents* для имени таблицы. Оставьте все остальные параметры со значениями по умолчанию и выберите **ОК**.

    ![Кластер, база данных, параметры таблицы](media/visualize-power-bi/cluster-database-table.png)

1. На экране предварительного просмотра данных выберите **Изменить**.

    Таблица откроется в редакторе запросов Power, где можно изменить строки и столбцы перед импортом данных.

## <a name="work-with-data-in-power-bi-desktop"></a>Работа с данными в Power BI Desktop

Теперь, когда у вас есть подключение к обозревателю данных Azure, можно редактировать данные в Power Query Editor. Удалите строки со значениями null в столбце **BeginLat** и удалите столбец JSON **StormSummary** полностью. Это простые операции, однако при импорте данных также можно выполнять сложные операции.

1. Щелкните стрелку рядом со столбцом **BeginLat**, снимите флажок **null** и нажмите **OK**.

    ![Фильтрация столбцов](media/visualize-power-bi/filter-column.png)

1. Щелкните правой кнопкой мыши заголовок столбца **StormSummary** и выберите пункт **Удалить**.

    ![Удаление столбца](media/visualize-power-bi/remove-column.png)

1. В области **ПАРАМЕТРЫ ЗАПРОСА** измените имя с *Query1* на *StormEvents*.

    ![Изменение имени запроса](media/visualize-power-bi/query-name.png)

1. На вкладке **Главная** в ленте выберите **Закрыть и применить**.

    ![Закрыть и применить](media/visualize-power-bi/close-apply.png)

    Power Query применяет изменения, а затем импортирует пример данных в *модель данных*. В следующих шагах показано, как расширить эту модель. Опять же это лишь простой пример, чтобы дать общее представление о возможностях инструмента.

1. В левой части главного окна выберите представление данных.

    ![Представление данных](media/visualize-power-bi/data-view.png)

1. На вкладке ленты **Моделирование** выберите **Новый столбец**.

    ![Новый столбец](media/visualize-power-bi/new-column.png)

1. Введите следующую формулу выражений анализа данных (DAX) в строке формул и нажмите "Ввод".

    ```DAX
    DurationHours = DATEDIFF(StormEvents[StartTime], StormEvents[EndTime], hour)
    ```

    ![Строка формул](media/visualize-power-bi/formula-bar.png)

    Эта формула создает столбец *DurationHours*, который вычисляет, сколько часов продолжалась каждое событие погоды. Используйте этот столбец в визуальном элементе в следующем разделе.

1. Перейдите к правой части таблицы, чтобы просмотреть столбец.

## <a name="create-a-report-with-visuals"></a>Создание отчета с визуальными элементами

Теперь, когда данные импортированы и модель данных усовершенствована, пришло время создать отчет с использованием визуальных элементов. Столбчатая диаграмма добавляется с учетом длительности событий; кроме того, добавляется карта с отображением урона посевам.

1. В левой части окна выберите представление отчетов.

    ![Представление отчетов](media/visualize-power-bi/report-view.png)

1. В области **ВИЗУАЛИЗАЦИИ** выберите гистограмму с кластерами.

    ![Добавление гистограммы](media/visualize-power-bi/add-column-chart.png)

    Пустая диаграмма добавляется на холст.

    ![Пустая диаграмма](media/visualize-power-bi/blank-chart.png)

1. В списке **ПОЛЯ** выберите **DurationHours** и **State**.

    ![Выбор полей](media/visualize-power-bi/select-fields.png)

    Теперь у вас есть диаграмма, показывающая общее количество часов событий погоды по штатам на протяжении года.

    ![Гистограмма длительности](media/visualize-power-bi/duration-column-chart.png)

1. Щелкните в любом месте на холсте за пределами гистограммы.

1. В области **ВИЗУАЛИЗАЦИИ** выберите карту.

    ![Добавление карты](media/visualize-power-bi/add-map.png)

1. В списке **ПОЛЯ** выберите **CropDamage** и **State**. Измените размер карты, чтобы хорошо видеть штаты США.

    ![Карта урона посевам](media/visualize-power-bi/crop-damage-map.png)

    Размер пузырьков отражает урон посевам (в долларовом эквиваленте). Наведите мышь на эти пузырьки, чтобы увидеть подробные сведения.

1. Перемещайте и изменяйте размер визуальных элементов, чтобы ваш отчет выглядел следующим образом.

    ![Готовый отчет](media/visualize-power-bi/finished-report.png)

1. Сохраните отчет с именем *storm-events.pbix*.

## <a name="publish-and-share-the-report"></a>Публикация и совместное использование отчета

До сих пор вы выполняли в Power BI локальные операции с использованием Power BI Desktop. Теперь вы опубликуете отчет в службе Power BI, где сможете поделиться им с другими пользователями.

1. В Power BI Desktop на вкладке **Главная** на ленте выберите **Опубликовать**.

    ![Кнопка "Опубликовать"](media/visualize-power-bi/publish-button.png)

1. Если вы еще не вошли Power BI, выполните вход в систему.

1. Выберите **Моя рабочая область**, затем **Выбрать**.

    ![Выбор рабочей области](media/visualize-power-bi/select-workspace.png)

1. По завершении публикации выберите **Открыть storm-events.pbix в Power BI**.

    ![Публикация выполнена](media/visualize-power-bi/publishing-succeeded.png)

    Отчет откроется в службе с теми же визуальными элементами и макетом, которые были заданы в Power BI Desktop.

1. В правом верхнем углу отчета выберите **Поделиться**.

    ![Кнопка "Поделиться"](media/visualize-power-bi/share-button.png)

1. На экране **Общий доступ к отчету** добавьте коллегу из своей организации, примечание и выберите **Поделиться**.

    ![Общий доступ к отчету](media/visualize-power-bi/share-report.png)

    Если у вашего коллеги есть необходимые разрешения, он (она) сможет осуществлять доступ к предоставленному отчету.

## <a name="clean-up-resources"></a>Очистка ресурсов

Если вы не хотите сохранять созданный отчет, просто удалите файл *storm-events.pbix*. Если вы хотите удалить опубликованный отчет, выполните следующие действия.

1. В разделе **Моя рабочая область** прокрутите вниз до раздела **Отчеты** и найдите **storm-events**.

1. Нажмите кнопку с многоточием ( **...** ) рядом с полем **storm-events**, а затем выберите **УДАЛИТЬ**.

    ![Удаление отчета](media/visualize-power-bi/remove-report.png)

1. Подтвердите удаление.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Написание запросов](write-queries.md)
