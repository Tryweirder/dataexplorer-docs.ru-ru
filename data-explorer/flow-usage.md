---
title: Примеры использования соединителя Azure обозреватель данных для автоматического управления (Предварительная версия)
description: Ознакомьтесь с некоторыми распространенными примерами использования соединителя Azure обозреватель данных для автоматизации управления питанием.
author: orspod
ms.author: orspodek
ms.reviewer: dorcohen
ms.service: data-explorer
ms.topic: how-to
ms.date: 03/15/2020
ms.openlocfilehash: a9f2be17e02103a64fa31a10bc6195076addb1fc
ms.sourcegitcommit: f354accde64317b731f21e558c52427ba1dd4830
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2020
ms.locfileid: "88874534"
---
# <a name="usage-examples-for-azure-data-explorer-connector-to-power-automate-preview"></a>Примеры использования соединителя Azure обозреватель данных для автоматического управления (Предварительная версия)

Соединитель потока обозреватель данных Azure позволяет обозреватель данных Azure использовать возможности потока [Microsoft Power автоматизиру](https://flow.microsoft.com/). Запросы и команды Kusto можно выполнять автоматически в рамках запланированной или активируемой задачи. Эта статья содержит несколько распространенных примеров использования соединителей потока.

Дополнительные сведения см. в статье о [соединителе потока обозреватель данных Azure (Предварительная версия)](flow.md).

## <a name="flow-connector-and-your-sql-database"></a>Соединитель Flow и база данных SQL

Используйте соединитель Flow для запроса данных и их агрегирования в базе данных SQL.

> [!Note]
> Используйте соединитель Flow только для небольших объемов выходных данных. Операция вставки SQL выполняется отдельно для каждой строки. 

![Снимок экрана с запросом данных с помощью соединителя потока](./media/flow-usage/flow-sqlexample.png)

> [!IMPORTANT]
> В поле **имя кластера** введите URL-адрес кластера.

## <a name="push-data-to-a-microsoft-power-bi-dataset"></a>Принудительная отправка данных в набор данных Microsoft Power BI

Соединитель потока можно использовать с соединителем Power BI, чтобы отправлять данные из запросов Kusto в Power BIные наборы данных потоковой передачи.

1. Создание нового **запроса на выполнение и вывод результатов** .
1. Выберите **Новый шаг**.
1. Выберите **Добавить действие**и выполните поиск по запросу Power BI.
1. Выберите **Power BI**  >  **Добавить строки в набор данных**. 

    ![Снимок экрана соединителя Power BI](./media/flow-usage/flow-powerbiconnector.png)

1. Введите **рабочую область**, **набор данных**и **таблицу** , в которую будут отправлены данные.
1. В диалоговом окне Динамическое содержимое добавьте **полезные данные** , содержащие схему набора данных и соответствующие результаты запроса Kusto.

    ![Снимок экрана Power BI полей](./media/flow-usage/flow-powerbifields.png)

Поток автоматически применяет Power BI действие к каждой строке таблицы результатов запроса Kusto. 

![Снимок экрана Power BI действия для каждой строки](./media/flow-usage/flow-powerbiforeach.png)

## <a name="conditional-queries"></a>Условные запросы

Результаты запросов Kusto можно использовать в качестве входных или условий для следующих действий последовательности.

В следующем примере мы запрашиваем Kusto для инцидентов, произошедших за последний день. Для каждого разрешенного инцидента публикуется сообщение временного резерва и создается push-уведомление.
Для каждого инцидента, который все еще активен, мы запрашиваете Kusto для получения дополнительных сведений о подобных инцидентах. Она отправляет эти сведения как сообщение электронной почты и открывает связанную задачу в Azure DevOps Server.

Чтобы создать подобный поток, выполните следующие инструкции:

1. Создание нового **запроса на выполнение и вывод результатов** .
1. Выберите **New step**  >  **элемент управления**"новое условие шага".
1. В окне динамического содержимого выберите параметр, который необходимо использовать в качестве условия для следующих действий.
1. Выберите тип *связи* и *значение* , чтобы задать определенное условие для конкретного параметра.

    :::image type="content" source="./media/flow-usage/flow-condition.png" alt-text="Использование условий потока на основе результатов запроса Kusto для определения следующего действия потока, обозреватель данных Azure" lightbox="./media/flow-usage/flow-condition.png#lightbox":::

    Поток применяет это условие к каждой строке таблицы результатов запроса.
1. Добавьте действия для, когда условие имеет значение true, и значение false.

    :::image type="content" source="./media/flow-usage/flow-conditionactions.png" alt-text="Добавление действий, когда условие имеет значение true или false, условия потока на основе результатов запроса Kusto, Azure обозреватель данных" lightbox="./media/flow-usage/flow-conditionactions.png#lightbox":::

Можно использовать результирующие значения из запроса Kusto в качестве входных данных для следующих действий. Выберите результирующие значения в окне динамического содержимого.
В следующем примере мы добавим действие создания **сообщения о временной резерве** и в **Visual Studio — создать новое действие рабочего элемента** , содержащее данные из запроса Kusto.

![Снимок экрана: действие сообщения о временной резерве](./media/flow-usage/flow-slack.png)

![Снимок экрана действия Visual Studio](./media/flow-usage/flow-visualstudio.png)

В этом примере, если инцидент по-прежнему активен, снова запросите Kusto, чтобы получить сведения о том, как инциденты из того же источника были решены в прошлом.

![Снимок экрана запроса условия потока](./media/flow-usage/flow-conditionquery.png)

> [!IMPORTANT]
> В поле **имя кластера** введите URL-адрес кластера.

Визуализируйте эту информацию как круговую диаграмму и отправьте ее по электронной почте команде.

![Снимок экрана сообщения с условием потока](./media/flow-usage/flow-conditionemail.png)

## <a name="email-multiple-azure-data-explorer-flow-charts"></a>Электронная почта. несколько диаграмм потока обозреватель данных Azure

1. Создайте новый поток с триггером повторения и определите интервал и частоту последовательности. 
1. Добавьте новый шаг с одним или несколькими действиями **Kusto — выполнение запроса и визуализация результатов** . 

    ![Снимок экрана: выполнение нескольких запросов в последовательности](./media/flow-usage/flow-severalqueries.png)

1. Для каждого **Kusto запроса и визуализации действия результата** определите следующие поля:
    * URL-адрес кластера.
    * Имя базы данных.
    * Запрос и тип диаграммы (например, таблица HTML, круговая диаграмма, диаграмма времени, линейчатая диаграмма или пользовательское значение).

    ![Снимок экрана: Визуализация результатов с несколькими вложениями](./media/flow-usage/flow-visualizeresultsmultipleattachments.png)

1. Добавьте действие **Отправить сообщение электронной почты (v2)** : 
    1. В разделе текст выберите значок представление кода.
    1. В поле **Body** вставьте требуемый **бодихтмл** , чтобы визуальный результат запроса включался в текст сообщения электронной почты.
    1. Чтобы добавить вложение в сообщение электронной почты, добавьте **имя вложения** и **содержимое вложения**.
    
    ![Снимок экрана: Отправка нескольких вложений в электронную почту](./media/flow-usage/flow-email-multiple-attachments.png)

    Дополнительные сведения о создании действия электронной почты см. в разделе [Email Kusto запроса Results](flow.md#email-kusto-query-results). 

Результат:

:::image type="content" source="./media/flow-usage/flow-resultsmultipleattachments.png" alt-text="Результаты нескольких вложений электронной почты, Визуализация в виде круговой диаграммы и линейчатой диаграммы, Azure обозреватель данных" lightbox="./media/flow-usage/flow-resultsmultipleattachments.png#lightbox":::

:::image type="content" source="./media/flow-usage/flow-resultsmultipleattachments2.png" alt-text="Результаты нескольких вложений электронной почты, отображаемых в виде диаграммы времени, Azure обозреватель данных" lightbox="./media/flow-usage/flow-resultsmultipleattachments2.png#lightbox":::

## <a name="next-steps"></a>Дальнейшие шаги

Сведения о [соединителе приложения логики Azure Kusto](kusto/tools/logicapps.md). это еще один способ автоматического запуска запросов и команд Kusto в рамках запланированной или активируемой задачи.

