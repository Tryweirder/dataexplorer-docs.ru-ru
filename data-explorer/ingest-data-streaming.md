---
title: Использование приема потоковой передачи для приема данных в Azure обозреватель данных
description: Узнайте, как принимать (загружать) данные в Azure обозреватель данных с помощью приема потоковой передачи.
author: orspod
ms.author: orspodek
ms.reviewer: tzgitlin
ms.service: data-explorer
ms.topic: conceptual
ms.date: 08/30/2019
ms.openlocfilehash: 4bbb076b4c21ac2f93b2bdaf775d513483332934
ms.sourcegitcommit: 9fe6e34ef3321390ee4e366819ebc9b132b3e03f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2020
ms.locfileid: "84257966"
---
# <a name="streaming-ingestion-preview"></a>Прием потоковой передачи (Предварительная версия)

Используйте прием потоковой передачи, если требуется низкая задержка с временем приема менее 10 секунд для различных данных тома. Он используется для оптимизации рабочей обработки многих таблиц в одной или нескольких базах данных, где поток данных в каждой таблице сравнительно мал (небольшое число записей в секунду), а общий объем приема данных — высокий (тысячи записей в секунду). 

Используйте массовый прием вместо приема потоковой передачи, когда объем данных увеличивается до 4 ГБ в час на таблицу. Ознакомьтесь с [обзором приема данных](ingest-data-overview.md) для получения дополнительных сведений о различных методах приема.

## <a name="prerequisites"></a>Предварительные требования

* Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/) Azure, прежде чем начинать работу.
* Войдите в [веб-интерфейс](https://dataexplorer.azure.com/).
* Создание [кластера Azure обозреватель данных и базы данных](create-cluster-database-portal.md)

## <a name="enable-streaming-ingestion-on-your-cluster"></a>Включение приема потоковой передачи в кластере

> [!WARNING]
> Перед включением приема потоковой передаче ознакомьтесь с [ограничениями](#limitations) .

1. На портале Azure перейдите к кластеру Azure Data Explorer. В окне **Параметры**выберите **конфигурации**. 
1. В области **конфигурации** выберите **вкл** ., чтобы включить прием **потоковой передачи**.
1. Нажмите кнопку **Сохранить**.
 
    ![прием потоковой передачи в](media/ingest-data-streaming/streaming-ingestion-on.png)
 
1. В [пользовательском веб-интерфейсе](https://dataexplorer.azure.com/)Определите [политику приема потоковой передачи](kusto/management/streamingingestionpolicy.md) для таблиц или баз данных, которые будут получать потоковые данные. 

    > [!NOTE]
    > * Если политика определена на уровне базы данных, то все таблицы в базе данных будут включены для приема потоковой передачи.
    > * Примененная политика может ссылаться только на новые принимаемые данные, а не на другие таблицы в базе данных.

## <a name="use-streaming-ingestion-to-ingest-data-to-your-cluster"></a>Использование приема потоковой передачи для приема данных в кластере

Существует два поддерживаемых типа приема потоковой передачи:

* [**Концентратор событий**](ingest-data-event-hub.md), который используется в качестве источника данных.
* Для **пользовательского приема** требуется написать приложение, использующее одну из [клиентских библиотек](kusto/api/client-libraries.md)Azure обозреватель данных. Пример приложения см. в разделе [Пример приема потоковой передачи](https://github.com/Azure/azure-kusto-samples-dotnet/tree/master/client/StreamingIngestionSample) .

### <a name="choose-the-appropriate-streaming-ingestion-type"></a>Выбор соответствующего типа приема потоковой передачи

|   |Концентратор событий  |Пользовательское получение  |
|---------|---------|---------|
|Задержка данных между инициацией приема и данными, доступными для запроса   |    Более длительная задержка     |   Короткая задержка      |
|Затраты на разработку    |   Быстрая и простая настройка, без дополнительных затрат на разработку    |   Высокая нагрузка на разработку приложений для управления ошибками и обеспечения согласованности данных     |

## <a name="disable-streaming-ingestion-on-your-cluster"></a>Отключение приема потоковой передачи в кластере

> [!WARNING]
> Отключение приема потоковой передачи может занять несколько часов.

1. Удаление [политики приема потоковой передачи](kusto/management/streamingingestionpolicy.md) из всех соответствующих таблиц и баз данных. Удаление политики приема потоковой передачи активирует перемещение данных приема потоковой передачи из первоначального хранилища в постоянное хранилище в хранилище столбцов (экстентов или сегментов). Перемещение данных может осуществляться в течение нескольких секунд до нескольких часов, в зависимости от объема данных в первоначальном хранилище, а также от того, как кластер использует ресурсы ЦП и памяти.
1. На портале Azure перейдите к кластеру Azure Data Explorer. В окне **Параметры**выберите **конфигурации**.
1. В области **конфигурации** выберите **выкл** ., чтобы отключить прием **потоковой передачи**.
1. Нажмите кнопку **Сохранить**.

    ![Прием потоковой передачи выкл.](media/ingest-data-streaming/streaming-ingestion-off.png)

## <a name="limitations"></a>Ограничения

* [Курсоры базы данных](kusto/management/databasecursor.md) не поддерживаются для базы данных, если сама база данных или любая из ее таблиц имеет определенную и включенную [политику приема потоков](kusto/management/streamingingestionpolicy.md) .
* [Сопоставление данных](kusto/management/mappings.md) должно быть [предварительно создано](kusto/management/create-ingestion-mapping-command.md) для использования при приеме потоковой передачи. Отдельные запросы на прием потоковой передачи не поддерживает встроенные сопоставления данных.
* Производительность приема потоковой передачи и масштабирование емкости с увеличением размера виртуальной машины и кластера. Число одновременных запросов приема ограничено шестью на ядро. Например, для 16 основных SKU, таких как D14 и L16, максимальный поддерживаемый объем нагрузки составляет 96 параллельных запросов приема. Для двух основных номеров SKU, например D11, максимально поддерживаемая нагрузка составляет 12 параллельных запросов приема.
* Предельный размер данных для запроса приема потоковой передачи составляет 4 МБ.
* Обновление схемы может занять до пяти минут, чтобы служба приема потоковой передачи стала доступной. Примерами таких обновлений являются создание и изменение таблиц и сопоставлений приема. 
* Включение приема потоковой передачи в кластере, даже если данные не принимаются через потоковую передачу, использует часть локального диска SSD компьютеров кластера для данных приема потоковой передачи и сокращает объем хранилища, доступного для оперативного кэша.
* Невозможно задать [теги экстентов](kusto/management/extents-overview.md#extent-tagging) для данных приема потоковой передачи.

## <a name="next-steps"></a>Дальнейшие действия

* [Запрос данных в обозреватель данных Azure](web-query-data.md)
