---
title: Создание подписки на службу "Сетка событий" в учетной записи хранения Azure обозреватель данных
description: В этой статье описывается, как создать подписку на службу "Сетка событий" в учетной записи хранения в Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: kedamari
ms.service: data-explorer
ms.topic: reference
ms.date: 10/05/2020
ms.openlocfilehash: e8ec0a07549a8db4027beab8d512f58e3ab6a780
ms.sourcegitcommit: 4d5628b52b84f7564ea893f621bdf1a45113c137
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/01/2020
ms.locfileid: "96444166"
---
# <a name="manually-create-resources-for-event-grid-ingestion"></a>Создание ресурсов вручную для приема в сетке событий

> [!div class="op_single_selector"]
> * [Портал](ingest-data-event-grid.md)
> * [Портал — создание ресурсов вручную](ingest-data-event-grid-manual.md)
> * [C#](data-connection-event-grid-csharp.md)
> * [Python](data-connection-event-grid-python.md)
> * [Шаблон Azure Resource Manager](data-connection-event-grid-resource-manager.md)

Azure обозреватель данных предлагает непрерывное получение из службы хранилища Azure (хранилище BLOB-объектов Azure и Azure Data Lake Storage 2-го поколения) с помощью [конвейера приема сетки событий](ingest-data-event-grid-overview.md). В конвейере приема сетки событий служба "Сетка событий Azure" направляет созданные BLOB-объекты или события переименования больших двоичных объектов из учетной записи хранения в Azure обозреватель данных через концентратор событий Azure.

В этой статье вы узнаете, как создать вручную ресурсы, необходимые для приема в сетке событий: Подписка на сетку событий, пространство имен концентратора событий и концентратор событий. Пространство имен концентратора событий и создание концентратора событий описаны в разделе [Предварительные требования](#prerequisites). Чтобы использовать автоматическое создание этих ресурсов при определении приема в сетке событий, см. статью [Создание подключения к данным в сетке событий в Azure обозреватель данных](ingest-data-event-grid.md#create-an-event-grid-data-connection-in-azure-data-explorer).

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Создайте [бесплатную учетную запись Azure](https://azure.microsoft.com/free/).
* [Кластер и база данных](create-cluster-database-portal.md).
* [Учетная запись хранения](/azure/storage/common/storage-quickstart-create-account?tabs=azure-portal).
    * Подписку на уведомления в службе "Сетка событий" можно настроить в учетных записях хранения Azure для `BlobStorage` , `StorageV2` или [Data Lake Storage 2-го поколения](/azure/storage/blobs/data-lake-storage-introduction).
* [Пространство имен концентратора событий и концентратор событий](/azure/event-hubs/event-hubs-create).

> [!NOTE]
> Для лучшей производительности создайте все ресурсы в том же регионе, что и кластер Azure обозреватель данных.

## <a name="create-an-event-grid-subscription"></a>Создание подписки Сетки событий
 
1. Войдите в свою учетную запись хранения на портале Azure.
1. В меню слева выберите **события**  >  **Подписка** событий.

     :::image type="content" source="media/eventgrid/create-event-grid-subscription-1.png" alt-text="Создать подписку на сетку событий":::

1. В окне **Создание подписки на событие** на вкладке **Основные** введите следующие значения:

    :::image type="content" source="media/eventgrid/create-event-grid-subscription-2.png" alt-text="Создание значений подписки на события для ввода":::

    |**Параметр** | **Рекомендуемое значение** | **Описание поля**|
    |---|---|---|
    | Имя | *test-grid-connection* | Имя подписки на сетку событий, которую необходимо создать.|
    | Схема событий | *Схема сетки событий* | Схема, которая должна использоваться для службы "Сетка событий Azure". |
    | Тип раздела | *Учетная запись хранения* | Тип раздела сетки событий. Заполняется автоматически.|
    | Исходный ресурс | *gridteststorage1* | Имя учетной записи хранения. Заполняется автоматически.|
    | Имя системного раздела | *gridteststorage1...* | Системный раздел, в котором служба хранилища Azure публикует события. Этот системный раздел затем перенаправляет событие подписчику, который получает и обрабатывает события. Заполняется автоматически.|
    | Фильтрация по типам событий | *BLOB-объект создан* | Позволяет указать, о каких конкретных событиях нужно получать уведомления. При создании подписки выберите один из поддерживаемых в настоящее время типов: Microsoft. Storage. BlobCreated. или Microsoft. Storage. Блобренамед|

1. В окне **сведения о конечной точке** выберите **концентраторы событий**.

    :::image type="content" source="media/eventgrid/endpoint-details.png" alt-text="Выбор обработчика событий для получения событий — концентратора событий Azure обозреватель данных":::

1. Щелкните **выбрать конечную точку** и заполните созданный концентратор событий, например *Test-Hub*.
    
1. Выберите вкладку **фильтры** , если хотите отвести трассировку по конкретным темам. Настройте фильтры для получения уведомлений следующим образом:
   
    :::image type="content" source="media/eventgrid/filters-tab.png" alt-text="Сетка событий вкладки &quot;фильтры&quot;":::

   1. Выберите **Включить фильтрацию тем**
   1. **Тема начинается с** Field — это префикс *литерала* субъекта. Так как применяется шаблон *StartsWith*, он может охватывать несколько контейнеров, папок или больших двоичных объектов. Подстановочные знаки не допускаются.
       * Чтобы определить фильтр для контейнера больших двоичных объектов, установите поле следующим образом: *`/blobServices/default/containers/[container prefix]`* .
       * Чтобы определить фильтр для префикса большого двоичного объекта (или папки в Azure Data Lake Gen2), задайте поле следующим образом: *`/blobServices/default/containers/[container name]/blobs/[folder/blob prefix]`* .
   1. Поле **Тема заканчивается на** — это суффикс *литерала* большого двоичного объекта. Подстановочные знаки не допускаются.
   1. Поле **сопоставления темы с учетом регистра** указывает, учитывается ли регистр в фильтрах префиксов и суффиксов.

    Дополнительные сведения о фильтрации событий см. в разделе [события хранилища BLOB-объектов](/azure/storage/blobs/storage-blob-event-overview#filtering-events).

1. Выберите **Создать**.

## <a name="next-steps"></a>Дальнейшие действия

* Продолжите установку и создайте подключение приема данных к Azure обозреватель данных через портал Azure: [Создайте подключение к данным в службе "Сетка событий" в azure обозреватель данных](ingest-data-event-grid.md#create-an-event-grid-data-connection-in-azure-data-explorer).

* Если вы не планируете продолжать прием сетки событий с помощью созданных вами ресурсов и больше не хотите использовать ресурсы, [очистите ресурсы](ingest-data-event-grid.md#clean-up-resources) , чтобы избежать появления постоянных затрат.
