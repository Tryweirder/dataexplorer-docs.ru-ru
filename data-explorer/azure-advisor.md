---
title: Использование рекомендаций помощника по Azure для оптимизации кластера Azure обозреватель данных
description: В этой статье описываются рекомендации помощника по Azure, используемые для оптимизации кластера Azure обозреватель данных.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: lizlotor
ms.service: data-explorer
ms.topic: how-to
ms.date: 09/14/2020
ms.openlocfilehash: c071e7d14005a7966e79f3629fe52c9c33324547
ms.sourcegitcommit: c140bc3bc984f861df0b85e672d2e685e6659a54
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2020
ms.locfileid: "90109945"
---
# <a name="use-azure-advisor-recommendations-to-optimize-your-azure-data-explorer-cluster-preview"></a>Использование рекомендаций помощника по Azure для оптимизации кластера Azure обозреватель данных (Предварительная версия)

Помощник Azure анализирует конфигурацию кластера Azure обозреватель данных и данные телеметрии использования, а также предоставляет персонализированные и практические рекомендации, помогающие оптимизировать кластер.

## <a name="access-the-azure-advisor-recommendations"></a>Доступ к рекомендациям помощника по Azure

Получить доступ к рекомендациям помощника по Azure можно двумя способами.

### <a name="view-azure-advisor-recommendations-for-your-azure-data-explorer-cluster"></a>Просмотр рекомендаций Azure Advisor для кластера Azure обозреватель данных

1. В портал Azure перейдите на страницу кластера Azure обозреватель данных. 
1. В меню слева в разделе **мониторинг**выберите **рекомендации помощника**. Откроется список рекомендаций для этого кластера.

    :::image type="content" source="media/azure-advisor/resource-group-advisor-recommendations.png" alt-text="Рекомендации помощника по Azure для кластера Azure обозреватель данных"::: 

### <a name="view-azure-advisor-recommendations-for-all-clusters-in-your-subscription"></a>Просмотр рекомендаций помощника по Azure для всех кластеров в подписке

1. В портал Azure перейдите к [ресурсу Advisor](https://ms.portal.azure.com/#blade/Microsoft_Azure_Expert/AdvisorMenuBlade/overview). 
1. В разделе **Общие сведения**выберите подписки, для которых требуется получить рекомендации. 
1. Выберите **кластеры обозреватель данных Azure** и **базы данных Обозреватель данных Azure** во втором раскрывающемся списке.
 
    :::image type="content" source="media/azure-advisor/advisor-resource.png" alt-text="Ресурс помощника по Azure":::

## <a name="use-the-azure-advisor-recommendations"></a>Использование рекомендаций помощника по Azure

Существуют различные типы рекомендаций помощника по Azure. Используйте соответствующий тип рекомендации, чтобы помочь вам оптимизировать кластер. 

1. В колонке **помощника**в разделе **рекомендации**выберите **стоимость** для рекомендаций по затратам.

    :::image type="content" source="media/azure-advisor/select-recommendation-type.png" alt-text="Выбор типа рекомендации":::

1. Выберите рекомендацию из списка. 

    :::image type="content" source="media/azure-advisor/select-recommendation.png" alt-text="Выбор рекомендации":::

1. В следующем окне содержится список кластеров, к которым относится рекомендация. Сведения о рекомендациях различаются для каждого кластера и включают Рекомендуемые действия.

    :::image type="content" source="media/azure-advisor/clusters-with-recommendations.png" alt-text="Список кластеров с рекомендациями":::

## <a name="recommendation-types"></a>Типы рекомендаций

В настоящее время доступны рекомендации по стоимости и производительности.

> [!IMPORTANT]
> Реальная годовая экономия может быть различной. Представленная ежегодная экономия основана на ценах с оплатой по мере использования. Потенциальное сохранение не учитывает скидки на зарезервированные экземпляры виртуальных машин Azure (RIs).

### <a name="cost-recommendations"></a>Рекомендации по ценам

Рекомендации по **затратам** доступны для кластеров, которые можно изменить, чтобы снизить затраты без ущерба для производительности. Ниже приведены рекомендации по затратам. 

* [Неиспользуемый кластер Azure обозреватель данных](#azure-data-explorer-unused-cluster) 
* [Правильный размер кластера Azure обозреватель данных для оптимизации затрат](#correctly-size-azure-data-explorer-clusters-to-optimize-cost)
* [Сокращение кэша для таблиц Azure Data Explorer](#reduce-cache-for-azure-data-explorer-tables)

#### <a name="azure-data-explorer-unused-cluster"></a>Неиспользуемый кластер Azure обозреватель данных

Кластер считается неиспользуемым, если он содержит небольшое количество данных, запросов и событий приема за последние 30 дней, низкая загрузка ЦП за последние два дня и не подписчиков за последний день. Рекомендуется удалить неиспользуемые кластеры с помощью рекомендаций по удалению **пустых или неиспользуемых кластеров** .

#### <a name="correctly-size-azure-data-explorer-clusters-to-optimize-cost"></a>Правильное изменение размера кластеров Azure обозреватель данных для оптимизации затрат

**Оптимальный размер кластеров Azure обозреватель данных для оптимизации затрат** предоставляется кластеру, размер или номер SKU виртуальной машины не оптимизирован по затратам. Эта рекомендация основана на таких параметрах, как емкость данных, загрузка ЦП и прием на протяжении прошлой недели. Вы можете уменьшить затраты, изменив размер до рекомендуемой конфигурации кластера, используя [горизонтальное масштабирование](manage-cluster-vertical-scaling.md) и [масштабирование](manage-cluster-horizontal-scaling.md).

Рекомендуется использовать [оптимизированную конфигурацию автомасштабирования](manage-cluster-horizontal-scaling.md#optimized-autoscale). Если вы используете оптимизированный Автомасштабирование и видите в своем кластере рекомендацию по размеру, то либо текущий номер SKU виртуальной машины, либо оптимизированный минимальный и максимальный пределы автомасштабирования не оптимизируются. Рекомендуемое число экземпляров должно включаться в определенные границы.

> [!TIP]
> Оптимизированная конфигурация автомасштабирования не изменяет счетчик экземпляров немедленно. Для мгновенного изменения используйте [масштабирование вручную](manage-cluster-horizontal-scaling.md#manual-scale) , чтобы сбросить рекомендуемое число экземпляров, а затем включите оптимизированный Автомасштабирование для будущей оптимизации.

#### <a name="reduce-cache-for-azure-data-explorer-tables"></a>Сокращение кэша для таблиц Azure Data Explorer

**Сокращение времени кэширования таблицы обозреватель данных Azure для рекомендации по оптимизации стоимости кластера** предоставляется для кластера, который может сократить ее политику кэширования. Эта рекомендация основывается на периоде обратного просмотра запросов за последние 30 дней. Вы увидите 10 первых таблиц с потенциальной экономией кэша. Эта рекомендация предлагается только в том случае, если кластер может масштабироваться или масштабироваться после изменения политики кэша. Advisor проверяет, ограничивается ли кластером данными, что означает, что кластер имеет низкую загрузку ЦП и низкий уровень приема, но из-за высокой емкости данных кластеру не удалось выполнить масштабирование или масштабирование.

### <a name="performance-recommendations"></a>Рекомендации по производительности

Рекомендации по **производительности** помогают повысить производительность кластеров Azure обозреватель данных. Ниже приведены рекомендации по повышению производительности. 
* [Правильный размер кластера Azure обозреватель данных для оптимизации производительности](#correctly-size-azure-data-explorer-clusters-to-optimize-performance)
* [Обновление политики кэша для таблиц обозреватель данных Azure](#update-cache-policy-for-azure-data-explorer-tables)

#### <a name="correctly-size-azure-data-explorer-clusters-to-optimize-performance"></a>Правильное изменение размера кластеров Azure обозреватель данных для оптимизации производительности

Для оптимальной производительности в кластере, размер или номер SKU виртуальной машины, не оптимизированы для повышения производительности, можно задать **Размер кластеров Azure обозреватель данных** . Эта рекомендация основана на таких параметрах, как объем данных, а также об использовании ЦП и приема на прошлой неделе. Чтобы повысить производительность, можно правильно определить размер до рекомендуемой конфигурации кластера, используя [масштабирование](manage-cluster-vertical-scaling.md) и [горизонтальное масштабирование](manage-cluster-horizontal-scaling.md).

Рекомендуется использовать [оптимизированную конфигурацию автомасштабирования](manage-cluster-horizontal-scaling.md#optimized-autoscale). Если вы используете оптимизированный Автомасштабирование и видите в кластере рекомендацию по размеру, то либо текущий номер SKU виртуальной машины, либо оптимизированный минимальный и максимальный пределы автомасштабирования не оптимизируются. Рекомендуемое число экземпляров должно включаться в определенные границы.

> [!TIP]
> Оптимизированная конфигурация автомасштабирования не изменяет счетчик экземпляров немедленно. Для мгновенного изменения используйте [масштабирование вручную](manage-cluster-horizontal-scaling.md#manual-scale) , чтобы сбросить рекомендуемое число экземпляров, а затем включите оптимизированный Автомасштабирование для будущей оптимизации.

#### <a name="update-cache-policy-for-azure-data-explorer-tables"></a>Обновление политики кэша для таблиц обозреватель данных Azure

Чтобы получить рекомендации по повышению производительности в кластере, для которого требуется другой период (фильтр времени) или более высокий уровень политики кэширования, используется проверка подлинности **кэша таблиц Azure обозреватель данных (политика)** . Эта рекомендация основывается на периоде обратного просмотра запросов за последние 30 дней. Большинство запросов, которые выполнялись за последние 30 дней, получали данные, которые не были в кэше, что может увеличить время выполнения запроса.  Вы увидите 10 первых таблиц, которые обращаются к данным вне кэша, упорядоченным по проценту запросов.

## <a name="next-steps"></a>Дальнейшие шаги

* [Управление горизонтальным масштабированием кластера (развертывание) в обозреватель данных Azure для поддержки изменения спроса](manage-cluster-horizontal-scaling.md)
* [Управление вертикальным масштабированием кластера (увеличение масштаба) в обозреватель данных Azure для поддержки изменения спроса](manage-cluster-vertical-scaling.md)